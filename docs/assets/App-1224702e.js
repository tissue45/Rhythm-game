import{c as nt,r as n,j as e,u as Vs,N as ks,a as Ce,L as is,s as be,g as lt,b as Hs,d as it,R as zs,e as pe}from"./index-f5461b84.js";const qs="https://zyqbuuovliissozugjfq.supabase.co",ot="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp5cWJ1dW92bGlpc3NvenVnamZxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MzQ4MTgsImV4cCI6MjA3MDIxMDgxOH0.TYj-kGTlsGlznZCYX4M1yIilu0z1iNZ6tcWg5iLIaHE";console.log("ğŸ” í™˜ê²½ë³€ìˆ˜ í™•ì¸:");console.log("VITE_SUPABASE_URL:",qs);console.log("VITE_SUPABASE_ANON_KEY:","ì„¤ì •ë¨");let O;console.log("âœ… Supabase í´ë¼ì´ì–¸íŠ¸ ìƒì„± ì„±ê³µ"),O=nt(qs,ot);const dt=async(t,l)=>{try{if(!t)throw new Error("íŒŒì¼ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");if(t.size>5*1024*1024)throw new Error("íŒŒì¼ í¬ê¸°ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.");if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(t.type))throw new Error("ì§€ì›ë˜ëŠ” ì´ë¯¸ì§€ í˜•ì‹: JPG, PNG, WebP");const w=`${Date.now()}-${t.name}`,h=`products/${l}/${w}`,{data:j,error:o}=await O.storage.from("product-images").upload(h,t,{cacheControl:"3600",upsert:!1});if(o)throw o;const{data:y}=O.storage.from("product-images").getPublicUrl(h);return{success:!0,url:y.publicUrl,path:h}}catch(c){return console.error("ì´ë¯¸ì§€ ì—…ë¡œë“œ ì˜¤ë¥˜:",c),{success:!1,error:c.message}}},Bs=async(t,l)=>{try{if(!t||t.length===0)return{success:!0,urls:[],paths:[]};const c=t.map(y=>dt(y,l)),i=await Promise.all(c),w=i.filter(y=>y.success),h=i.filter(y=>!y.success);h.length>0&&console.warn("ì¼ë¶€ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨:",h);const j=w.map(y=>y.url),o=w.map(y=>y.path);return{success:!0,urls:j,paths:o,failedCount:h.length,totalCount:t.length}}catch(c){return console.error("ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì˜¤ë¥˜:",c),{success:!1,error:c.message}}},Ys=async t=>{try{const{error:l}=await O.storage.from("product-images").remove([t]);if(l)throw l;return{success:!0}}catch(l){return console.error("ì´ë¯¸ì§€ ì‚­ì œ ì˜¤ë¥˜:",l),{success:!1,error:l.message}}},Gs=async()=>{try{const{data:t,error:l}=await O.from("products").select("*").order("id",{ascending:!0});if(l)throw l;return{success:!0,data:t}}catch(t){return console.error("ìƒí’ˆ ì¡°íšŒ ì˜¤ë¥˜:",t),{success:!1,error:t.message,data:[]}}},ct=async t=>{try{const{data:l,error:c}=await O.from("products").insert([t]).select().single();if(c)throw c;return{success:!0,data:l}}catch(l){return console.error("ìƒí’ˆ ìƒì„± ì˜¤ë¥˜:",l),{success:!1,error:l.message}}},bs=async(t,l)=>{try{console.log("ğŸ”„ ìƒí’ˆ ìˆ˜ì • ì‹œì‘:",{productId:t,productData:l});const{data:{user:c},error:i}=await O.auth.getUser();console.log("ğŸ‘¤ í˜„ì¬ ì‚¬ìš©ì:",{user:c==null?void 0:c.email,userError:i});const w={};Object.keys(l).forEach(N=>{l[N]!==null&&l[N]!==void 0&&(w[N]=l[N])}),console.log("ğŸ§¹ ì •ë¦¬ëœ ë°ì´í„°:",w);const{data:h,error:j}=await O.from("products").select("*").eq("id",t).single();console.log("ğŸ“‹ í˜„ì¬ ìƒí’ˆ ìƒíƒœ:",{currentProduct:h,selectError:j});const{data:o,error:y}=await O.from("products").update(w).eq("id",t).select().single();if(console.log("ğŸ“Š Supabase ì‘ë‹µ:",{data:o,error:y}),y)throw console.error("âŒ Supabase ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:",y),y;return console.log("âœ… ìƒí’ˆ ìˆ˜ì • ì„±ê³µ:",o),{success:!0,data:o}}catch(c){return console.error("âŒ ìƒí’ˆ ìˆ˜ì • ì˜¤ë¥˜:",c),{success:!1,error:c.message}}},mt=async t=>{try{const{error:l}=await O.from("products").delete().eq("id",t);if(l)throw l;return{success:!0}}catch(l){return console.error("âŒ ìƒí’ˆ ì‚­ì œ ì˜¤ë¥˜:",l),{success:!1,error:l.message}}},Ks=n.createContext(void 0),Le=()=>{const t=n.useContext(Ks);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},ht=({children:t})=>{const[l,c]=n.useState(null),[i,w]=n.useState(!0);n.useEffect(()=>{(async()=>{try{const{data:{session:u},error:d}=await O.auth.getSession();d?console.error("ì„¸ì…˜ í™•ì¸ ì˜¤ë¥˜:",d):u&&c(u.user)}catch(u){console.error("ì„¸ì…˜ í™•ì¸ ì¤‘ ì˜¤ë¥˜:",u)}finally{w(!1)}})();const{data:{subscription:I}}=O.auth.onAuthStateChange(async(u,d)=>{var r;console.log("ì¸ì¦ ìƒíƒœ ë³€ê²½:",u,(r=d==null?void 0:d.user)==null?void 0:r.email),u==="SIGNED_IN"&&d?c(d.user):u==="SIGNED_OUT"&&c(null),w(!1)});return()=>I.unsubscribe()},[]);const N={user:l,loading:i,signIn:async(v,I)=>{var u;try{console.log("ë¡œê·¸ì¸ ì‹œë„:",v);const{data:d,error:r}=await O.auth.signInWithPassword({email:v.trim(),password:I});return r?(console.error("ë¡œê·¸ì¸ ì˜¤ë¥˜:",r),{success:!1,error:r.message}):d.user?(console.log("ë¡œê·¸ì¸ ì„±ê³µ:",d.user.email,"Role:",(u=d.user.user_metadata)==null?void 0:u.role),c(d.user),{success:!0,data:d}):{success:!1,error:"ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."}}catch(d){return console.error("ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:",d),{success:!1,error:"ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."}}},signUp:async(v,I,u)=>{try{const{data:d,error:r}=await O.auth.signUp({email:v,password:I,options:{data:u}});return r?{success:!1,error:r.message}:{success:!0}}catch(d){return console.error("íšŒì›ê°€ì… ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:",d),{success:!1,error:"íšŒì›ê°€ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."}}},signOut:async()=>{try{const{error:v}=await O.auth.signOut();return v?(console.error("ë¡œê·¸ì•„ì›ƒ ì˜¤ë¥˜:",v),{success:!1,error:v.message}):(c(null),{success:!0})}catch(v){return console.error("ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:",v),{success:!1,error:"ë¡œê·¸ì•„ì›ƒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."}}},isAdmin:()=>{var v,I;return((v=l==null?void 0:l.user_metadata)==null?void 0:v.role)==="admin"||((I=l==null?void 0:l.user_metadata)==null?void 0:I.role)==="hq"}};return e.jsx(Ks.Provider,{value:N,children:t})};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pt=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(l,c,i)=>i?i.toUpperCase():c.toLowerCase()),Ps=t=>{const l=pt(t);return l.charAt(0).toUpperCase()+l.slice(1)},Js=(...t)=>t.filter((l,c,i)=>!!l&&l.trim()!==""&&i.indexOf(l)===c).join(" ").trim(),gt=t=>{for(const l in t)if(l.startsWith("aria-")||l==="role"||l==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ut={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=n.forwardRef(({color:t="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:i,className:w="",children:h,iconNode:j,...o},y)=>n.createElement("svg",{ref:y,...ut,width:l,height:l,stroke:t,strokeWidth:i?Number(c)*24/Number(l):c,className:Js("lucide",w),...!h&&!gt(o)&&{"aria-hidden":"true"},...o},[...j.map(([N,v])=>n.createElement(N,v)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=(t,l)=>{const c=n.forwardRef(({className:i,...w},h)=>n.createElement(jt,{ref:h,iconNode:l,className:Js(`lucide-${xt(Ps(t))}`,`lucide-${t}`,i),...w}));return c.displayName=Ps(t),c};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ss=Q("activity",ft);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],xs=Q("arrow-left",yt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],es=Q("arrow-right",bt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ve=Q("bell",vt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],ye=Q("building-2",Nt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Qs=Q("camera",wt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ns=Q("calendar",St);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],_e=Q("chart-column",Ct);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Ge=Q("chart-pie",kt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Xs=Q("chevron-down",zt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],It=Q("chevron-right",_t);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Be=Q("circle-alert",Mt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],je=Q("circle-check-big",Dt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],De=Q("circle-x",Tt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Te=Q("clock",Rt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Zs=Q("credit-card",Bt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],We=Q("dollar-sign",Pt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Qe=Q("download",At);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],_s=Q("eye-off",$t);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],we=Q("eye",Wt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],As=Q("file-text",Lt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Ot=Q("folder-open",Et);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Ut=Q("folder",Ft);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Fe=Q("funnel",Vt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],qt=Q("hash",Ht);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Gt=Q("house",Yt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],et=Q("image",Kt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Qt=Q("key",Jt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Se=Q("loader",Xt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],cs=Q("lock",Zt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],sr=Q("log-out",er);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Pe=Q("mail",tr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],st=Q("map-pin",rr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],nr=Q("message-circle",ar);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],He=Q("message-square",lr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ue=Q("package",ir);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],dr=Q("pen-line",or);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],mr=Q("percent",cr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Ke=Q("phone",hr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qe=Q("plus",xr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ps=Q("refresh-cw",pr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ms=Q("save",gr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ue=Q("search",ur);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ns=Q("settings",jr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],hs=Q("shield",fr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],br=Q("shopping-bag",yr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Je=Q("shopping-cart",vr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],wr=Q("smartphone",Nr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],rs=Q("square-pen",Sr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],$s=Q("star",Cr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],zr=Q("target",kr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ye=Q("trash-2",_r);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Is=Q("trending-down",Ir);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ae=Q("trending-up",Mr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ts=Q("triangle-alert",Dr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],os=Q("truck",Tr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Br=Q("upload",Rr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ar=Q("user-plus",Pr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Re=Q("user",$r);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],as=Q("users",Wr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ze=Q("x",Lr),Er=({children:t,requireAdmin:l=!1})=>{var j,o;const{user:c,loading:i}=Le(),w=Vs();if(i)return e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column",gap:"1rem"},children:[e.jsx(Se,{size:48,style:{animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{color:"#666"},children:"ë¡œë”© ì¤‘..."})]});if(!c)return e.jsx(ks,{to:"/admin/login",state:{from:w},replace:!0});const h=()=>{var N;const y=(N=c==null?void 0:c.user_metadata)==null?void 0:N.role;return y?y==="admin"||y==="hq"||y==="merchant":!1};return console.log("ğŸ” ê¶Œí•œ ê²€ì‚¬:",{requireAdmin:l,userEmail:c==null?void 0:c.email,userRole:(j=c==null?void 0:c.user_metadata)==null?void 0:j.role,isAdminResult:h(),userMetadata:c==null?void 0:c.user_metadata}),l&&!h()?(console.log("âŒ ê´€ë¦¬ì ê¶Œí•œ ë¶€ì¡±:",{requireAdmin:l,isAdminResult:h(),userEmail:c==null?void 0:c.email,userMetadata:c==null?void 0:c.user_metadata}),e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column",gap:"1rem"},children:e.jsxs("div",{className:"card",style:{textAlign:"center",maxWidth:"400px"},children:[e.jsx("h2",{style:{color:"#dc3545",marginBottom:"1rem"},children:"ì ‘ê·¼ ê¶Œí•œ ì—†ìŒ"}),e.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"ì´ í˜ì´ì§€ì— ì ‘ê·¼í•˜ë ¤ë©´ ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤."}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#999",marginBottom:"1.5rem",padding:"0.75rem",background:"#f8f9fa",borderRadius:"4px"},children:["í˜„ì¬ ì‚¬ìš©ì: ",c==null?void 0:c.email,e.jsx("br",{}),"ê¶Œí•œ: ",((o=c==null?void 0:c.user_metadata)==null?void 0:o.role)||"ì¼ë°˜ ì‚¬ìš©ì"]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>window.history.back(),children:"ì´ì „ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°"})]})})):e.jsx(e.Fragment,{children:t})},Or=()=>{const[t,l]=n.useState(""),[c,i]=n.useState(""),[w,h]=n.useState(!1),[j,o]=n.useState(!1),[y,N]=n.useState(""),{signIn:v}=Le(),I=Ce(),u=async d=>{d.preventDefault(),o(!0),N("");try{const r=await v(t,c);r.success?I("/admin"):N(r.error)}catch{N("ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{o(!1)}};return e.jsx("div",{className:"login-container",children:e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("h1",{children:"í˜„ëŒ€ë°±í™”ì "}),e.jsx("h2",{children:"ë³¸ì‚¬ ê´€ë¦¬ ì‹œìŠ¤í…œ"}),e.jsx("p",{children:"ë¡œê·¸ì¸í•˜ì—¬ ì‹œìŠ¤í…œì— ì ‘ì†í•˜ì„¸ìš”"})]}),e.jsxs("form",{onSubmit:u,className:"login-form",children:[y&&e.jsx("div",{className:"error-message",children:y}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"ì´ë©”ì¼"}),e.jsxs("div",{className:"input-group",children:[e.jsx(Pe,{size:16}),e.jsx("input",{type:"email",id:"email",value:t,onChange:d=>l(d.target.value),placeholder:"ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"ë¹„ë°€ë²ˆí˜¸"}),e.jsxs("div",{className:"input-group",children:[e.jsx(cs,{size:16}),e.jsx("input",{type:w?"text":"password",id:"password",value:c,onChange:d=>i(d.target.value),placeholder:"ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”",required:!0}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>h(!w),children:w?e.jsx(_s,{size:16}):e.jsx(we,{size:16})})]})]}),e.jsx("button",{type:"submit",className:"login-button",disabled:j,children:j?"ë¡œê·¸ì¸ ì¤‘...":"ë¡œê·¸ì¸"})]}),e.jsxs("div",{className:"login-footer",children:[e.jsx("p",{children:"ì‹¤ì œ ë“±ë¡ëœ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ì„¸ìš”"}),e.jsxs("div",{className:"signup-links",children:[e.jsxs("div",{className:"signup-section",children:[e.jsx("h3",{children:"ë³¸ì‚¬ ê´€ë¦¬ì"}),e.jsx("p",{children:"ë³¸ì‚¬ ê´€ë¦¬ì ê³„ì •ì´ í•„ìš”í•˜ì‹ ê°€ìš”?"}),e.jsx("button",{className:"link-button hq-button",onClick:()=>I("/admin/hq-register"),children:"ë³¸ì‚¬ ê´€ë¦¬ì ë“±ë¡"})]}),e.jsxs("div",{className:"signup-section",children:[e.jsx("h3",{children:"ê°€ë§¹ì "}),e.jsx("p",{children:"ê°€ë§¹ì  ê³„ì •ì´ í•„ìš”í•˜ì‹ ê°€ìš”?"}),e.jsx("button",{className:"link-button merchant-button",onClick:()=>I("/admin/merchant-register"),children:"ê°€ë§¹ì  ë“±ë¡"})]})]})]})]})})},Fr=()=>{const t=Ce(),[l,c]=n.useState({name:"",employeeCode:"",department:"",phone:"",email:"",password:"",confirmPassword:""}),[i,w]=n.useState(!1),[h,j]=n.useState(!1),[o,y]=n.useState({}),[N,v]=n.useState(!1),I=["ê²½ì˜ì§€ì›íŒ€","ë§ˆì¼€íŒ…íŒ€","ì˜ì—…íŒ€","ìƒí’ˆê¸°íšíŒ€","ê³ ê°ì„œë¹„ìŠ¤íŒ€","ì¬ë¬´íŒ€","ITíŒ€","ì¸ì‚¬íŒ€","ë²•ë¬´íŒ€","êµ¬ë§¤íŒ€"],u=g=>{const{name:_,value:D}=g.target;let k=D;_==="employeeCode"&&(k=D.toUpperCase()),c(M=>({...M,[_]:k})),o[_]&&y(M=>({...M,[_]:""}))},d=()=>{const g={};l.name.trim()||(g.name="ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");const _=/^[A-Z0-9]{4,8}$/;l.employeeCode.trim()?_.test(l.employeeCode)||(g.employeeCode="ì‚¬ì›ì½”ë“œëŠ” 4-8ìì˜ ì˜ë¬¸ ëŒ€ë¬¸ìì™€ ìˆ«ìë§Œ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤."):g.employeeCode="ì‚¬ì›ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.",l.department||(g.department="ë¶€ì„œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.");const D=/^[0-9]{2,3}-[0-9]{3,4}-[0-9]{4}$/;l.phone.trim()?D.test(l.phone)||(g.phone="ì—°ë½ì²˜ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. (ì˜ˆ: 010-1234-5678)"):g.phone="ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.";const k=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return l.email.trim()?k.test(l.email)||(g.email="ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."):g.email="ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.",l.password?l.password.length<8&&(g.password="ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤."):g.password="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.",l.confirmPassword?l.password!==l.confirmPassword&&(g.confirmPassword="ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."):g.confirmPassword="ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.",y(g),Object.keys(g).length===0},r=async g=>{var _,D,k,M,f;if(g.preventDefault(),!!d()){v(!0);try{const{data:B,error:W}=await O.auth.signUp({email:l.email,password:l.password,options:{data:{role:"admin",name:l.name,employee_code:l.employeeCode,department:l.department}}});if(W)throw W;const{data:a,error:x}=await O.from("hq_admin_users").insert([{employee_code:l.employeeCode,name:l.name,email:l.email,phone:l.phone,role:l.department,auth_user_id:(_=B.user)==null?void 0:_.id,is_approved:!1}]);if(x)throw x;alert(`ê´€ë¦¬ì ê³„ì •ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!
ë°”ë¡œ ë¡œê·¸ì¸í•˜ì—¬ ì‚¬ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`),t("/admin/login")}catch(B){console.error("ê´€ë¦¬ì ë“±ë¡ ì˜¤ë¥˜:",B);let W="ê´€ë¦¬ì ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";(D=B.message)!=null&&D.includes("already registered")?W="ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.":(k=B.message)!=null&&k.includes("invalid email")?W="ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì´ë©”ì¼ í˜•ì‹ì…ë‹ˆë‹¤.":(M=B.message)!=null&&M.includes("weak password")?W="ë¹„ë°€ë²ˆí˜¸ê°€ ë„ˆë¬´ ì•½í•©ë‹ˆë‹¤. ë” ê°•í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.":(f=B.message)!=null&&f.includes("duplicate")&&(W="ì´ë¯¸ ë“±ë¡ëœ ì‚¬ì›ì½”ë“œì…ë‹ˆë‹¤."),alert(W+`
ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.`)}finally{v(!1)}}};return e.jsx("div",{className:"admin-register-container",children:e.jsxs("div",{className:"admin-register-card",children:[e.jsxs("div",{className:"admin-register-header",children:[e.jsxs("button",{className:"back-button",onClick:()=>t("/admin/login"),children:[e.jsx(xs,{size:20}),"ë¡œê·¸ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°"]}),e.jsx("div",{className:"header-icon",children:e.jsx(hs,{size:48,color:"#495057"})}),e.jsx("h1",{className:"admin-register-title",children:"ë°±í™”ì  ë³¸ì‚¬ ê´€ë¦¬ì ë“±ë¡"}),e.jsx("p",{className:"admin-register-subtitle",children:"ë³¸ì‚¬ ê´€ë¦¬ ì‹œìŠ¤í…œ ê´€ë¦¬ì ê³„ì •ì„ ë“±ë¡í•˜ì„¸ìš”"})]}),e.jsxs("form",{onSubmit:r,className:"admin-register-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx(Re,{size:16}),"ì´ë¦„"]}),e.jsx("input",{type:"text",name:"name",value:l.name,onChange:u,className:`form-input ${o.name?"error":""}`,placeholder:"í™ê¸¸ë™"}),o.name&&e.jsx("span",{className:"error-message",children:o.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx(qt,{size:16}),"ì‚¬ì›ì½”ë“œ"]}),e.jsx("input",{type:"text",name:"employeeCode",value:l.employeeCode,onChange:u,className:`form-input ${o.employeeCode?"error":""}`,placeholder:"HD2024"}),o.employeeCode&&e.jsx("span",{className:"error-message",children:o.employeeCode})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx(ye,{size:16}),"ë¶€ì„œ"]}),e.jsxs("select",{name:"department",value:l.department,onChange:u,className:`form-input ${o.department?"error":""}`,children:[e.jsx("option",{value:"",children:"ë¶€ì„œë¥¼ ì„ íƒí•˜ì„¸ìš”"}),I.map(g=>e.jsx("option",{value:g,children:g},g))]}),o.department&&e.jsx("span",{className:"error-message",children:o.department})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx(Ke,{size:16}),"ì—°ë½ì²˜"]}),e.jsx("input",{type:"tel",name:"phone",value:l.phone,onChange:u,className:`form-input ${o.phone?"error":""}`,placeholder:"010-1234-5678"}),o.phone&&e.jsx("span",{className:"error-message",children:o.phone})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx(Pe,{size:16}),"ì´ë©”ì¼ (ì•„ì´ë””)"]}),e.jsx("input",{type:"email",name:"email",value:l.email,onChange:u,className:`form-input ${o.email?"error":""}`,placeholder:"admin@hyundai.com"}),o.email&&e.jsx("span",{className:"error-message",children:o.email})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx(cs,{size:16}),"ë¹„ë°€ë²ˆí˜¸"]}),e.jsxs("div",{className:"password-input",children:[e.jsx("input",{type:i?"text":"password",name:"password",value:l.password,onChange:u,className:`form-input ${o.password?"error":""}`,placeholder:"ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ìµœì†Œ 8ì)"}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>w(!i),children:i?e.jsx(_s,{size:16}):e.jsx(we,{size:16})})]}),o.password&&e.jsx("span",{className:"error-message",children:o.password})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx(cs,{size:16}),"ë¹„ë°€ë²ˆí˜¸ í™•ì¸"]}),e.jsxs("div",{className:"password-input",children:[e.jsx("input",{type:h?"text":"password",name:"confirmPassword",value:l.confirmPassword,onChange:u,className:`form-input ${o.confirmPassword?"error":""}`,placeholder:"ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”"}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>j(!h),children:h?e.jsx(_s,{size:16}):e.jsx(we,{size:16})})]}),o.confirmPassword&&e.jsx("span",{className:"error-message",children:o.confirmPassword})]})]}),e.jsxs("div",{className:"notice-box",children:[e.jsxs("div",{className:"notice-header",children:[e.jsx(hs,{size:16}),e.jsx("span",{children:"ê´€ë¦¬ì ë“±ë¡ ì•ˆë‚´"})]}),e.jsxs("ul",{className:"notice-list",children:[e.jsx("li",{children:"ê´€ë¦¬ì ê³„ì • ë“±ë¡ í›„ ì¦‰ì‹œ ë¡œê·¸ì¸í•˜ì—¬ ì‚¬ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤."}),e.jsx("li",{children:"ê³„ì • ê´€ë ¨ ë¬¸ì˜ì‚¬í•­ì€ ITíŒ€(ext. 1234)ìœ¼ë¡œ ì—°ë½í•˜ì„¸ìš”."}),e.jsx("li",{children:"ì‚¬ì›ì½”ë“œëŠ” ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš” (ì˜ˆ: HD2024001)."})]})]}),e.jsx("button",{type:"submit",className:"admin-register-button",disabled:N,children:N?"ë“±ë¡ ì¤‘...":"ê´€ë¦¬ì ë“±ë¡ ì‹ ì²­"})]}),e.jsx("div",{className:"admin-register-footer",children:e.jsxs("p",{children:["ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”?",e.jsx("button",{className:"link-button",onClick:()=>t("/admin/login"),children:"ë¡œê·¸ì¸í•˜ê¸°"})]})})]})})},Ur=()=>{const[t,l]=n.useState({name:"",business_number:"",email:"",password:"",confirmPassword:"",phone:"",address:""}),[c,i]=n.useState(!1),[w,h]=n.useState(""),[j,o]=n.useState(""),y=Ce(),N=I=>{const{name:u,value:d}=I.target;l(r=>({...r,[u]:d})),h(""),o("")},v=async I=>{if(I.preventDefault(),!t.email||!t.password||!t.name||!t.business_number||!t.phone||!t.address){h("ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}if(t.password!==t.confirmPassword){h("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");return}i(!0),h(""),o("");try{const{data:u,error:d}=await O.from("brand_admins").select("name, business_number, email").or(`name.eq.${t.name.trim()},business_number.eq.${t.business_number.trim()},email.eq.${t.email.trim()}`);if(d)throw d;if(u&&u.length>0){const D=u[0];if(D.name===t.name.trim())throw new Error("ì´ë¯¸ ë“±ë¡ëœ ë¸Œëœë“œëª…ì…ë‹ˆë‹¤.");if(D.business_number===t.business_number.trim())throw new Error("ì´ë¯¸ ë“±ë¡ëœ ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ì…ë‹ˆë‹¤.");if(D.email===t.email.trim())throw new Error("ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.")}const{data:r,error:g}=await O.auth.signUp({email:t.email.trim(),password:t.password,options:{data:{name:t.name.trim(),role:"merchant"}}});if(g)throw new Error(g.message);const{error:_}=await O.from("brand_admins").insert([{name:t.name.trim(),business_number:t.business_number.trim(),email:t.email.trim(),phone:t.phone.trim(),address:t.address.trim()}]);if(_)throw _;o("ì…ì ì‚¬ ê³„ì •ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤."),setTimeout(()=>y("/admin/login"),2e3)}catch(u){console.error("ê´€ë¦¬ì ìƒì„± ì˜¤ë¥˜:",u);let d="ê´€ë¦¬ì ê³„ì • ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.";u.message.includes("User already registered")?d="ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.":u.message.includes("ì´ë¯¸ ë“±ë¡ëœ")?d=u.message:u.message.includes("duplicate key value violates unique constraint")?u.message.includes("brand_admins_name_key")?d="ì´ë¯¸ ë“±ë¡ëœ ë¸Œëœë“œëª…ì…ë‹ˆë‹¤.":u.message.includes("brand_admins_business_number_key")?d="ì´ë¯¸ ë“±ë¡ëœ ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ì…ë‹ˆë‹¤.":u.message.includes("brand_admins_email_key")?d="ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.":d="ì¤‘ë³µëœ ì •ë³´ê°€ ìˆìŠµë‹ˆë‹¤. ë¸Œëœë“œëª…, ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸, ì´ë©”ì¼ì„ í™•ì¸í•´ì£¼ì„¸ìš”.":d=u.message||d,h(d)}finally{i(!1)}};return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #343a40 0%, #212529 100%)",padding:"2rem"},children:e.jsxs("div",{className:"card",style:{width:"100%",maxWidth:"450px",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",background:"#495057",color:"white"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:"600",color:"white"},children:"ë¸Œëœë“œ ê´€ë¦¬ì ë“±ë¡"}),e.jsx("p",{style:{color:"#ced4da"},children:"ìƒˆ ë¸Œëœë“œ ê³„ì •ì„ ìƒì„±í•©ë‹ˆë‹¤."})]}),w&&e.jsx("div",{style:{background:"#dc3545",color:"white",padding:"0.75rem",borderRadius:"6px",marginBottom:"1.5rem"},children:w}),j&&e.jsx("div",{style:{background:"#28a745",color:"white",padding:"0.75rem",borderRadius:"6px",marginBottom:"1.5rem"},children:j}),e.jsxs("form",{onSubmit:v,children:[e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx(ye,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#adb5bd"}}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:N,placeholder:"ë¸Œëœë“œ ëª…",disabled:c,style:{width:"100%",padding:"0.75rem 2.5rem",border:"1px solid #6c757d",borderRadius:"6px",background:"#343a40",color:"white"}})]})}),e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Qt,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#adb5bd"}}),e.jsx("input",{type:"text",name:"business_number",value:t.business_number,onChange:N,placeholder:"ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ (ì˜ˆ: 123-45-67890)",disabled:c,style:{width:"100%",padding:"0.75rem 2.5rem",border:"1px solid #6c757d",borderRadius:"6px",background:"#343a40",color:"white"}})]})}),e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Pe,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#adb5bd"}}),e.jsx("input",{type:"email",name:"email",value:t.email,onChange:N,placeholder:"ì´ë©”ì¼",disabled:c,style:{width:"100%",padding:"0.75rem 2.5rem",border:"1px solid #6c757d",borderRadius:"6px",background:"#343a40",color:"white"}})]})}),e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx(cs,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#adb5bd"}}),e.jsx("input",{type:"password",name:"password",value:t.password,onChange:N,placeholder:"ë¹„ë°€ë²ˆí˜¸ (6ì ì´ìƒ)",disabled:c,style:{width:"100%",padding:"0.75rem 2.5rem",border:"1px solid #6c757d",borderRadius:"6px",background:"#343a40",color:"white"}})]})}),e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx(cs,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#adb5bd"}}),e.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:N,placeholder:"ë¹„ë°€ë²ˆí˜¸ í™•ì¸",disabled:c,style:{width:"100%",padding:"0.75rem 2.5rem",border:"1px solid #6c757d",borderRadius:"6px",background:"#343a40",color:"white"}})]})}),e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Ke,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#adb5bd"}}),e.jsx("input",{type:"text",name:"phone",value:t.phone,onChange:N,placeholder:"ëŒ€í‘œ ì „í™” (ì˜ˆ: 02-1234-5678)",disabled:c,style:{width:"100%",padding:"0.75rem 2.5rem",border:"1px solid #6c757d",borderRadius:"6px",background:"#343a40",color:"white"}})]})}),e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx(st,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#adb5bd"}}),e.jsx("input",{type:"text",name:"address",value:t.address,onChange:N,placeholder:"ì‚¬ì—…ì§€ ì£¼ì†Œ",disabled:c,style:{width:"100%",padding:"0.75rem 2.5rem",border:"1px solid #6c757d",borderRadius:"6px",background:"#343a40",color:"white"}})]})}),e.jsx("button",{type:"submit",disabled:c,className:"btn btn-primary",style:{width:"100%",padding:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:c?e.jsxs(e.Fragment,{children:[e.jsx(Se,{size:16,style:{animation:"spin 1s linear infinite"}})," ë“±ë¡ ì¤‘..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ar,{size:16})," ê´€ë¦¬ì ë“±ë¡"]})}),e.jsx("div",{style:{textAlign:"center",fontSize:"0.875rem",color:"#adb5bd",marginTop:"1.5rem"},children:e.jsx(is,{to:"/login",style:{color:"#f8f9fa",textDecoration:"none"},children:"ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°"})})]})]})})},Vr=({children:t,userRole:l})=>{var D,k,M;const c=Vs(),i=Ce(),{user:w,signOut:h}=Le(),[j,o]=n.useState(!1),[y,N]=n.useState(""),[v,I]=n.useState(0);n.useEffect(()=>{var f;N(((f=w==null?void 0:w.user_metadata)==null?void 0:f.name)||"ë³¸ì‚¬ ê´€ë¦¬ì")},[(D=w==null?void 0:w.user_metadata)==null?void 0:D.name]),n.useEffect(()=>{const f=()=>{const a=[{id:1,isRead:!1},{id:2,isRead:!1},{id:3,isRead:!1},{id:5,isRead:!1}].filter(x=>!x.isRead).length;I(a)};f();const B=setInterval(f,3e4);return()=>clearInterval(B)},[]);const d=(()=>{const f=[{path:"/admin",icon:Gt,label:"ëŒ€ì‹œë³´ë“œ"},{path:"/admin/orders",icon:Je,label:"ì£¼ë¬¸ ê´€ë¦¬"},{path:"/admin/settlements",icon:We,label:"ì •ì‚° ê´€ë¦¬(ë¯¸êµ¬í˜„)"},{path:"/admin/statistics",icon:_e,label:"í†µê³„ ë¶„ì„"},{path:"/admin/settings",icon:ns,label:"ì‹œìŠ¤í…œ ì„¤ì •(ì¹´í…Œê³ ë¦¬ ì„¤ì • ì™¸ ë¯¸êµ¬í˜„)"}];return l==="admin"||l==="hq"?[...f.slice(0,1),{path:"/admin/tenants",icon:ye,label:"ì…ì ì‚¬ ê´€ë¦¬"},{path:"/admin/product-management",icon:ue,label:"ìƒí’ˆ ê´€ë¦¬"},{path:"/admin/customer-service",icon:He,label:"ê³ ê° ì„œë¹„ìŠ¤"},...f.slice(1)]:[...f.slice(0,1),{path:"/admin/products",icon:ue,label:"ìƒí’ˆ ê´€ë¦¬"},{path:"/admin/customers",icon:ye,label:"ê³ ê° ê´€ë¦¬"},{path:"/admin/customer-service",icon:He,label:"ê³ ê° ì„œë¹„ìŠ¤"},...f.slice(1)]})(),r=()=>l==="admin"||l==="hq"?"ë³¸ì‚¬ ê´€ë¦¬ ì‹œìŠ¤í…œ":"ê°€ë§¹ì  ê´€ë¦¬ ì‹œìŠ¤í…œ",g=async()=>{(await h()).success&&i("/admin/login")},_=()=>{var f,B;return((f=w==null?void 0:w.user_metadata)==null?void 0:f.role)==="admin"||((B=w==null?void 0:w.user_metadata)==null?void 0:B.role)==="hq"};return e.jsxs("div",{className:"layout",children:[e.jsxs("div",{className:"sidebar",children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h1",{className:"sidebar-title",children:"The Hyundai"}),e.jsx("p",{style:{fontSize:"0.875rem",opacity:.8,marginTop:"0.5rem"},children:r()})]}),e.jsxs("nav",{className:"sidebar-nav",children:[d.map(f=>{const B=f.icon,W=c.pathname===f.path;return e.jsxs(is,{to:f.path,className:`nav-item ${W?"active":""}`,children:[e.jsx(B,{className:"nav-icon"}),f.label]},f.path)}),e.jsxs(is,{to:"/admin/profile",className:`nav-item ${c.pathname==="/admin/profile"?"active":""}`,children:[e.jsx(Re,{className:"nav-icon"}),"í”„ë¡œí•„"]})]})]}),e.jsxs("div",{className:"main-content",children:[e.jsxs("header",{className:"header",children:[e.jsx("div",{className:"header-title",children:((k=d.find(f=>f.path===c.pathname))==null?void 0:k.label)||(c.pathname==="/profile"?"í”„ë¡œí•„":c.pathname==="/product-approval"?"ìƒí’ˆ ìŠ¹ì¸":c.pathname==="/product-management"?"ìƒí’ˆ ê´€ë¦¬":"ëŒ€ì‹œë³´ë“œ")}),e.jsxs("div",{className:"header-actions",children:[e.jsx(is,{to:"/admin/notice",style:{textDecoration:"none"},children:e.jsxs("button",{className:"btn",style:{background:"transparent",border:"none",position:"relative",cursor:"pointer"},children:[e.jsx(Ve,{size:20}),v>0&&e.jsx("span",{style:{position:"absolute",top:"-5px",right:"-5px",background:"#ef4444",color:"white",borderRadius:"50%",width:"18px",height:"18px",fontSize:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600"},children:v>9?"9+":v})]})}),e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("button",{className:"user-info",onClick:()=>o(!j),style:{background:"#f8f9fa",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",borderRadius:"8px",transition:"background-color 0.2s ease"},onMouseEnter:f=>f.target.style.backgroundColor="#e9ecef",onMouseLeave:f=>f.target.style.backgroundColor="#f8f9fa",children:[e.jsx(Re,{size:20}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"600"},children:y}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#666"},children:_()?"ë³¸ì‚¬":"ì…ì ì‚¬"})]}),e.jsx(Xs,{size:16,style:{transform:j?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"}})]}),j&&e.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.5rem",background:"white",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",minWidth:"200px",zIndex:1e3},children:[e.jsxs("div",{style:{padding:"0.75rem 1rem",borderBottom:"1px solid #eee"},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:((M=w==null?void 0:w.user_metadata)==null?void 0:M.name)||"ì‚¬ìš©ì"}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#666"},children:w==null?void 0:w.email})]}),e.jsxs("div",{style:{padding:"0.5rem 0"},children:[e.jsxs(is,{to:"/admin/profile",onClick:()=>o(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",color:"#333",textDecoration:"none",transition:"background-color 0.2s ease"},onMouseEnter:f=>f.target.style.backgroundColor="#f8f9fa",onMouseLeave:f=>f.target.style.backgroundColor="transparent",children:[e.jsx(Re,{size:16}),"í”„ë¡œí•„ ê´€ë¦¬"]}),e.jsxs("button",{onClick:()=>{o(!1),g()},style:{width:"100%",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"none",border:"none",color:"#dc3545",cursor:"pointer",transition:"background-color 0.2s ease"},onMouseEnter:f=>f.target.style.backgroundColor="#f8f9fa",onMouseLeave:f=>f.target.style.backgroundColor="transparent",children:[e.jsx(sr,{size:16}),"ë¡œê·¸ì•„ì›ƒ"]})]})]})]})]})]}),e.jsx("main",{className:"content",children:t})]})]})},fe=({isOpen:t,onClose:l,title:c,children:i,size:w="medium"})=>{if(!t)return null;const h={small:{width:"400px"},medium:{width:"600px"},large:{width:"800px"},xl:{width:"1200px"}};return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:l,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",...h[w],maxHeight:"90vh",overflow:"auto",position:"relative"},onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1.5rem",borderBottom:"1px solid #eee"},children:[e.jsx("h2",{style:{margin:0,fontSize:"1.25rem",fontWeight:"600"},children:c}),e.jsx("button",{onClick:l,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",borderRadius:"4px"},children:e.jsx(ze,{size:20})})]}),e.jsx("div",{style:{padding:"1.5rem"},children:i})]})})},Ws=()=>{const{user:t}=Le(),[l,c]=n.useState(""),[i,w]=n.useState("all"),[h,j]=n.useState(!1),[o,y]=n.useState(null),[N,v]=n.useState([]),[I,u]=n.useState(!0),d=a=>{const x=a.items?a.items.map(z=>z.name):["ìƒí’ˆ ì •ë³´ ì—†ìŒ"];return{id:`#${a.id.slice(0,8)}`,originalId:a.id,customer:a.recipient_name||"ê³ ê° ì •ë³´ ì—†ìŒ",customerEmail:"ì´ë©”ì¼ ì •ë³´ ì—†ìŒ",products:x,amount:a.total_amount,status:a.status,date:new Date(a.order_date).toISOString().split("T")[0],paymentMethod:a.payment_method,address:a.shipping_address,phone:a.recipient_phone,paymentKey:a.payment_key,trackingNumber:a.tracking_number,estimatedDelivery:a.estimated_delivery?new Date(a.estimated_delivery).toISOString().split("T")[0]:null,items:a.items||[],cancelReason:a.cancel_reason||null}},r=async()=>{var a,x;try{u(!0),console.log("ğŸ“Š ì£¼ë¬¸ ë°ì´í„° ì¡°íšŒ ì‹œì‘");let z=be.from("orders").select("*").order("created_at",{ascending:!1});if(((a=t==null?void 0:t.user_metadata)==null?void 0:a.role)==="merchant"){console.log("ğŸª ì…ì ì‚¬ ê´€ë¦¬ì ëª¨ë“œ");const{data:S,error:E}=await z;if(E){console.error("âŒ ì£¼ë¬¸ ë°ì´í„° ì¡°íšŒ ì˜¤ë¥˜:",E);return}console.log("ğŸ“¦ ì¡°íšŒëœ ì „ì²´ ì£¼ë¬¸ ìˆ˜:",(S==null?void 0:S.length)||0);let T=(x=t==null?void 0:t.user_metadata)==null?void 0:x.brand;if(!T){const{data:H,error:ee}=await be.from("brand_admins").select("name").eq("email",t==null?void 0:t.email).single();ee&&console.error("âŒ brand_admins ì¡°íšŒ ì˜¤ë¥˜:",ee),T=(H==null?void 0:H.name)||"Unknown"}console.log("ğŸ·ï¸ ì…ì ì‚¬ ë¸Œëœë“œ:",T);const U=S.filter(H=>{if(!H.items||!Array.isArray(H.items))return console.log("âŒ ì£¼ë¬¸ì— items ë°ì´í„° ì—†ìŒ:",H.id),!1;console.log("ğŸ” ì£¼ë¬¸ ê²€ì‚¬:",H.id),console.log("ğŸ“¦ ì£¼ë¬¸ ìƒí’ˆë“¤:",H.items.map(re=>({name:re.name,brand:re.brand,brandType:typeof re.brand}))),console.log("ğŸ¯ ì°¾ëŠ” ë¸Œëœë“œ:",T,typeof T);const ee=H.items.some(re=>{const $=re.brand===T&&T!=="Unknown";return console.log(`   ${re.name}: "${re.brand}" === "${T}" (ë¸Œëœë“œê°€ Unknownì´ ì•„ë‹˜: ${T!=="Unknown"}) ? ${$}`),$});return console.log(`${ee?"âœ…":"âŒ"} ì£¼ë¬¸ ${H.id} ë§¤ì¹­ ê²°ê³¼: ${ee}`),ee});console.log("ğŸ” í•„í„°ë§ëœ ì£¼ë¬¸ ìˆ˜:",U.length);const p=[...new Set(U.map(H=>H.user_id))];console.log("ğŸ‘¥ ì‚¬ìš©ì ID ëª©ë¡:",p);const{data:V,error:C}=await be.from("users").select("id, email, name").in("id",p);C&&console.error("âŒ ì‚¬ìš©ì ë°ì´í„° ì¡°íšŒ ì˜¤ë¥˜:",C),console.log("ğŸ‘¤ ì¡°íšŒëœ ì‚¬ìš©ì ìˆ˜:",(V==null?void 0:V.length)||0);const A={};V&&V.forEach(H=>{A[H.id]=H});const J=U.map(H=>{var ee;return{...d(H),customerEmail:((ee=A[H.user_id])==null?void 0:ee.email)||"ì´ë©”ì¼ ì •ë³´ ì—†ìŒ"}});console.log("âœ… ìµœì¢… ì£¼ë¬¸ ëª©ë¡:",J.length,"ê±´"),v(J)}else{const{data:S,error:E}=await z;if(E){console.error("ì£¼ë¬¸ ë°ì´í„° ì¡°íšŒ ì˜¤ë¥˜:",E);return}const T=[...new Set(S.map(C=>C.user_id))],{data:U}=await be.from("users").select("id, email, name").in("id",T),p={};U&&U.forEach(C=>{p[C.id]=C});const V=S.map(C=>{var A;return{...d(C),customerEmail:((A=p[C.user_id])==null?void 0:A.email)||"ì´ë©”ì¼ ì •ë³´ ì—†ìŒ"}});v(V)}}catch(z){console.error("ì£¼ë¬¸ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:",z)}finally{u(!1)}};n.useEffect(()=>{t&&r()},[t]);const g=a=>{y(a),j(!0)},_=async(a,x)=>{try{const z=N.find(E=>E.id===a);if(!z){alert("ì£¼ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}const{error:S}=await be.from("orders").update({status:x,updated_at:new Date().toISOString()}).eq("id",z.originalId);if(S){console.error("ì£¼ë¬¸ ìƒíƒœ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:",S),alert("ì£¼ë¬¸ ìƒíƒœ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");return}v(N.map(E=>E.id===a?{...E,status:x}:E)),alert(`ì£¼ë¬¸ ìƒíƒœê°€ '${x}'ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`)}catch(z){console.error("ì£¼ë¬¸ ìƒíƒœ ë³€ê²½ ì‹¤íŒ¨:",z),alert("ì£¼ë¬¸ ìƒíƒœ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},D=async a=>{const x=N.filter(z=>a==="ê²°ì œì™„ë£Œ"?z.status==="ì£¼ë¬¸ì ‘ìˆ˜":a==="ë°°ì†¡ì¤‘"?z.status==="ê²°ì œì™„ë£Œ":!1);if(x.length===0){alert(`${a}ë¡œ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ì£¼ë¬¸ì´ ì—†ìŠµë‹ˆë‹¤.`);return}if(window.confirm(`${x.length}ê°œ ì£¼ë¬¸ì„ '${a}' ìƒíƒœë¡œ ë³€ê²½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`))try{const z=x.map(E=>E.originalId),{error:S}=await be.from("orders").update({status:a,updated_at:new Date().toISOString()}).in("id",z);if(S){console.error("ë²Œí¬ ì£¼ë¬¸ ìƒíƒœ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:",S),alert("ì£¼ë¬¸ ìƒíƒœ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");return}v(N.map(E=>x.some(T=>T.id===E.id)?{...E,status:a}:E)),alert(`${x.length}ê°œ ì£¼ë¬¸ì´ '${a}' ìƒíƒœë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`)}catch(z){console.error("ë²Œí¬ ì£¼ë¬¸ ìƒíƒœ ë³€ê²½ ì‹¤íŒ¨:",z),alert("ì£¼ë¬¸ ìƒíƒœ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},k=()=>{const a=[["ì£¼ë¬¸ë²ˆí˜¸","ê³ ê°ëª…","ì´ë©”ì¼","ìƒí’ˆ","ê¸ˆì•¡","ìƒíƒœ","ì£¼ë¬¸ì¼ì‹œ","ê²°ì œë°©ë²•"].join(","),...B.map(E=>[E.id,E.customer,E.customerEmail,E.products.join(";"),E.amount,E.status,E.date,E.paymentMethod].join(","))].join(`
`),x=new Blob([a],{type:"text/csv;charset=utf-8;"}),z=document.createElement("a"),S=URL.createObjectURL(x);z.setAttribute("href",S),z.setAttribute("download",`ì£¼ë¬¸ë‚´ì—­_${new Date().toISOString().split("T")[0]}.csv`),z.style.visibility="hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z)},M=[{value:"all",label:"ì „ì²´ ìƒíƒœ"},{value:"ì£¼ë¬¸ì ‘ìˆ˜",label:"ì£¼ë¬¸ì ‘ìˆ˜"},{value:"ê²°ì œì™„ë£Œ",label:"ê²°ì œì™„ë£Œ"},{value:"ë°°ì†¡ì¤‘",label:"ë°°ì†¡ì¤‘"},{value:"ë°°ì†¡ì™„ë£Œ",label:"ë°°ì†¡ì™„ë£Œ"},{value:"ì·¨ì†Œìš”ì²­",label:"ì·¨ì†Œìš”ì²­"}],f=a=>({ì£¼ë¬¸ì ‘ìˆ˜:{class:"badge-info",icon:Te},ê²°ì œì™„ë£Œ:{class:"badge-success",icon:je},ìƒí’ˆì¤€ë¹„:{class:"badge-info",icon:ue},ë°°ì†¡ì¤‘:{class:"badge-warning",icon:os},ë°°ì†¡ì™„ë£Œ:{class:"badge-success",icon:ue},ì£¼ë¬¸ì·¨ì†Œ:{class:"badge-secondary",icon:ze},ì·¨ì†Œìš”ì²­:{class:"badge-danger",icon:Be},ë°˜í’ˆì‹ ì²­:{class:"badge-warning",icon:Be},ë°˜í’ˆì™„ë£Œ:{class:"badge-secondary",icon:je}})[a]||{class:"badge-info",icon:Te},B=N.filter(a=>{const x=a.id.toLowerCase().includes(l.toLowerCase())||a.customer.toLowerCase().includes(l.toLowerCase()),z=i==="all"||a.status===i;return x&&z}),W=()=>M.slice(1).map(a=>({...a,count:N.filter(x=>x.status===a.value).length}));return I?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",fontSize:"18px",color:"#666"},children:e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:"10px",textAlign:"center"},children:"ğŸ“¦"}),"ì£¼ë¬¸ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."]})}):e.jsxs("div",{children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:`stat-card ${i==="all"?"stat-card-selected":""}`,onClick:()=>w("all"),style:{cursor:"pointer",transform:i==="all"?"scale(1.02)":"scale(1)",boxShadow:i==="all"?"0 4px 12px rgba(0,0,0,0.15)":"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.2s ease"},children:[e.jsx("div",{className:"stat-icon",style:{backgroundColor:"#6c757d"},children:e.jsx(Fe,{size:20})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:N.length}),e.jsx("p",{children:"ì „ì²´"})]}),i==="all"&&e.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#007bff",borderRadius:"50%"}})]}),W().map(a=>{const z=f(a.value).icon,S=i===a.value;return e.jsxs("div",{className:`stat-card ${S?"stat-card-selected":""}`,onClick:()=>w(a.value),style:{cursor:"pointer",transform:S?"scale(1.02)":"scale(1)",boxShadow:S?"0 4px 12px rgba(0,0,0,0.15)":"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.2s ease"},children:[e.jsx("div",{className:"stat-icon",style:{backgroundColor:a.value==="ê²°ì œì™„ë£Œ"||a.value==="ë°°ì†¡ì™„ë£Œ"?"#28a745":a.value==="ë°°ì†¡ì¤‘"||a.value==="ë°˜í’ˆì‹ ì²­"?"#ffc107":a.value==="ì·¨ì†Œìš”ì²­"?"#dc3545":a.value==="ì£¼ë¬¸ì·¨ì†Œ"||a.value==="ë°˜í’ˆì™„ë£Œ"?"#6c757d":"#007bff"},children:e.jsx(z,{size:20})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:a.count}),e.jsx("p",{children:a.label})]}),S&&e.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#007bff",borderRadius:"50%"}})]},a.value)})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:e.jsx("h2",{className:"card-title",children:"ì£¼ë¬¸ ê´€ë¦¬"})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{position:"relative",flex:"1",minWidth:"200px"},children:[e.jsx(Ue,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#666"}}),e.jsx("input",{type:"text",placeholder:"ì£¼ë¬¸ë²ˆí˜¸ ë˜ëŠ” ê³ ê°ëª…ìœ¼ë¡œ ê²€ìƒ‰...",value:l,onChange:a=>c(a.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"0.875rem"}})]}),e.jsx("select",{value:i,onChange:a=>w(a.target.value),style:{padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"0.875rem",minWidth:"140px"},children:M.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))}),e.jsxs("button",{className:"btn",style:{background:"#6c757d",color:"white"},children:[e.jsx(Fe,{size:16}),"í•„í„°"]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title",children:["ì£¼ë¬¸ ëª©ë¡ (",B.length,"ê°œ)"]})}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ì£¼ë¬¸ë²ˆí˜¸"}),e.jsx("th",{children:"ê³ ê° ì •ë³´"}),e.jsx("th",{children:"ìƒí’ˆ"}),e.jsx("th",{children:"ê²°ì œê¸ˆì•¡"}),e.jsx("th",{children:"ê²°ì œë°©ë²•"}),e.jsx("th",{children:"ì£¼ë¬¸ì¼ì‹œ"}),e.jsx("th",{children:"ìƒíƒœ"}),e.jsx("th",{children:"ì‘ì—…"})]})}),e.jsx("tbody",{children:B.map(a=>{const x=f(a.status),z=x.icon;return e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:"600",color:"#007bff"},children:a.id}),e.jsx("td",{children:e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:a.customer}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#666"},children:a.customerEmail})]})}),e.jsx("td",{children:e.jsxs("div",{children:[a.products.map((S,E)=>e.jsx("div",{style:{fontSize:"0.875rem",marginBottom:"0.25rem"},children:S},E)),e.jsxs("small",{style:{color:"#666"},children:[a.products.length,"ê°œ ìƒí’ˆ"]})]})}),e.jsxs("td",{style:{fontWeight:"600"},children:["â‚©",a.amount.toLocaleString()]}),e.jsx("td",{children:a.paymentMethod}),e.jsx("td",{children:a.date}),e.jsx("td",{children:e.jsxs("span",{className:`badge ${x.class}`,children:[e.jsx(z,{size:12,style:{marginRight:"4px"}}),a.status]})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn",style:{background:"transparent",border:"1px solid #ddd",padding:"0.25rem 0.5rem"},title:"ìƒì„¸ë³´ê¸°",onClick:()=>g(a),children:e.jsx(we,{size:14})}),a.status==="ì£¼ë¬¸ì ‘ìˆ˜"&&e.jsx("button",{className:"btn btn-success",style:{padding:"0.25rem 0.5rem"},title:"ê²°ì œí™•ì¸",onClick:()=>_(a.id,"ê²°ì œì™„ë£Œ"),children:e.jsx(je,{size:14})}),a.status==="ê²°ì œì™„ë£Œ"&&e.jsx("button",{className:"btn btn-warning",style:{padding:"0.25rem 0.5rem"},title:"ë°°ì†¡ì²˜ë¦¬",onClick:()=>_(a.id,"ë°°ì†¡ì¤‘"),children:e.jsx(os,{size:14})})]})})]},a.id)})})]})}),B.length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[e.jsx(ue,{size:48,style:{marginBottom:"1rem",opacity:.5}}),e.jsx("p",{children:"ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ì£¼ë¬¸ì´ ì—†ìŠµë‹ˆë‹¤."})]})]}),e.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ë¹ ë¥¸ ì‘ì—…"})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("button",{className:"btn btn-success",onClick:()=>D("ê²°ì œì™„ë£Œ"),children:[e.jsx(je,{size:16}),"ì¼ê´„ ê²°ì œí™•ì¸"]}),e.jsxs("button",{className:"btn btn-warning",onClick:()=>D("ë°°ì†¡ì¤‘"),children:[e.jsx(os,{size:16}),"ì¼ê´„ ë°°ì†¡ì²˜ë¦¬"]}),e.jsxs("button",{className:"btn btn-primary",onClick:k,children:[e.jsx(we,{size:16}),"ì£¼ë¬¸ ë‚´ì—­ ë‚´ë³´ë‚´ê¸°"]})]})]}),e.jsx(fe,{isOpen:h,onClose:()=>j(!1),title:"ì£¼ë¬¸ ìƒì„¸ ì •ë³´",size:"large",children:o&&e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{className:"card",style:{margin:0},children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{style:{margin:0},children:"ì£¼ë¬¸ ì •ë³´"})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ì£¼ë¬¸ë²ˆí˜¸"}),e.jsx("p",{style:{margin:0,color:"#007bff",fontWeight:"600",fontSize:"1.125rem"},children:o.id})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ì£¼ë¬¸ìƒíƒœ"}),e.jsx("span",{className:`badge ${f(o.status).class}`,children:o.status})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ì£¼ë¬¸ì¼ì‹œ"}),e.jsx("p",{style:{margin:0},children:o.date})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ê²°ì œë°©ë²•"}),e.jsx("p",{style:{margin:0},children:o.paymentMethod})]}),o.status==="ì·¨ì†Œìš”ì²­"&&o.cancelReason&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#dc3545"},children:"ì·¨ì†Œ ì‚¬ìœ "}),e.jsx("p",{style:{margin:0,padding:"0.75rem",backgroundColor:"#fff5f5",border:"1px solid #fed7d7",borderRadius:"4px",color:"#c53030"},children:o.cancelReason})]})]})]}),e.jsxs("div",{className:"card",style:{margin:0},children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{style:{margin:0},children:"ê³ ê° ì •ë³´"})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ê³ ê°ëª…"}),e.jsx("p",{style:{margin:0,fontWeight:"600"},children:o.customer})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ì´ë©”ì¼"}),e.jsx("p",{style:{margin:0},children:o.customerEmail})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ì—°ë½ì²˜"}),e.jsx("p",{style:{margin:0},children:o.phone})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ë°°ì†¡ì£¼ì†Œ"}),e.jsx("p",{style:{margin:0},children:o.address})]})]})]}),e.jsxs("div",{className:"card",style:{margin:0},children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{style:{margin:0},children:"ì£¼ë¬¸ ìƒí’ˆ"})}),e.jsxs("div",{children:[o.products.map((a,x)=>e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem 0",borderBottom:x<o.products.length-1?"1px solid #eee":"none"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",background:"#f8f9fa",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ue,{size:20,color:"#666"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600"},children:a}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#666"},children:"ìˆ˜ëŸ‰: 1ê°œ"})]})]})},x)),e.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"2px solid #eee",textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"#007bff"},children:["ì´ ê²°ì œê¸ˆì•¡: â‚©",o.amount.toLocaleString()]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginTop:"0.5rem",fontStyle:"italic"},children:"â€» ì´ ê²°ì œê¸ˆì•¡ì—ëŠ” ìƒí’ˆê°€ê²©ê³¼ ë°°ì†¡ë¹„ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤."})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[o.status==="ì£¼ë¬¸ì ‘ìˆ˜"&&e.jsxs("button",{className:"btn btn-success",onClick:()=>{_(o.id,"ê²°ì œì™„ë£Œ"),j(!1)},children:[e.jsx(je,{size:16}),"ê²°ì œ í™•ì¸"]}),o.status==="ê²°ì œì™„ë£Œ"&&e.jsxs("button",{className:"btn btn-warning",onClick:()=>{_(o.id,"ë°°ì†¡ì¤‘"),j(!1)},children:[e.jsx(os,{size:16}),"ë°°ì†¡ ì²˜ë¦¬"]}),o.status==="ì·¨ì†Œìš”ì²­"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn btn-success",onClick:()=>{window.confirm("ì£¼ë¬¸ ì·¨ì†Œë¥¼ ìŠ¹ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(_(o.id,"ì£¼ë¬¸ì·¨ì†Œ"),j(!1))},children:[e.jsx(je,{size:16}),"ì·¨ì†Œ ìŠ¹ì¸"]}),e.jsxs("button",{className:"btn btn-danger",onClick:()=>{window.confirm("ì£¼ë¬¸ ì·¨ì†Œë¥¼ ê±°ë¶€í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì£¼ë¬¸ì´ ê²°ì œì™„ë£Œ ìƒíƒœë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.")&&(_(o.id,"ê²°ì œì™„ë£Œ"),j(!1))},children:[e.jsx(ze,{size:16}),"ì·¨ì†Œ ê±°ë¶€"]})]}),e.jsxs("button",{className:"btn",style:{background:"#6c757d",color:"white"},onClick:()=>j(!1),children:[e.jsx(ze,{size:16}),"ë‹«ê¸°"]})]})]})})]})},Hr=t=>({completed:"ì •ì‚°ì™„ë£Œ",processing:"ì •ì‚°ì²˜ë¦¬ì¤‘",scheduled:"ì •ì‚°ì˜ˆì •",pending:"ì •ì‚°ëŒ€ê¸°"})[t]||"ì•Œ ìˆ˜ ì—†ìŒ",qr=t=>{const l={total:0,totalCommission:0,pendingAmount:0,statusCounts:{completed:0,processing:0,scheduled:0,pending:0}};return t.forEach(c=>{l.total+=c.amount,l.totalCommission+=c.commission,c.status==="pending"&&(l.pendingAmount+=c.netAmount),l.statusCounts[c.status]=(l.statusCounts[c.status]||0)+1}),l},Yr=t=>{const l=["ì •ì‚°ID","ì£¼ë¬¸ID","ê³ ê°ëª…","ì£¼ë¬¸ê¸ˆì•¡","ìˆ˜ìˆ˜ë£Œ","ì •ì‚°ê¸ˆì•¡","ê²°ì œìˆ˜ë‹¨","ì£¼ë¬¸ì¼","ì •ì‚°ì¼","ìƒíƒœ"],c=t.map(i=>[i.id,i.orderId,i.customerName,i.amount,i.commission,i.netAmount,i.paymentMethod,i.orderDate,i.settlementDate,Hr(i.status)]);return[l,...c]},Ls=()=>{var re;const[t,l]=n.useState([]),[c,i]=n.useState([]),[w,h]=n.useState(!1),[j,o]=n.useState(null),[y,N]=n.useState({status:"all",dateRange:"all",search:""}),[v,I]=n.useState("settlements"),[u,d]=n.useState(!1),[r,g]=n.useState(!1),[_,D]=n.useState(null),[k,M]=n.useState(null),[f,B]=n.useState("add"),W=n.useMemo(()=>[{id:"ST001",orderId:"ORD001",customerName:"ê¹€ì² ìˆ˜",amount:25e3,commission:1250,netAmount:23750,paymentMethod:"ì‹ ìš©ì¹´ë“œ",orderDate:"2024-01-15",settlementDate:"2024-01-22",status:"completed",statusText:"ì •ì‚°ì™„ë£Œ",paymentProvider:"í† ìŠ¤í˜ì´ë¨¼ì¸ ",transactionId:"TXN123456789"},{id:"ST002",orderId:"ORD002",customerName:"ì´ì˜í¬",amount:89e3,commission:4450,netAmount:84550,paymentMethod:"ì¹´ì¹´ì˜¤í˜ì´",orderDate:"2024-01-16",settlementDate:"2024-01-23",status:"pending",statusText:"ì •ì‚°ëŒ€ê¸°",paymentProvider:"ì¹´ì¹´ì˜¤í˜ì´",transactionId:"TXN987654321"},{id:"ST003",orderId:"ORD003",customerName:"ë°•ë¯¼ìˆ˜",amount:45e3,commission:2250,netAmount:42750,paymentMethod:"ë„¤ì´ë²„í˜ì´",orderDate:"2024-01-17",settlementDate:"2024-01-24",status:"processing",statusText:"ì •ì‚°ì²˜ë¦¬ì¤‘",paymentProvider:"ë„¤ì´ë²„í˜ì´",transactionId:"TXN456789123"},{id:"ST004",orderId:"ORD004",customerName:"ì •ìˆ˜ì§„",amount:12e4,commission:6e3,netAmount:114e3,paymentMethod:"ì‹ ìš©ì¹´ë“œ",orderDate:"2024-01-18",settlementDate:"2024-01-25",status:"scheduled",statusText:"ì •ì‚°ì˜ˆì •",paymentProvider:"í† ìŠ¤í˜ì´ë¨¼ì¸ ",transactionId:"TXN789123456"},{id:"ST005",orderId:"ORD005",customerName:"ìµœë™í˜„",amount:15e3,commission:750,netAmount:14250,paymentMethod:"ì¹´ì¹´ì˜¤í˜ì´",orderDate:"2024-01-19",settlementDate:"2024-01-26",status:"completed",statusText:"ì •ì‚°ì™„ë£Œ",paymentProvider:"ì¹´ì¹´ì˜¤í˜ì´",transactionId:"TXN321654987"}],[]),a=n.useMemo(()=>[{id:"CT001",type:"headquarters",companyName:"í˜„ëŒ€ìë™ì°¨ ë³¸ì‚¬",contractType:"ì§ì˜",commissionRate:.02,startDate:"2024-01-01",endDate:"2024-12-31",status:"active",description:"í˜„ëŒ€ìë™ì°¨ ë³¸ì‚¬ì™€ì˜ ì§ì˜ ê³„ì•½"},{id:"CT002",type:"shipping",companyName:"CJëŒ€í•œí†µìš´",contractType:"ìœ„íƒ",commissionRate:.05,startDate:"2024-01-01",endDate:"2024-12-31",status:"active",description:"CJëŒ€í•œí†µìš´ ë°°ì†¡ ìœ„íƒ ê³„ì•½"},{id:"CT003",type:"shipping",companyName:"í•œì§„íƒë°°",contractType:"ìœ„íƒ",commissionRate:.06,startDate:"2024-01-01",endDate:"2024-12-31",status:"active",description:"í•œì§„íƒë°° ë°°ì†¡ ìœ„íƒ ê³„ì•½"}],[]),x=n.useMemo(()=>[{id:"CM001",category:"payment",provider:"í† ìŠ¤í˜ì´ë¨¼ì¸ ",method:"ì‹ ìš©ì¹´ë“œ",rate:.025,fixedFee:0,description:"í† ìŠ¤í˜ì´ë¨¼ì¸  ì‹ ìš©ì¹´ë“œ ìˆ˜ìˆ˜ë£Œ"},{id:"CM002",category:"payment",provider:"ì¹´ì¹´ì˜¤í˜ì´",method:"ì¹´ì¹´ì˜¤í˜ì´",rate:.023,fixedFee:0,description:"ì¹´ì¹´ì˜¤í˜ì´ ìˆ˜ìˆ˜ë£Œ"},{id:"CM003",category:"shipping",provider:"CJëŒ€í•œí†µìš´",method:"ì¼ë°˜ë°°ì†¡",rate:.05,fixedFee:2500,description:"CJëŒ€í•œí†µìš´ ì¼ë°˜ë°°ì†¡ ìˆ˜ìˆ˜ë£Œ"}],[]),z=n.useCallback(()=>{let $=[...t];y.status!=="all"&&($=$.filter(G=>G.status===y.status)),y.search&&($=$.filter(G=>G.orderId.toLowerCase().includes(y.search.toLowerCase())||G.customerName.toLowerCase().includes(y.search.toLowerCase())||G.paymentProvider.toLowerCase().includes(y.search.toLowerCase()))),i($)},[y,t]);n.useEffect(()=>{l(W),i(W)},[W]),n.useEffect(()=>{z()},[z]);const S=$=>({completed:"badge-success",pending:"badge-warning",processing:"badge-info",scheduled:"badge-secondary"})[$]||"badge-secondary",E=$=>({completed:je,pending:Te,processing:Be,scheduled:Ns})[$]||Te,T=$=>{o($),h(!0)},U=()=>{const G=Yr(c).map(Y=>Y.join(",")).join(`
`),oe=new Blob([G],{type:"text/csv;charset=utf-8;"}),de=document.createElement("a"),ie=URL.createObjectURL(oe);de.setAttribute("href",ie),de.setAttribute("download",`ì •ì‚°ë‚´ì—­_${new Date().toISOString().split("T")[0]}.csv`),de.style.visibility="hidden",document.body.appendChild(de),de.click(),document.body.removeChild(de)},p=qr(c),V=()=>{B("add"),D(null),d(!0)},C=$=>{B("edit"),D($),d(!0)},A=$=>{window.confirm("ê³„ì•½ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&console.log("ê³„ì•½ ì‚­ì œ:",$)},J=()=>{B("add"),M(null),g(!0)},H=$=>{B("edit"),M($),g(!0)},ee=$=>{window.confirm("ìˆ˜ìˆ˜ë£Œ ì„¤ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&console.log("ìˆ˜ìˆ˜ë£Œ ì‚­ì œ:",$)};return e.jsxs("div",{className:"settlements-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsxs("h1",{className:"page-title",children:[e.jsx(We,{className:"title-icon"}),"ì •ì‚°ê´€ë¦¬(ë¯¸êµ¬í˜„)"]}),e.jsx("p",{className:"page-description",children:"ì •ì‚° ë‚´ì—­, ê³„ì•½ ê´€ë¦¬, ìˆ˜ìˆ˜ë£Œ ì„¤ì •ì„ í†µí•© ê´€ë¦¬í•©ë‹ˆë‹¤"})]}),e.jsx("div",{className:"header-actions",children:e.jsxs("button",{className:"btn btn-secondary",onClick:U,children:[e.jsx(Qe,{size:16}),"ë‚´ë³´ë‚´ê¸°"]})})]}),e.jsxs("div",{className:"tabs-navigation",children:[e.jsxs("button",{className:`tab-button ${v==="settlements"?"active":""}`,onClick:()=>I("settlements"),children:[e.jsx(We,{size:16}),"ì •ì‚°ë‚´ì—­"]}),e.jsxs("button",{className:`tab-button ${v==="contracts"?"active":""}`,onClick:()=>I("contracts"),children:[e.jsx(ye,{size:16}),"ê³„ì•½ê´€ë¦¬"]}),e.jsxs("button",{className:`tab-button ${v==="commissions"?"active":""}`,onClick:()=>I("commissions"),children:[e.jsx(mr,{size:16}),"ìˆ˜ìˆ˜ë£Œê´€ë¦¬"]})]}),v==="settlements"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"summary-cards",children:[e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"card-icon",children:e.jsx(We,{size:24})}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{className:"card-title",children:"ì´ ì •ì‚°ê¸ˆì•¡"}),e.jsxs("p",{className:"card-value",children:["â‚©",p.total.toLocaleString()]})]})]}),e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"card-icon",children:e.jsx(Ae,{size:24})}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{className:"card-title",children:"ì •ì‚°ì™„ë£Œ"}),e.jsxs("p",{className:"card-value",children:[((re=p.statusCounts)==null?void 0:re.completed)||0,"ê±´"]})]})]}),e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"card-icon",children:e.jsx(Te,{size:24})}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{className:"card-title",children:"ì •ì‚°ëŒ€ê¸°"}),e.jsxs("p",{className:"card-value",children:["â‚©",p.pendingAmount.toLocaleString()]})]})]}),e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"card-icon",children:e.jsx(Zs,{size:24})}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{className:"card-title",children:"ìˆ˜ìˆ˜ë£Œ"}),e.jsxs("p",{className:"card-value",children:["â‚©",p.totalCommission.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"filters-section",children:[e.jsxs("div",{className:"search-box",children:[e.jsx(Ue,{size:16}),e.jsx("input",{type:"text",placeholder:"ì£¼ë¬¸ID, ê³ ê°ëª…, ê²°ì œì‚¬ë¡œ ê²€ìƒ‰...",value:y.search,onChange:$=>N({...y,search:$.target.value})})]}),e.jsx("div",{className:"filter-controls",children:e.jsxs("select",{value:y.status,onChange:$=>N({...y,status:$.target.value}),className:"filter-select",children:[e.jsx("option",{value:"all",children:"ì „ì²´ ìƒíƒœ"}),e.jsx("option",{value:"completed",children:"ì •ì‚°ì™„ë£Œ"}),e.jsx("option",{value:"pending",children:"ì •ì‚°ëŒ€ê¸°"}),e.jsx("option",{value:"processing",children:"ì •ì‚°ì²˜ë¦¬ì¤‘"}),e.jsx("option",{value:"scheduled",children:"ì •ì‚°ì˜ˆì •"})]})})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"settlements-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ì •ì‚°ID"}),e.jsx("th",{children:"ì£¼ë¬¸ID"}),e.jsx("th",{children:"ê³ ê°ëª…"}),e.jsx("th",{children:"ì£¼ë¬¸ê¸ˆì•¡"}),e.jsx("th",{children:"ìˆ˜ìˆ˜ë£Œ"}),e.jsx("th",{children:"ì •ì‚°ê¸ˆì•¡"}),e.jsx("th",{children:"ê²°ì œìˆ˜ë‹¨"}),e.jsx("th",{children:"ì£¼ë¬¸ì¼"}),e.jsx("th",{children:"ì •ì‚°ì¼"}),e.jsx("th",{children:"ìƒíƒœ"}),e.jsx("th",{children:"ì•¡ì…˜"})]})}),e.jsx("tbody",{children:c.map($=>{const G=E($.status);return e.jsxs("tr",{children:[e.jsx("td",{children:$.id}),e.jsx("td",{children:$.orderId}),e.jsx("td",{children:$.customerName}),e.jsxs("td",{children:["â‚©",$.amount.toLocaleString()]}),e.jsxs("td",{children:["â‚©",$.commission.toLocaleString()]}),e.jsxs("td",{children:["â‚©",$.netAmount.toLocaleString()]}),e.jsx("td",{children:$.paymentMethod}),e.jsx("td",{children:$.orderDate}),e.jsx("td",{children:$.settlementDate}),e.jsx("td",{children:e.jsxs("span",{className:`badge ${S($.status)}`,children:[e.jsx(G,{size:12}),$.statusText]})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>T($),children:"ìƒì„¸ë³´ê¸°"})})]},$.id)})})]})}),w&&j&&e.jsx(fe,{isOpen:w,onClose:()=>h(!1),title:"ì •ì‚° ìƒì„¸ ì •ë³´",size:"xl",children:e.jsxs("div",{className:"settlement-detail",children:[e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"ê¸°ë³¸ ì •ë³´"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì •ì‚°ID:"}),e.jsx("span",{children:j.id})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì£¼ë¬¸ID:"}),e.jsx("span",{children:j.orderId})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ê³ ê°ëª…:"}),e.jsx("span",{children:j.customerName})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ê²°ì œì‚¬:"}),e.jsx("span",{children:j.paymentProvider})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"ê¸ˆì•¡ ì •ë³´"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì£¼ë¬¸ê¸ˆì•¡:"}),e.jsxs("span",{className:"amount",children:["â‚©",j.amount.toLocaleString()]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ìˆ˜ìˆ˜ë£Œ:"}),e.jsxs("span",{className:"commission",children:["â‚©",j.commission.toLocaleString()]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì •ì‚°ê¸ˆì•¡:"}),e.jsxs("span",{className:"net-amount",children:["â‚©",j.netAmount.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"ì¼ì • ì •ë³´"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì£¼ë¬¸ì¼:"}),e.jsx("span",{children:j.orderDate})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì •ì‚°ì˜ˆì •ì¼:"}),e.jsx("span",{children:j.settlementDate})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ê²°ì œìˆ˜ë‹¨:"}),e.jsx("span",{children:j.paymentMethod})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ê±°ë˜ID:"}),e.jsx("span",{className:"transaction-id",children:j.transactionId})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"ì •ì‚° ìƒíƒœ"}),e.jsxs("div",{className:"status-info",children:[e.jsx("span",{className:`badge ${S(j.status)}`,children:j.statusText}),e.jsxs("p",{className:"status-description",children:[j.status==="completed"&&"ì •ì‚°ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",j.status==="pending"&&"ì •ì‚° ëŒ€ê¸° ì¤‘ì…ë‹ˆë‹¤.",j.status==="processing"&&"ì •ì‚° ì²˜ë¦¬ ì¤‘ì…ë‹ˆë‹¤.",j.status==="scheduled"&&"ì •ì‚° ì˜ˆì •ì¼ê¹Œì§€ ëŒ€ê¸° ì¤‘ì…ë‹ˆë‹¤."]})]})]})]})})]}),v==="contracts"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"ê³„ì•½ ê´€ë¦¬"}),e.jsxs("button",{className:"btn btn-primary",onClick:V,children:[e.jsx(qe,{size:16}),"ê³„ì•½ ì¶”ê°€"]})]}),e.jsx("div",{className:"contracts-grid",children:a.map($=>e.jsxs("div",{className:"contract-card",children:[e.jsxs("div",{className:"contract-header",children:[e.jsxs("div",{className:"contract-type",children:[$.type==="headquarters"?e.jsx(ye,{size:20,color:"#007bff"}):e.jsx(os,{size:20,color:"#28a745"}),e.jsx("span",{className:"contract-type-text",children:$.type==="headquarters"?"ë³¸ì‚¬ê³„ì•½":"ë°°ì†¡ì‚¬ê³„ì•½"})]}),e.jsxs("div",{className:"contract-actions",children:[e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>C($),children:e.jsx(rs,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>A($.id),children:e.jsx(Ye,{size:14})})]})]}),e.jsxs("div",{className:"contract-content",children:[e.jsx("h3",{children:$.companyName}),e.jsx("p",{className:"contract-description",children:$.description}),e.jsxs("div",{className:"contract-details",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"ê³„ì•½ìœ í˜•:"}),e.jsx("span",{className:"value",children:$.contractType})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"ìˆ˜ìˆ˜ë£Œìœ¨:"}),e.jsxs("span",{className:"value",children:[($.commissionRate*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"ê³„ì•½ê¸°ê°„:"}),e.jsxs("span",{className:"value",children:[$.startDate," ~ ",$.endDate]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"ìƒíƒœ:"}),e.jsx("span",{className:`status-badge ${$.status}`,children:$.status==="active"?"í™œì„±":"ë¹„í™œì„±"})]})]})]})]},$.id))})]}),v==="commissions"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"ìˆ˜ìˆ˜ë£Œ ê´€ë¦¬"}),e.jsxs("button",{className:"btn btn-primary",onClick:J,children:[e.jsx(qe,{size:16}),"ìˆ˜ìˆ˜ë£Œ ì¶”ê°€"]})]}),e.jsx("div",{className:"commissions-table",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("th",{children:"ì œê³µì—…ì²´"}),e.jsx("th",{children:"ê²°ì œ/ë°°ì†¡ë°©ì‹"}),e.jsx("th",{children:"ìˆ˜ìˆ˜ë£Œìœ¨"}),e.jsx("th",{children:"ê³ ì •ìˆ˜ìˆ˜ë£Œ"}),e.jsx("th",{children:"ì„¤ëª…"}),e.jsx("th",{children:"ì•¡ì…˜"})]})}),e.jsx("tbody",{children:x.map($=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{className:`category-badge ${$.category}`,children:$.category==="payment"?"ê²°ì œ":"ë°°ì†¡"})}),e.jsx("td",{children:$.provider}),e.jsx("td",{children:$.method}),e.jsxs("td",{children:[($.rate*100).toFixed(2),"%"]}),e.jsx("td",{children:$.fixedFee>0?`â‚©${$.fixedFee.toLocaleString()}`:"-"}),e.jsx("td",{children:$.description}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>H($),children:e.jsx(rs,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>ee($.id),children:e.jsx(Ye,{size:14})})]})})]},$.id))})]})})]}),u&&e.jsx(fe,{isOpen:u,onClose:()=>d(!1),title:f==="add"?"ê³„ì•½ ì¶”ê°€":"ê³„ì•½ ìˆ˜ì •",size:"large",children:e.jsxs("div",{className:"contract-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ê³„ì•½ ìœ í˜•"}),e.jsxs("select",{defaultValue:(_==null?void 0:_.type)||"headquarters",children:[e.jsx("option",{value:"headquarters",children:"ë³¸ì‚¬ê³„ì•½"}),e.jsx("option",{value:"shipping",children:"ë°°ì†¡ì‚¬ê³„ì•½"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"íšŒì‚¬ëª…"}),e.jsx("input",{type:"text",placeholder:"íšŒì‚¬ëª…ì„ ì…ë ¥í•˜ì„¸ìš”",defaultValue:(_==null?void 0:_.companyName)||""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ê³„ì•½ ìœ í˜•"}),e.jsxs("select",{defaultValue:(_==null?void 0:_.contractType)||"ì§ì˜",children:[e.jsx("option",{value:"ì§ì˜",children:"ì§ì˜"}),e.jsx("option",{value:"ìœ„íƒ",children:"ìœ„íƒ"}),e.jsx("option",{value:"í”„ëœì°¨ì´ì¦ˆ",children:"í”„ëœì°¨ì´ì¦ˆ"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ìˆ˜ìˆ˜ë£Œìœ¨ (%)"}),e.jsx("input",{type:"number",step:"0.1",placeholder:"0.0",defaultValue:_?_.commissionRate*100:""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ê³„ì•½ ì‹œì‘ì¼"}),e.jsx("input",{type:"date",defaultValue:(_==null?void 0:_.startDate)||""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ê³„ì•½ ì¢…ë£Œì¼"}),e.jsx("input",{type:"date",defaultValue:(_==null?void 0:_.endDate)||""})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ì„¤ëª…"}),e.jsx("textarea",{placeholder:"ê³„ì•½ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”",defaultValue:(_==null?void 0:_.description)||"",rows:"3"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>d(!1),children:"ì·¨ì†Œ"}),e.jsx("button",{className:"btn btn-primary",children:f==="add"?"ì¶”ê°€":"ìˆ˜ì •"})]})]})}),r&&e.jsx(fe,{isOpen:r,onClose:()=>g(!1),title:f==="add"?"ìˆ˜ìˆ˜ë£Œ ì¶”ê°€":"ìˆ˜ìˆ˜ë£Œ ìˆ˜ì •",size:"large",children:e.jsxs("div",{className:"commission-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ì¹´í…Œê³ ë¦¬"}),e.jsxs("select",{defaultValue:(k==null?void 0:k.category)||"payment",children:[e.jsx("option",{value:"payment",children:"ê²°ì œ"}),e.jsx("option",{value:"shipping",children:"ë°°ì†¡"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ì œê³µì—…ì²´"}),e.jsx("input",{type:"text",placeholder:"ì œê³µì—…ì²´ëª…ì„ ì…ë ¥í•˜ì„¸ìš”",defaultValue:(k==null?void 0:k.provider)||""})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ê²°ì œ/ë°°ì†¡ë°©ì‹"}),e.jsx("input",{type:"text",placeholder:"ë°©ì‹ì„ ì…ë ¥í•˜ì„¸ìš”",defaultValue:(k==null?void 0:k.method)||""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ìˆ˜ìˆ˜ë£Œìœ¨ (%)"}),e.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",defaultValue:k?k.rate*100:""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ê³ ì •ìˆ˜ìˆ˜ë£Œ (ì›)"}),e.jsx("input",{type:"number",placeholder:"0",defaultValue:(k==null?void 0:k.fixedFee)||""})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ì„¤ëª…"}),e.jsx("textarea",{placeholder:"ìˆ˜ìˆ˜ë£Œì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”",defaultValue:(k==null?void 0:k.description)||"",rows:"3"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>g(!1),children:"ì·¨ì†Œ"}),e.jsx("button",{className:"btn btn-primary",children:f==="add"?"ì¶”ê°€":"ìˆ˜ì •"})]})]})})]})},Es=()=>{var V;const{isAdmin:t}=Le(),[l,c]=n.useState("notification"),[i,w]=n.useState({notifications:{newTenantApplication:!0,productApprovalRequest:!0,tenantContractExpiry:!0,salesReport:!0,customerComplaint:!0,systemMaintenance:!1,smsAlert:!1,emailAlert:!0}}),[h,j]=n.useState([]),[o,y]=n.useState(!1),[N,v]=n.useState(new Set),[I,u]=n.useState(!1),[d,r]=n.useState(!1),[g,_]=n.useState(null),[D,k]=n.useState({name:"",description:"",parent_id:null,level:1}),M=[{id:"notification",label:"ì•Œë¦¼ ì„¤ì •",icon:Ve},{id:"security",label:"ë³´ì•ˆ ì„¤ì •",icon:hs},...t()?[{id:"category",label:"ì¹´í…Œê³ ë¦¬ ê´€ë¦¬",icon:ue}]:[]],f=async()=>{y(!0);try{const{data:C,error:A}=await O.from("categories").select("*").order("level",{ascending:!0}).order("name",{ascending:!0});if(A)throw A;j(C||[])}catch(C){console.error("ì¹´í…Œê³ ë¦¬ ë¡œë“œ ì˜¤ë¥˜:",C),alert("ì¹´í…Œê³ ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{y(!1)}};n.useEffect(()=>{l==="category"&&!t()&&c("notification")},[l,t]),n.useEffect(()=>{l==="category"&&t()&&f()},[l,t]);const B=async()=>{if(!D.name.trim()){alert("ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}try{const{data:C,error:A}=await O.from("categories").insert([{name:D.name,description:D.description,parent_id:D.parent_id,level:D.level}]).select();if(A)throw A;j([...h,...C]),k({name:"",description:"",parent_id:null,level:1}),u(!1),alert("ì¹´í…Œê³ ë¦¬ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(C){console.error("ì¹´í…Œê³ ë¦¬ ì¶”ê°€ ì˜¤ë¥˜:",C),alert("ì¹´í…Œê³ ë¦¬ ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},W=async()=>{if(!g||!g.name.trim()){alert("ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}try{const{data:C,error:A}=await O.from("categories").update({name:g.name,description:g.description}).eq("id",g.id).select();if(A)throw A;j(h.map(J=>J.id===g.id?C[0]:J)),r(!1),_(null),alert("ì¹´í…Œê³ ë¦¬ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(C){console.error("ì¹´í…Œê³ ë¦¬ ìˆ˜ì • ì˜¤ë¥˜:",C),alert("ì¹´í…Œê³ ë¦¬ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},a=C=>{const A=h.filter(H=>H.parent_id===C);let J=[...A];return A.forEach(H=>{J=[...J,...a(H.id)]}),J},x=async C=>{try{const{data:A,error:J}=await O.from("products").select("id, name, category_id").in("category_id",C);if(J)throw J;return A||[]}catch(A){return console.error("ìƒí’ˆ í™•ì¸ ì˜¤ë¥˜:",A),[]}},z=async C=>{const A=h.find(G=>G.id===C),J=a(C),H=J.length>0,ee=[C,...J.map(G=>G.id)],re=await x(ee);let $=`ì •ë§ë¡œ "${A==null?void 0:A.name}" ì¹´í…Œê³ ë¦¬ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`;if(H&&($=`"${A==null?void 0:A.name}" ì¹´í…Œê³ ë¦¬ì™€ í•˜ìœ„ ì¹´í…Œê³ ë¦¬ ${J.length}ê°œê°€ ëª¨ë‘ ì‚­ì œë©ë‹ˆë‹¤.

ì‚­ì œë  ì¹´í…Œê³ ë¦¬:
`,$+=`- ${A==null?void 0:A.name}
`,J.forEach(G=>{const oe="  ".repeat(G.level-A.level);$+=`${oe}- ${G.name}
`})),re.length>0&&($+=`
âš ï¸ ì£¼ì˜: ì´ ì¹´í…Œê³ ë¦¬ë“¤ì„ ì‚¬ìš©í•˜ëŠ” ìƒí’ˆì´ ${re.length}ê°œ ìˆìŠµë‹ˆë‹¤.
`,$+=`ì‚­ì œëœ ì¹´í…Œê³ ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ìƒí’ˆë“¤ì€ "ê¸°íƒ€" ì¹´í…Œê³ ë¦¬ë¡œ ì´ë™ë©ë‹ˆë‹¤.
`,re.length<=10&&($+=`
ì˜í–¥ë°›ëŠ” ìƒí’ˆ:
`,re.forEach(G=>{var de;const oe=((de=h.find(ie=>ie.id===G.category_id))==null?void 0:de.name)||"ì•Œ ìˆ˜ ì—†ìŒ";$+=`- ${G.name} (${oe})
`}))),$+=`
ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`,!!window.confirm($))try{if(re.length>0){let ie=h.find(Y=>Y.name==="ê¸°íƒ€");if(!ie){const{data:Y,error:se}=await O.from("categories").insert([{name:"ê¸°íƒ€",description:"ë¶„ë¥˜ë˜ì§€ ì•Šì€ ìƒí’ˆë“¤",parent_id:null,level:1}]).select().single();if(se)throw se;ie=Y,j([...h,Y])}for(const Y of re){const{error:se}=await O.from("products").update({category_id:ie.id}).eq("id",Y.id);if(se)throw se}}const G=ee.sort((ie,Y)=>{const se=h.find(s=>s.id===ie),b=h.find(s=>s.id===Y);return((b==null?void 0:b.level)||0)-((se==null?void 0:se.level)||0)});for(const ie of G){const{error:Y}=await O.from("categories").delete().eq("id",ie);if(Y)throw console.error(`ì¹´í…Œê³ ë¦¬ ${ie} ì‚­ì œ ì˜¤ë¥˜:`,Y),Y}j(h.filter(ie=>!ee.includes(ie.id)));let de=`${ee.length}ê°œì˜ ì¹´í…Œê³ ë¦¬ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`;re.length>0&&(de+=`
${re.length}ê°œì˜ ìƒí’ˆì´ "ê¸°íƒ€" ì¹´í…Œê³ ë¦¬ë¡œ ì´ë™ë˜ì—ˆìŠµë‹ˆë‹¤.`),alert(de)}catch(G){console.error("ì¹´í…Œê³ ë¦¬ ì‚­ì œ ì˜¤ë¥˜:",G),alert(`ì¹´í…Œê³ ë¦¬ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.
ì˜¤ë¥˜: ${G.message||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"}`)}},S=async()=>{try{localStorage.setItem("shopSettings",JSON.stringify(i)),alert("ì„¤ì •ì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(C){console.error("ì„¤ì • ì €ì¥ ì˜¤ë¥˜:",C),alert("ì„¤ì • ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},E=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ì•Œë¦¼ ì„¤ì •"})}),e.jsx("div",{style:{display:"grid",gap:"1.5rem"},children:[{title:"ì‹ ê·œ ì…ì ì‚¬ ì‹ ì²­ ì•Œë¦¼",desc:"ìƒˆë¡œìš´ ì…ì ì‚¬ ì‹ ì²­ì´ ì ‘ìˆ˜ë  ë•Œ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤",icon:ye,key:"newTenantApplication",enabled:i.notifications.newTenantApplication},{title:"ìƒí’ˆ ìŠ¹ì¸ ìš”ì²­ ì•Œë¦¼",desc:"ì…ì ì‚¬ì—ì„œ ìƒí’ˆ ìŠ¹ì¸ì„ ìš”ì²­í•  ë•Œ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤",icon:je,key:"productApprovalRequest",enabled:i.notifications.productApprovalRequest},{title:"ê³„ì•½ ë§Œë£Œ ì•Œë¦¼",desc:"ì…ì ì‚¬ ê³„ì•½ ë§Œë£Œì¼ì´ ë‹¤ê°€ì˜¬ ë•Œ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤",icon:Ns,key:"tenantContractExpiry",enabled:i.notifications.tenantContractExpiry},{title:"ë§¤ì¶œ ë¦¬í¬íŠ¸ ì•Œë¦¼",desc:"ì¼ì¼/ì£¼ê°„/ì›”ê°„ ë§¤ì¶œ ë¦¬í¬íŠ¸ê°€ ìƒì„±ë  ë•Œ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤",icon:_e,key:"salesReport",enabled:i.notifications.salesReport},{title:"ê³ ê° ë¶ˆë§Œ ì ‘ìˆ˜ ì•Œë¦¼",desc:"ê³ ê° ë¶ˆë§Œì´ë‚˜ ì¤‘ìš”í•œ ë¬¸ì˜ê°€ ì ‘ìˆ˜ë  ë•Œ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤",icon:ts,key:"customerComplaint",enabled:i.notifications.customerComplaint},{title:"ì‹œìŠ¤í…œ ì ê²€ ì•Œë¦¼",desc:"ì‹œìŠ¤í…œ ì ê²€ì´ë‚˜ ì—…ë°ì´íŠ¸ ì‹œ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤",icon:ns,key:"systemMaintenance",enabled:i.notifications.systemMaintenance},{title:"SMS ì•Œë¦¼",desc:"ê¸´ê¸‰í•˜ê±°ë‚˜ ì¤‘ìš”í•œ ì•Œë¦¼ì„ SMSë¡œ ë°›ìŠµë‹ˆë‹¤",icon:wr,key:"smsAlert",enabled:i.notifications.smsAlert},{title:"ì´ë©”ì¼ ì•Œë¦¼",desc:"ëª¨ë“  ì•Œë¦¼ì„ ì´ë©”ì¼ë¡œë„ ë°›ìŠµë‹ˆë‹¤",icon:Pe,key:"emailAlert",enabled:i.notifications.emailAlert}].map((C,A)=>{const J=C.icon;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",background:C.enabled?"#007bff":"#6c757d",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(J,{size:20})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:C.title}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#666"},children:C.desc})]}),e.jsx("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:e.jsx("input",{type:"checkbox",checked:C.enabled,onChange:H=>{w(ee=>({...ee,notifications:{...ee.notifications,[C.key]:H.target.checked}}))},style:{transform:"scale(1.2)"}})})]},A)})})]}),T=(C=null,A=0)=>h.filter(H=>H.parent_id===C).map(H=>{const ee=h.some($=>$.parent_id===H.id),re=N.has(H.id);return e.jsxs("div",{style:{marginLeft:`${A*20}px`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",background:A%2===0?"#f8f9fa":"white",borderRadius:"4px",marginBottom:"0.25rem"},children:[ee?e.jsx("button",{onClick:()=>{const $=new Set(N);re?$.delete(H.id):$.add(H.id),v($)},style:{background:"none",border:"none",cursor:"pointer",padding:"2px"},children:re?e.jsx(Xs,{size:16}):e.jsx(It,{size:16})}):e.jsx("div",{style:{width:"20px"}}),ee?re?e.jsx(Ot,{size:16,color:"#007bff"}):e.jsx(Ut,{size:16,color:"#007bff"}):e.jsx(ue,{size:14,color:"#666"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:A===0?"600":"normal"},children:H.name}),H.description&&e.jsx("div",{style:{fontSize:"0.75rem",color:"#666"},children:H.description})]}),e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[e.jsx("button",{onClick:()=>{_({...H}),r(!0)},className:"btn btn-sm",style:{background:"transparent",border:"1px solid #ddd",padding:"0.25rem 0.5rem"},title:"ìˆ˜ì •",children:e.jsx(dr,{size:12})}),e.jsx("button",{onClick:()=>z(H.id),className:"btn btn-sm",style:{background:"transparent",border:"1px solid #dc3545",color:"#dc3545",padding:"0.25rem 0.5rem"},title:"ì‚­ì œ",children:e.jsx(Ye,{size:12})}),e.jsx("button",{onClick:()=>{k({name:"",description:"",parent_id:H.id,level:H.level+1}),u(!0)},className:"btn btn-sm btn-primary",style:{padding:"0.25rem 0.5rem"},title:"í•˜ìœ„ ì¹´í…Œê³ ë¦¬ ì¶”ê°€",children:e.jsx(qe,{size:12})})]})]}),ee&&re&&T(H.id,A+1)]},H.id)}),U=()=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{className:"card-title",children:"ì¹´í…Œê³ ë¦¬ ê´€ë¦¬"}),e.jsxs("button",{onClick:()=>{k({name:"",description:"",parent_id:null,level:1}),u(!0)},className:"btn btn-primary",children:[e.jsx(qe,{size:16}),"ìµœìƒìœ„ ì¹´í…Œê³ ë¦¬ ì¶”ê°€"]})]}),o?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:"ì¹´í…Œê³ ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."}):h.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:[e.jsx(ue,{size:48,style:{marginBottom:"1rem",opacity:.5}}),e.jsx("p",{children:"ë“±ë¡ëœ ì¹´í…Œê³ ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤."}),e.jsx("p",{children:"ìµœìƒìœ„ ì¹´í…Œê³ ë¦¬ë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”."})]}):e.jsx("div",{style:{padding:"1rem 0"},children:T()})]}),p=()=>{switch(l){case"notification":return e.jsx(E,{});case"security":return e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ë³´ì•ˆ ì„¤ì •"})}),e.jsx("p",{style:{color:"#666",textAlign:"center",padding:"2rem"},children:"ë³´ì•ˆ ì„¤ì • ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤."})]});case"category":return t()?e.jsx(U,{}):null;default:return e.jsx(E,{})}};return e.jsxs("div",{children:[e.jsx("div",{className:"card",children:e.jsx("div",{style:{display:"flex",gap:"0.5rem",borderBottom:"1px solid #eee",paddingBottom:"1rem",marginBottom:"1rem",flexWrap:"wrap"},children:M.map(C=>{const A=C.icon;return e.jsxs("button",{onClick:()=>c(C.id),className:`btn ${l===C.id?"btn-primary":""}`,style:l!==C.id?{background:"transparent",color:"#666",border:"1px solid #ddd"}:{},children:[e.jsx(A,{size:16}),C.label]},C.id)})})}),p(),l!=="category"&&e.jsx("div",{style:{position:"sticky",bottom:"2rem",textAlign:"center",marginTop:"2rem"},children:e.jsxs("button",{className:"btn btn-primary",style:{padding:"0.75rem 2rem"},onClick:S,children:[e.jsx(ms,{size:16}),"ì„¤ì • ì €ì¥"]})}),e.jsxs(fe,{isOpen:I,onClose:()=>u(!1),title:D.parent_id?"í•˜ìœ„ ì¹´í…Œê³ ë¦¬ ì¶”ê°€":"ìµœìƒìœ„ ì¹´í…Œê³ ë¦¬ ì¶”ê°€",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ì¹´í…Œê³ ë¦¬ ì´ë¦„ *"}),e.jsx("input",{type:"text",value:D.name,onChange:C=>k({...D,name:C.target.value}),placeholder:"ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ì„¤ëª…"}),e.jsx("textarea",{value:D.description,onChange:C=>k({...D,description:C.target.value}),placeholder:"ì¹´í…Œê³ ë¦¬ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”",rows:"3"})]}),D.parent_id&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ìƒìœ„ ì¹´í…Œê³ ë¦¬"}),e.jsx("p",{style:{margin:0,color:"#666",background:"#f8f9fa",padding:"0.5rem",borderRadius:"4px"},children:((V=h.find(C=>C.id===D.parent_id))==null?void 0:V.name)||"ì•Œ ìˆ˜ ì—†ìŒ"})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>u(!1),children:"ì·¨ì†Œ"}),e.jsx("button",{className:"btn btn-primary",onClick:B,children:"ì¶”ê°€"})]})]}),e.jsx(fe,{isOpen:d,onClose:()=>r(!1),title:"ì¹´í…Œê³ ë¦¬ ìˆ˜ì •",children:g&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ì¹´í…Œê³ ë¦¬ ì´ë¦„ *"}),e.jsx("input",{type:"text",value:g.name,onChange:C=>_({...g,name:C.target.value}),placeholder:"ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ì„¤ëª…"}),e.jsx("textarea",{value:g.description||"",onChange:C=>_({...g,description:C.target.value}),placeholder:"ì¹´í…Œê³ ë¦¬ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”",rows:"3"})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>r(!1),children:"ì·¨ì†Œ"}),e.jsx("button",{className:"btn btn-primary",onClick:W,children:"ìˆ˜ì •"})]})]})})]})},Gr=()=>{const{user:t,error:l,setError:c,isAdmin:i}=Le(),[w,h]=n.useState(""),[j,o]=n.useState(!1),y=n.useRef(null),N=async d=>{if(d){if(!d.type.startsWith("image/")){alert("ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");return}if(d.size>5*1024*1024){alert("íŒŒì¼ í¬ê¸°ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.");return}o(!0);try{const r=d.name.split(".").pop(),g=`${t.email}_logo_${Date.now()}.${r}`,{error:_}=await O.storage.from("brand-logos").upload(g,d);if(_){console.error("ë¡œê³  ì—…ë¡œë“œ ì˜¤ë¥˜:",_),alert("ë¡œê³  ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");return}const{data:D}=O.storage.from("brand-logos").getPublicUrl(g),k=D.publicUrl,{error:M}=await O.from("brand_admins").update({logo_url:k}).eq("email",t.email);if(M){console.error("ë¡œê³  URL ì €ì¥ ì˜¤ë¥˜:",M),alert("ë¡œê³  URL ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");return}h(k),alert("ë¡œê³ ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(r){console.error("ë¡œê³  ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜:",r),alert("ë¡œê³  ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{o(!1)}}},v=d=>{const r=d.target.files[0];r&&N(r)},I=()=>{var d;(d=y.current)==null||d.click()},u=()=>{var d;return e.jsx("div",{className:"card",children:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"2rem"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{width:"120px",height:"120px",background:w?`url(${w}) center/cover`:"linear-gradient(135deg, #495057 0%, #343a40 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",position:"relative",cursor:"pointer",overflow:"hidden",transition:"transform 0.2s ease"},onClick:I,onMouseEnter:r=>{r.currentTarget.style.transform="scale(1.05)"},onMouseLeave:r=>{r.currentTarget.style.transform="scale(1)"},children:[!w&&e.jsx(Re,{size:48,color:"white"}),e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.875rem",fontWeight:"600",opacity:0,transition:"opacity 0.2s ease",borderRadius:"50%"},onMouseEnter:r=>{r.currentTarget.style.opacity="1"},onMouseLeave:r=>{r.currentTarget.style.opacity="0"},children:j?e.jsx(Se,{size:20,style:{animation:"spin 1s linear infinite"}}):e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(Qs,{size:20,style:{marginBottom:"0.25rem"}}),e.jsx("div",{children:"ë¡œê³ ë³€ê²½"})]})})]}),e.jsx("input",{ref:y,type:"file",accept:"image/*",onChange:v,style:{display:"none"}}),e.jsx("h3",{style:{margin:"0 0 0.5rem",color:"#333"},children:((d=t==null?void 0:t.user_metadata)==null?void 0:d.name)||"ì‚¬ìš©ì"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx(Pe,{size:14,color:"#666"}),e.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:t==null?void 0:t.email})]}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsxs("span",{className:`badge ${i()?"badge-success":"badge-info"}`,style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"0.5rem 0.75rem"},children:[e.jsx(hs,{size:12}),i()?"ê´€ë¦¬ì":"ì¼ë°˜ ì‚¬ìš©ì"]})}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#999",textAlign:"left",background:"#f8f9fa",padding:"0.75rem",borderRadius:"6px"},children:[e.jsxs("div",{style:{marginBottom:"0.25rem"},children:[e.jsx("strong",{children:"ê°€ì…ì¼:"})," ",new Date(t==null?void 0:t.created_at).toLocaleDateString("ko-KR")]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ë§ˆì§€ë§‰ ë¡œê·¸ì¸:"})," ",new Date(t==null?void 0:t.last_sign_in_at).toLocaleDateString("ko-KR")]})]})]})})})};return e.jsxs("div",{children:[l&&e.jsx("div",{style:{background:"#fee",color:"#c33",padding:"0.75rem",borderRadius:"6px",marginBottom:"1.5rem",fontSize:"0.875rem",border:"1px solid #fcc"},children:l}),e.jsx(u,{})]})},Kr=()=>{const t=Ce(),[l,c]=n.useState([]),[i,w]=n.useState("all"),[h,j]=n.useState(!0);n.useEffect(()=>{setTimeout(()=>{const g=[{id:1,type:"new_tenant_application",title:"ì‹ ê·œ ì…ì ì‚¬ ì‹ ì²­",message:'ãˆœí…Œí¬ë…¸ë§ˆíŠ¸ì—ì„œ "ì „ìì œí’ˆ" ì¹´í…Œê³ ë¦¬ë¡œ ì…ì  ì‹ ì²­ì„ ì œì¶œí–ˆìŠµë‹ˆë‹¤.',timestamp:new Date(Date.now()-3e5),isRead:!1,priority:"high",relatedId:"APP-2024-001"},{id:2,type:"product_approval_request",title:"ìƒí’ˆ ìŠ¹ì¸ ìš”ì²­",message:'ì‚¼ì„±ì „ìì—ì„œ "ê°¤ëŸ­ì‹œ S24 Ultra" ìƒí’ˆ ìŠ¹ì¸ì„ ìš”ì²­í–ˆìŠµë‹ˆë‹¤.',timestamp:new Date(Date.now()-9e5),isRead:!1,priority:"high",relatedId:"PRD-2024-001"},{id:3,type:"tenant_contract_expiry",title:"ê³„ì•½ ë§Œë£Œ ì˜ˆì •",message:"LGì „ìì˜ ì…ì  ê³„ì•½ì´ 30ì¼ í›„ ë§Œë£Œ ì˜ˆì •ì…ë‹ˆë‹¤.",timestamp:new Date(Date.now()-18e5),isRead:!1,priority:"medium",relatedId:"TNT-2024-002"},{id:4,type:"sales_report",title:"ì¼ì¼ ë§¤ì¶œ ë¦¬í¬íŠ¸",message:"2024ë…„ 1ì›” 15ì¼ ë§¤ì¶œ ë¦¬í¬íŠ¸ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ë§¤ì¶œ: â‚©1.2ì–µ",timestamp:new Date(Date.now()-72e5),isRead:!0,priority:"low",relatedId:"RPT-2024-0115"},{id:5,type:"customer_complaint",title:"ê³ ê° ë¶ˆë§Œ ì ‘ìˆ˜",message:"ë‚˜ì´í‚¤ ë§¤ì¥ ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê³ ê° ë¶ˆë§Œì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.",timestamp:new Date(Date.now()-108e5),isRead:!1,priority:"high",relatedId:"CMP-2024-001"},{id:6,type:"product_approval_request",title:"ìƒí’ˆ ìŠ¹ì¸ ìš”ì²­",message:'ì• í”Œì½”ë¦¬ì•„ì—ì„œ "iPhone 15 Pro Max" ìƒí’ˆ ìŠ¹ì¸ì„ ìš”ì²­í–ˆìŠµë‹ˆë‹¤.',timestamp:new Date(Date.now()-144e5),isRead:!0,priority:"high",relatedId:"PRD-2024-002"},{id:7,type:"system_maintenance",title:"ì‹œìŠ¤í…œ ì ê²€ ì™„ë£Œ",message:"ì •ê¸° ì‹œìŠ¤í…œ ì ê²€ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ì •ìƒ ìš´ì˜ë©ë‹ˆë‹¤.",timestamp:new Date(Date.now()-216e5),isRead:!0,priority:"low",relatedId:"SYS-2024-001"},{id:8,type:"new_tenant_application",title:"ì‹ ê·œ ì…ì ì‚¬ ì‹ ì²­",message:'ãˆœíŒ¨ì…˜í”ŒëŸ¬ìŠ¤ì—ì„œ "ì˜ë¥˜" ì¹´í…Œê³ ë¦¬ë¡œ ì…ì  ì‹ ì²­ì„ ì œì¶œí–ˆìŠµë‹ˆë‹¤.',timestamp:new Date(Date.now()-288e5),isRead:!0,priority:"medium",relatedId:"APP-2024-002"},{id:9,type:"tenant_contract_expiry",title:"ê³„ì•½ ë§Œë£Œ ì˜ˆì •",message:"ì•„ë””ë‹¤ìŠ¤ì˜ ì…ì  ê³„ì•½ì´ 15ì¼ í›„ ë§Œë£Œ ì˜ˆì •ì…ë‹ˆë‹¤.",timestamp:new Date(Date.now()-432e5),isRead:!0,priority:"medium",relatedId:"TNT-2024-003"},{id:10,type:"sales_report",title:"ì£¼ê°„ ë§¤ì¶œ ë¦¬í¬íŠ¸",message:"2024ë…„ 1ì›” 2ì£¼ì°¨ ë§¤ì¶œ ë¦¬í¬íŠ¸ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ë§¤ì¶œ: â‚©8.5ì–µ",timestamp:new Date(Date.now()-864e5),isRead:!0,priority:"low",relatedId:"RPT-2024-W02"}];c(g),j(!1)},1e3)},[]);const o=r=>{switch(r){case"new_tenant_application":return{icon:ye,color:"#3b82f6",bgColor:"#dbeafe"};case"product_approval_request":return{icon:je,color:"#10b981",bgColor:"#d1fae5"};case"tenant_contract_expiry":return{icon:Ns,color:"#f59e0b",bgColor:"#fef3c7"};case"sales_report":return{icon:_e,color:"#8b5cf6",bgColor:"#ede9fe"};case"customer_complaint":return{icon:ts,color:"#ef4444",bgColor:"#fee2e2"};case"system_maintenance":return{icon:ns,color:"#6b7280",bgColor:"#f3f4f6"};default:return{icon:Ve,color:"#6b7280",bgColor:"#f3f4f6"}}},y=r=>{switch(c(g=>g.map(_=>_.id===r.id?{..._,isRead:!0}:_)),r.type){case"new_tenant_application":t("/tenants",{state:{applicationId:r.relatedId}});break;case"product_approval_request":t("/product-management",{state:{productId:r.relatedId}});break;case"tenant_contract_expiry":t("/tenants",{state:{tenantId:r.relatedId}});break;case"sales_report":t("/statistics",{state:{reportId:r.relatedId}});break;case"customer_complaint":t("/customer-service",{state:{complaintId:r.relatedId}});break;case"system_maintenance":t("/settings");break}},N=(r,g)=>{g.stopPropagation(),c(_=>_.filter(D=>D.id!==r))},v=()=>{c(r=>r.map(g=>({...g,isRead:!0})))},I=l.filter(r=>i==="unread"?!r.isRead:i==="read"?r.isRead:!0),u=l.filter(r=>!r.isRead).length,d=r=>{const _=new Date-r,D=Math.floor(_/(1e3*60)),k=Math.floor(_/(1e3*60*60)),M=Math.floor(_/(1e3*60*60*24));return D<1?"ë°©ê¸ˆ ì „":D<60?`${D}ë¶„ ì „`:k<24?`${k}ì‹œê°„ ì „`:M<7?`${M}ì¼ ì „`:r.toLocaleDateString("ko-KR")};return h?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{animation:"spin 1s linear infinite",marginBottom:"1rem"},children:e.jsx(Ve,{size:32})}),e.jsx("p",{children:"ì•Œë¦¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]})}):e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"1.875rem",fontWeight:"700",color:"#111827",margin:"0 0 0.5rem 0"},children:"ì•Œë¦¼"}),e.jsxs("p",{style:{color:"#6b7280",margin:0,fontSize:"0.875rem"},children:[u,"ê°œì˜ ì½ì§€ ì•Šì€ ì•Œë¦¼ì´ ìˆìŠµë‹ˆë‹¤"]})]}),u>0&&e.jsx("button",{onClick:v,style:{background:"#3b82f6",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"ëª¨ë‘ ì½ìŒ ì²˜ë¦¬"})]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem"},children:[{key:"all",label:"ì „ì²´",count:l.length},{key:"unread",label:"ì½ì§€ ì•ŠìŒ",count:u},{key:"read",label:"ì½ìŒ",count:l.filter(r=>r.isRead).length}].map(({key:r,label:g,count:_})=>e.jsxs("button",{onClick:()=>w(r),style:{background:i===r?"#3b82f6":"#f3f4f6",color:i===r?"white":"#374151",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[g," (",_,")"]},r))}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:I.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"3rem 1rem",color:"#6b7280"},children:[e.jsx(Ve,{size:48,style:{marginBottom:"1rem",opacity:.5}}),e.jsx("p",{children:"ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤"})]}):I.map(r=>{const{icon:g,color:_,bgColor:D}=o(r.type);return e.jsx("div",{onClick:()=>y(r),style:{background:r.isRead?"#ffffff":"#fef7ff",border:`1px solid ${r.isRead?"#e5e7eb":"#c084fc"}`,borderRadius:"8px",padding:"1rem",cursor:"pointer",transition:"all 0.2s ease",position:"relative"},onMouseEnter:k=>{k.currentTarget.style.transform="translateY(-1px)",k.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},onMouseLeave:k=>{k.currentTarget.style.transform="translateY(0)",k.currentTarget.style.boxShadow="none"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[e.jsx("div",{style:{background:D,color:_,width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(g,{size:20})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:r.isRead?"500":"600",color:r.isRead?"#374151":"#111827"},children:r.title}),e.jsx("button",{onClick:k=>N(r.id,k),style:{background:"none",border:"none",color:"#9ca3af",cursor:"pointer",padding:"0.25rem",borderRadius:"4px",marginLeft:"0.5rem"},onMouseEnter:k=>{k.currentTarget.style.background="#f3f4f6",k.currentTarget.style.color="#ef4444"},onMouseLeave:k=>{k.currentTarget.style.background="none",k.currentTarget.style.color="#9ca3af"},children:e.jsx(ze,{size:16})})]}),e.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#6b7280",fontSize:"0.875rem",lineHeight:"1.5"},children:r.message}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.75rem",color:"#9ca3af"},children:[e.jsx(Te,{size:12}),d(r.timestamp),!r.isRead&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#ef4444"}}),e.jsx("span",{children:"ì½ì§€ ì•ŠìŒ"})]})]})]})]})},r.id)})})]})},Os=()=>{const t=Ce(),[l,c]=n.useState(!1),[i,w]=n.useState(null),[h,j]=n.useState(!0),[o,y]=n.useState(!1),[N,v]=n.useState(null),[I,u]=n.useState({totalTenants:0,hiddenProducts:0,monthlyRevenue:0,todayOrders:0,yesterdayOrders:0}),[d,r]=n.useState([]),[g,_]=n.useState([]);n.useEffect(()=>{D()},[]);const D=async()=>{try{j(!0),v(null);const[T,U,p]=await Promise.all([M(),f(),B()]);u(T),r(U),_(p),console.log("HQ ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ ì™„ë£Œ")}catch(T){console.error("ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:",T),v("ëŒ€ì‹œë³´ë“œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{j(!1)}},k=async()=>{y(!0),await D(),y(!1)},M=async()=>{var p;const{data:T,error:U}=await O.rpc("get_hq_dashboard_stats");if(U){const[V,C,A,J]=await Promise.all([O.from("brand_admins").select("id",{count:"exact"}).eq("status","active"),O.from("products").select("id",{count:"exact"}).eq("status","hidden"),O.from("orders").select("id",{count:"exact"}).gte("created_at",new Date().toISOString().split("T")[0]),O.from("orders").select("total_amount").gte("created_at",new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString())]),H=await O.from("orders").select("id",{count:"exact"}).gte("created_at",new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0]).lt("created_at",new Date().toISOString().split("T")[0]),ee=((p=J.data)==null?void 0:p.reduce((re,$)=>re+($.total_amount||0),0))||0;return{totalTenants:V.count||0,hiddenProducts:C.count||0,monthlyRevenue:ee,todayOrders:A.count||0,yesterdayOrders:H.count||0}}return T},f=async()=>{const{data:T,error:U}=await O.from("products").select(`
        id,
        name,
        brand,
        status,
        created_at,
        categories (name)
      `).order("created_at",{ascending:!1}).limit(5);if(U)throw U;return(T==null?void 0:T.map(p=>{var V;return{id:`PRD-${String(p.id).padStart(3,"0")}`,tenant:p.brand,product:p.name,category:((V=p.categories)==null?void 0:V.name)||"ê¸°íƒ€",status:W(p.status),submittedAt:new Date(p.created_at).toLocaleDateString("ko-KR")}}))||[]},B=async()=>{const{data:T,error:U}=await O.from("orders").select("items");if(U)throw U;const p={};return T==null||T.forEach(C=>{var A;(A=C.items)==null||A.forEach(J=>{const H=J.brand,ee=J.price*J.quantity;p[H]=(p[H]||0)+ee})}),Object.entries(p).sort(([,C],[,A])=>A-C).slice(0,5).map(([C,A])=>({name:C,category:a(C),revenue:`â‚©${(A/1e4).toFixed(1)}ë§Œ`,growth:"+0%"}))},W=T=>({forsale:"íŒë§¤ì¤‘",soldout:"í’ˆì ˆ",hidden:"ìŠ¹ì¸ëŒ€ê¸°"})[T]||"ì•Œ ìˆ˜ ì—†ìŒ",a=T=>({Apple:"ì „ìì œí’ˆ",Samsung:"ì „ìì œí’ˆ",Chanel:"ë·°í‹°",Dior:"ë·°í‹°","Calvin Klein":"íŒ¨ì…˜",Gucci:"íŒ¨ì…˜"})[T]||"ê¸°íƒ€",x=[{title:"ì´ ì…ì ì‚¬",value:I.totalTenants.toString(),icon:ye,color:"#007bff",change:"+0ê°œ"},{title:"ìŠ¹ì¸ ëŒ€ê¸° ìƒí’ˆ",value:I.hiddenProducts.toString(),icon:ue,color:"#ffc107",change:"+0ê°œ"},{title:"ì´ë²ˆ ë‹¬ ë§¤ì¶œ",value:`â‚©${(I.monthlyRevenue/1e4).toFixed(1)}ë§Œ`,icon:We,color:"#28a745",change:"+0%"},{title:"ì˜¤ëŠ˜ ì£¼ë¬¸",value:I.todayOrders.toString(),icon:He,color:"#dc3545",change:I.todayOrders>I.yesterdayOrders?`+${I.todayOrders-I.yesterdayOrders}ê°œ`:`${I.todayOrders-I.yesterdayOrders}ê°œ`}],z=T=>({íŒë§¤ì¤‘:"badge-success",í’ˆì ˆ:"badge-warning",ìŠ¹ì¸ëŒ€ê¸°:"badge-info"})[T]||"badge-info",S=T=>{w(T),c(!0)},E=T=>{switch(T){case"tenants":t("/admin/tenants");break;case"product-approval":t("/admin/product-management");break;case"customer-service":t("/admin/customer-service");break;case"statistics":t("/admin/statistics");break}};return h?e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",flexDirection:"column",gap:"1rem"},children:[e.jsx(Se,{size:32,className:"animate-spin"}),e.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:"ëŒ€ì‹œë³´ë“œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{margin:0,marginBottom:"0.5rem"},children:"ë³¸ì‚¬ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ"}),e.jsx("p",{style:{color:"#666",margin:0},children:"ì‹¤ì‹œê°„ ì…ì ì‚¬ ë° ë§¤ì¶œ í˜„í™©ì„ í™•ì¸í•˜ì„¸ìš”"})]}),e.jsxs("button",{className:"btn btn-secondary",onClick:k,disabled:o,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ps,{size:16,className:o?"animate-spin":""}),o?"ìƒˆë¡œê³ ì¹¨ ì¤‘...":"ìƒˆë¡œê³ ì¹¨"]})]}),N&&e.jsxs("div",{style:{padding:"1rem",margin:"1rem 0",background:"#fee",border:"1px solid #fcc",borderRadius:"8px",color:"#c33"},children:[e.jsx("strong",{children:"ì˜¤ë¥˜:"})," ",N,e.jsx("button",{onClick:D,style:{marginLeft:"1rem",padding:"0.25rem 0.5rem",background:"#c33",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"ë‹¤ì‹œ ì‹œë„"})]}),e.jsx("div",{className:"stats-grid",children:x.map((T,U)=>{const p=T.icon;return e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{backgroundColor:T.color},children:e.jsx(p,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:T.value}),e.jsx("p",{children:T.title}),e.jsxs("small",{style:{color:"#28a745",fontSize:"0.75rem"},children:[e.jsx(Ae,{size:12,style:{marginRight:"4px"}}),T.change]})]})]},U)})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h2",{className:"card-title",children:"ìµœê·¼ ìƒí’ˆ ìŠ¹ì¸ í˜„í™©"}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>t("/admin/product-management"),children:[e.jsx(es,{size:16}),"ì „ì²´ë³´ê¸°"]})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ìƒí’ˆì½”ë“œ"}),e.jsx("th",{children:"ì…ì ì‚¬"}),e.jsx("th",{children:"ìƒí’ˆëª…"}),e.jsx("th",{children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("th",{children:"ìƒíƒœ"})]})}),e.jsx("tbody",{children:d.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"5",style:{textAlign:"center",padding:"2rem",color:"#666"},children:[e.jsx(ue,{size:48,style:{marginBottom:"1rem",opacity:.5}}),e.jsx("p",{children:"ìµœê·¼ ë“±ë¡ëœ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤."})]})}):d.map(T=>e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>S(T),children:[e.jsx("td",{style:{fontWeight:"600",color:"#007bff"},children:T.id}),e.jsx("td",{children:T.tenant}),e.jsx("td",{children:T.product}),e.jsx("td",{children:T.category}),e.jsx("td",{children:e.jsx("span",{className:`badge ${z(T.status)}`,children:T.status})})]},T.id))})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:"TOP ì…ì ì‚¬ ë§¤ì¶œ"})}),e.jsx("div",{children:g.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:[e.jsx(ye,{size:48,style:{marginBottom:"1rem",opacity:.5}}),e.jsx("p",{children:"ë§¤ì¶œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."})]}):g.map((T,U)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem 0",borderBottom:U<g.length-1?"1px solid #eee":"none"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:T.name}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#666"},children:T.category})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontWeight:"600",color:"#28a745"},children:T.revenue}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#28a745"},children:T.growth})]})]},U))})]})]}),e.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:"ë¹ ë¥¸ ì‘ì—…"})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("button",{className:"btn btn-primary",onClick:()=>E("tenants"),children:[e.jsx(ye,{size:16}),"ì…ì ì‚¬ ê´€ë¦¬"]}),e.jsxs("button",{className:"btn btn-success",onClick:()=>E("product-approval"),children:[e.jsx(ue,{size:16}),"ìƒí’ˆ ìŠ¹ì¸"]}),e.jsxs("button",{className:"btn btn-warning",onClick:()=>E("customer-service"),children:[e.jsx(He,{size:16}),"ê³ ê° ì„œë¹„ìŠ¤"]}),e.jsxs("button",{className:"btn",style:{background:"#6f42c1",color:"white"},onClick:()=>E("statistics"),children:[e.jsx(Ae,{size:16}),"í†µê³„ ë¶„ì„"]})]})]}),e.jsx(fe,{isOpen:l,onClose:()=>c(!1),title:"ìƒí’ˆ ìŠ¹ì¸ ìƒì„¸ ì •ë³´",size:"medium",children:i&&e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ìƒí’ˆì½”ë“œ"}),e.jsx("p",{style:{margin:0,color:"#007bff",fontWeight:"600"},children:i.id})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ìŠ¹ì¸ìƒíƒœ"}),e.jsx("span",{className:`badge ${z(i.status)}`,children:i.status})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ì…ì ì‚¬ëª…"}),e.jsx("p",{style:{margin:0},children:i.tenant})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ìƒí’ˆëª…"}),e.jsx("p",{style:{margin:0},children:i.product})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("p",{style:{margin:0,fontWeight:"600",fontSize:"1.125rem"},children:i.category})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ì‹ ì²­ì¼"}),e.jsx("p",{style:{margin:0},children:i.submittedAt})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>{c(!1),t("/admin/product-management")},children:"ìƒí’ˆ ê´€ë¦¬ë¡œ ì´ë™"}),e.jsx("button",{className:"btn",style:{background:"#6c757d",color:"white"},onClick:()=>c(!1),children:"ë‹«ê¸°"})]})]})})]})},Jr=`
  .tenant-card {
    transition: border-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease !important;
  }
  
  .tenant-card:hover {
    background-color: #e0f2fe !important;
    border-color: #3b82f6 !important;
    transform: translateY(-1px) !important;
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15) !important;
  }
  
  .tenant-card:hover > div {
    background-color: #e0f2fe !important;
    transition: none !important;
  }
  
  .tenant-card > div {
    transition: none !important;
  }
`;if(typeof document<"u"){const t=document.createElement("style");t.textContent=Jr,document.head.appendChild(t)}const Qr=()=>{var Ts,Rs;const t=Ce(),[l,c]=n.useState("month"),[i,w]=n.useState("tenants"),[h,j]=n.useState(!1),[o,y]=n.useState(""),[N,v]=n.useState(!1),[I,u]=n.useState(""),[d,r]=n.useState(!1),[g,_]=n.useState(null),[D,k]=n.useState(!1),[M,f]=n.useState(null),[B,W]=n.useState(!1),[a,x]=n.useState(!1),[z,S]=n.useState(null),[E,T]=n.useState(!1),[U,p]=n.useState(null),[V,C]=n.useState(!1),[A,J]=n.useState(null),[H,ee]=n.useState(!1),[re,$]=n.useState(!0),[G,oe]=n.useState(!1),[de,ie]=n.useState(null),[Y,se]=n.useState({totalTenants:0,newTenantsMonth:0,pendingProducts:0,approvedProducts:0,soldoutProducts:0,totalSales:0,totalOrders:0,totalCustomers:0,monthlySales:0}),[b,s]=n.useState({topBrands:[],categoryDistribution:[],approvalStatus:[],categorySales:[]}),[R,L]=n.useState({monthlyTrends:[],systemMetrics:{},performanceIndicators:[]});n.useEffect(()=>{F()},[l]);const F=async()=>{try{$(!0),ie(null);const[m,P,K,te,le,Z,q]=await Promise.all([X(),ke(),ve(),Ee(),ls(),us(),Xe()]);se(m),s({topBrands:P,categoryDistribution:K,approvalStatus:te,categorySales:q});const ae=await Oe();L({monthlyTrends:le,systemMetrics:Z,performanceIndicators:ae}),console.log("í†µê³„ ë°ì´í„° ë¡œë“œ ì™„ë£Œ - ê¸°ë³¸:",m,"ìƒì„¸:",{topBrands:P,categoryDist:K,approvalStats:te},"ê³ ê¸‰:",{monthlyTrends:le,systemMetrics:Z,performanceIndicators:ae})}catch(m){console.error("í†µê³„ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:",m),ie("í†µê³„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{$(!1)}},X=async()=>{var he,xe,Ne,Me,js,fs,ys;const[m,P,K,te]=await Promise.all([O.from("brand_admins").select("id, joined_at").eq("status","active"),O.from("products").select("id, status"),O.from("orders").select("id, user_id, total_amount, created_at"),O.from("orders").select("total_amount").gte("created_at",new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString())]),le=new Date;le.setDate(le.getDate()-30);const Z=((he=m.data)==null?void 0:he.filter($e=>new Date($e.joined_at)>=le).length)||0,q=((xe=P.data)==null?void 0:xe.reduce(($e,Ze)=>($e[Ze.status]=($e[Ze.status]||0)+1,$e),{}))||{},ae=new Set(((Ne=K.data)==null?void 0:Ne.map($e=>$e.user_id))||[]).size,ce=((Me=K.data)==null?void 0:Me.reduce(($e,Ze)=>$e+(Ze.total_amount||0),0))||0,me=((js=te.data)==null?void 0:js.reduce(($e,Ze)=>$e+(Ze.total_amount||0),0))||0;return{totalTenants:((fs=m.data)==null?void 0:fs.length)||0,newTenantsMonth:Z,pendingProducts:q.hidden||0,approvedProducts:q.forsale||0,soldoutProducts:q.soldout||0,totalSales:ce,totalOrders:((ys=K.data)==null?void 0:ys.length)||0,totalCustomers:ae,monthlySales:me}},ne=async()=>{oe(!0),await F(),oe(!1)},ke=async()=>{try{const{data:m,error:P}=await O.from("orders").select("items");if(P)throw P;const K={};return m==null||m.forEach(le=>{var Z;(Z=le.items)==null||Z.forEach(q=>{const ae=q.brand,ce=q.price*q.quantity;K[ae]||(K[ae]={sales:0,products:0,orders:0}),K[ae].sales+=ce,K[ae].orders+=1})}),Object.entries(K).sort(([,le],[,Z])=>Z.sales-le.sales).slice(0,5).map(([le,Z])=>({name:le,sales:Z.sales,products:0,satisfaction:4.5}))}catch(m){return console.error("ë¸Œëœë“œ ë§¤ì¶œ ì¡°íšŒ ì˜¤ë¥˜:",m),[]}},Ie=async()=>{ee(!0);try{const m=await Xe();J(m)}catch(m){console.error("ì¹´í…Œê³ ë¦¬ë³„ ë§¤ì¶œ ëª¨ë‹¬ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:",m)}finally{ee(!1)}},Xe=async()=>{try{const{data:m,error:P}=await O.from("orders").select("items").in("status",["ë°°ì†¡ì™„ë£Œ","ê²°ì œì™„ë£Œ","ìƒí’ˆì¤€ë¹„","ë°°ì†¡ì¤‘"]);if(P)throw P;const{data:K,error:te}=await O.from("products").select(`
          id,
          categories (name)
        `);if(te)throw te;const le={};K==null||K.forEach(ce=>{ce.categories&&ce.categories.name&&(le[ce.id]=ce.categories.name)});const Z={};m==null||m.forEach(ce=>{ce.items&&Array.isArray(ce.items)&&ce.items.forEach(me=>{const he=le[me.product_id];if(he){const xe=me.price*me.quantity;Z[he]=(Z[he]||0)+xe}})});const q=Object.entries(Z).map(([ce,me])=>({category:ce,sales:me,percentage:0})).sort((ce,me)=>me.sales-ce.sales),ae=q.reduce((ce,me)=>ce+me.sales,0);return q.forEach(ce=>{ce.percentage=ae>0?(ce.sales/ae*100).toFixed(1):0}),q}catch(m){return console.error("ì¹´í…Œê³ ë¦¬ë³„ ë§¤ì¶œ ë¶„í¬ ì¡°íšŒ ì˜¤ë¥˜:",m),[]}},ws=async()=>{T(!0);try{const m=await ve();S(m)}catch(m){console.error("ì¹´í…Œê³ ë¦¬ ëª¨ë‹¬ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:",m)}finally{T(!1)}},gs=async m=>{try{const{data:P,error:K}=await O.from("products").select(`
          brand,
          categories (name)
        `).not("brand","is",null);if(K)throw K;const te={};P==null||P.forEach(me=>{if(me.brand&&me.categories&&me.categories.name){const he=me.brand,xe=me.categories.name;te[he]||(te[he]={}),te[he][xe]=(te[he][xe]||0)+1}});const le=Object.entries(te).filter(([me,he])=>Object.keys(he).reduce((Ne,Me)=>he[Ne]>he[Me]?Ne:Me)===m).map(([me,he])=>({brand:me,totalProducts:Object.values(he).reduce((xe,Ne)=>xe+Ne,0),categoryProducts:he[m]||0}));if(le.length===0)return[];const Z=le.map(me=>me.brand),{data:q,error:ae}=await O.from("brand_admins").select("id, name, email, grade, status").in("name",Z).eq("status","active");if(ae)throw ae;return(q==null?void 0:q.map(me=>{const he=le.find(xe=>xe.brand===me.name);return{...me,productCount:(he==null?void 0:he.totalProducts)||0,categoryProductCount:(he==null?void 0:he.categoryProducts)||0}}))||[]}catch(P){return console.error("ì¹´í…Œê³ ë¦¬ë³„ ì…ì ì‚¬ ì¡°íšŒ ì˜¤ë¥˜:",P),[]}},ve=async()=>{try{const{data:m,error:P}=await O.from("products").select(`
          brand,
          categories (name)
        `).not("brand","is",null);if(P)throw P;const K={};m==null||m.forEach(q=>{if(q.brand&&q.categories&&q.categories.name){const ae=q.brand,ce=q.categories.name;K[ae]||(K[ae]={}),K[ae][ce]=(K[ae][ce]||0)+1}});const te={};Object.entries(K).forEach(([q,ae])=>{const ce=Object.keys(ae).reduce((me,he)=>ae[me]>ae[he]?me:he);te[ce]=(te[ce]||0)+1});const le=Object.entries(te).map(([q,ae])=>({category:q,count:ae,percentage:0})).sort((q,ae)=>ae.count-q.count),Z=le.reduce((q,ae)=>q+ae.count,0);return le.forEach(q=>{q.percentage=Z>0?(q.count/Z*100).toFixed(1):0}),le}catch(m){return console.error("ì¹´í…Œê³ ë¦¬ë³„ ì…ì ì‚¬ ë¶„í¬ ì¡°íšŒ ì˜¤ë¥˜:",m),[]}},Ee=async()=>{try{const{data:m,error:P}=await O.from("products").select("status");if(P)throw P;const K=(m==null?void 0:m.reduce((Z,q)=>{const ae=q.status;return Z[ae]=(Z[ae]||0)+1,Z},{}))||{},te=Object.values(K).reduce((Z,q)=>Z+q,0);return[{status:"ìŠ¹ì¸ ì™„ë£Œ",count:K.forsale||0,percentage:te>0?((K.forsale||0)/te*100).toFixed(1):0},{status:"ìŠ¹ì¸ ëŒ€ê¸°",count:K.hidden||0,percentage:te>0?((K.hidden||0)/te*100).toFixed(1):0},{status:"í’ˆì ˆ",count:K.soldout||0,percentage:te>0?((K.soldout||0)/te*100).toFixed(1):0}]}catch(m){return console.error("ìŠ¹ì¸ í˜„í™© ì¡°íšŒ ì˜¤ë¥˜:",m),[]}},ls=async()=>{try{const{data:m,error:P}=await O.from("orders").select("created_at, total_amount, user_id").order("created_at",{ascending:!1});if(P)throw P;const K={};return m==null||m.forEach(le=>{const Z=new Date(le.created_at),q=`${Z.getFullYear()}-${String(Z.getMonth()+1).padStart(2,"0")}`,ae=`${Z.getMonth()+1}ì›”`;K[q]||(K[q]={month:ae,sales:0,orders:0,customers:new Set}),K[q].sales+=le.total_amount||0,K[q].orders+=1,K[q].customers.add(le.user_id)}),Object.entries(K).sort(([le],[Z])=>Z.localeCompare(le)).slice(0,6).reverse().map(([le,Z])=>({month:Z.month,sales:Z.sales,orders:Z.orders,customers:Z.customers.size}))}catch(m){return console.error("ì›”ë³„ íŠ¸ë Œë“œ ì¡°íšŒ ì˜¤ë¥˜:",m),[]}},us=async()=>{var m,P,K,te;try{const[le,Z,q,ae]=await Promise.all([O.from("brand_admins").select("id").eq("status","active"),O.from("products").select("id, status"),O.from("orders").select("id, status"),O.from("users").select("id")]),ce=((m=Z.data)==null?void 0:m.length)||0,me=((P=Z.data)==null?void 0:P.filter(Me=>Me.status==="forsale").length)||0,he=((K=q.data)==null?void 0:K.length)||0,xe=((te=q.data)==null?void 0:te.filter(Me=>Me.status==="ë°°ì†¡ì™„ë£Œ").length)||0;return{systemUptime:99.8,avgProcessingTime:2.1,approvalRate:ce>0?(me/ce*100).toFixed(1):0,completionRate:he>0?(xe/he*100).toFixed(1):0,errorRate:.3,efficiency:96.5}}catch(le){return console.error("ì‹œìŠ¤í…œ ì§€í‘œ ì¡°íšŒ ì˜¤ë¥˜:",le),{systemUptime:99.8,avgProcessingTime:2.1,approvalRate:0,completionRate:0,errorRate:.3,efficiency:96.5}}},Oe=async()=>{try{const m=Y;return[{metric:"ì—…ë¬´ ì²˜ë¦¬ëŸ‰",current:m.totalOrders,target:Math.max(15,m.totalOrders),percentage:(m.totalOrders>=15,(m.totalOrders/15*100).toFixed(0))},{metric:"ìƒí’ˆ ìŠ¹ì¸ë¥ ",current:m.totalTenants>0?(m.approvedProducts/(m.approvedProducts+m.pendingProducts+m.soldoutProducts)*100).toFixed(1):0,target:95,percentage:m.totalTenants>0?(m.approvedProducts/(m.approvedProducts+m.pendingProducts+m.soldoutProducts)*100/95*100).toFixed(0):0},{metric:"ê³ ê° ë§Œì¡±ë„",current:4.2,target:4,percentage:(4.2/4*100).toFixed(0)},{metric:"ë§¤ì¶œ ëª©í‘œ",current:Math.round(m.totalSales/1e4),target:Math.max(500,Math.round(m.totalSales/1e4)),percentage:m.totalSales>0?(m.totalSales/1e4/Math.max(500,Math.round(m.totalSales/1e4))*100).toFixed(0):0}]}catch(m){return console.error("ì„±ê³¼ ì§€í‘œ ê³„ì‚° ì˜¤ë¥˜:",m),[]}},Ms=async m=>{try{if(r(!0),console.log(`${m} ëª¨ë‹¬ ë°ì´í„° ë¡œë“œ ì‹œì‘...`),m==="tenants"){const{data:P,error:K}=await O.from("brand_admins").select("*").eq("status","active").order("joined_at",{ascending:!1});if(K)throw console.error("ì…ì ì‚¬ ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨:",K),K;console.log("ì…ì ì‚¬ ë°ì´í„°:",(P==null?void 0:P.length)||0,"ê°œ");const{data:te,error:le}=await O.from("orders").select("items, total_amount, order_date, status").in("status",["ë°°ì†¡ì™„ë£Œ","ê²°ì œì™„ë£Œ","ìƒí’ˆì¤€ë¹„","ë°°ì†¡ì¤‘"]);le&&console.error("ì£¼ë¬¸ ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨:",le),console.log("ì£¼ë¬¸ ë°ì´í„°:",(te==null?void 0:te.length)||0,"ê°œ");const{data:Z,error:q}=await O.from("products").select("brand, status, price, sales").eq("status","forsale");q&&console.error("ìƒí’ˆ ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨:",q),console.log("ìƒí’ˆ ë°ì´í„°:",(Z==null?void 0:Z.length)||0,"ê°œ");const ae={},ce={};te&&P.forEach(xe=>{const{totalSales:Ne,orderCount:Me}=Ds(te,xe.name);ae[xe.name]=Ne,ce[xe.name]=Me});const me={};Z&&Z.forEach(xe=>{xe.brand&&(me[xe.brand]=(me[xe.brand]||0)+1)});const he=P.map(xe=>{const Ne=ae[xe.name]||0,Me=me[xe.name]||0,js=ce[xe.name]||0,fs=4+Math.random()*.8,ys=Math.random()*30-5;return{id:xe.id,name:xe.name,email:xe.email,business_number:xe.business_number,joined_at:xe.joined_at,sales:Ne,products:Me,orderCount:js,satisfaction:fs,growth:ys}}).sort((xe,Ne)=>Ne.sales-xe.sales);_({type:"tenants",data:he,totalCount:he.length,totalSales:he.reduce((xe,Ne)=>xe+Ne.sales,0)})}else m==="sales"&&_({type:"sales",data:ge.details});console.log("ëª¨ë‹¬ ë°ì´í„° ë¡œë“œ ì™„ë£Œ:",g)}catch(P){console.error("ëª¨ë‹¬ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:",P),_(null)}finally{r(!1)}},Ds=(m,P)=>{let K=0,te=0;const le=["ë°°ì†¡ì™„ë£Œ","ê²°ì œì™„ë£Œ","ìƒí’ˆì¤€ë¹„","ë°°ì†¡ì¤‘"];return m&&m.forEach(Z=>{le.includes(Z.status)&&Z.items&&Array.isArray(Z.items)&&Z.items.forEach(q=>{q.brand===P&&(K+=q.price*q.quantity,te+=1)})}),{totalSales:K,orderCount:te}},tt=async m=>{W(!0);try{const{data:P,error:K}=await O.from("brand_admins").select("*").eq("id",m.id).single();if(K){console.error("ì…ì ì‚¬ ì •ë³´ ì¡°íšŒ ì˜¤ë¥˜:",K),alert("ì…ì ì‚¬ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");return}const{data:te,error:le}=await O.from("products").select("id").eq("brand",P.name);le&&console.error("ìƒí’ˆ ìˆ˜ ì¡°íšŒ ì˜¤ë¥˜:",le);const{data:Z,error:q}=await O.from("orders").select("*");q&&console.error("ì£¼ë¬¸ ë°ì´í„° ì¡°íšŒ ì˜¤ë¥˜:",q);const{totalSales:ae,orderCount:ce}=Ds(Z,P.name),me={id:P.id,name:P.name,companyName:P.name,email:P.email,phone:P.phone,businessNumber:P.business_number,address:P.address,grade:P.grade||1,status:P.status==="active"?"ìŠ¹ì¸ë¨":P.status==="suspended"?"ì¼ì‹œì •ì§€":P.status==="terminated"?"ê³„ì•½ì¢…ë£Œ":"ìŠ¹ì¸ëŒ€ê¸°",originalStatus:P.status,joinDate:new Date(P.joined_at).toLocaleDateString(),joined_at:P.joined_at,terminatedAt:P.terminated_at,logoUrl:P.logo_url,commission:P.grade===1?5:P.grade===2?4:3,productCount:te?te.length:0,products:te?te.length:0,totalSales:ae,sales:ae,orderCount:ce,description:P.description||"",growth:m.growth||0,satisfaction:m.satisfaction||0};f(me),k(!0)}catch(P){console.error("ì…ì ì‚¬ ì •ë³´ ë¡œë“œ ì˜¤ë¥˜:",P),alert("ì…ì ì‚¬ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{W(!1)}},rt=m=>({ìŠ¹ì¸ëŒ€ê¸°:"badge-warning",ìŠ¹ì¸ë¨:"badge-success",ì¼ì‹œì •ì§€:"badge-warning",ê³„ì•½ì¢…ë£Œ:"badge-danger"})[m]||"badge-secondary",Ss={tenants:{title:"ì…ì ì‚¬ ê´€ë¦¬",icon:ye,color:"#007bff",stats:[{title:"ì´ ì…ì ì‚¬",value:Y.totalTenants.toString(),change:`+${Y.newTenantsMonth}`,isPositive:!0},{title:"ì‹ ê·œ ì…ì ì‚¬",value:Y.newTenantsMonth.toString(),change:"ìµœê·¼ 30ì¼",isPositive:!0},{title:"í‰ê·  ë§¤ì¶œ",value:Y.totalTenants>0?`â‚©${Math.round(Y.totalSales/Y.totalTenants).toLocaleString()}`:"â‚©0",change:"ì…ì ì‚¬ë‹¹",isPositive:!0},{title:"í™œì„± ìƒíƒœ",value:"100%",change:"ëª¨ë“  ì…ì ì‚¬",isPositive:!0}],details:{topTenants:b.topBrands,categoryDistribution:b.categoryDistribution}},products:{title:"ìƒí’ˆ ìŠ¹ì¸ ê´€ë¦¬",icon:je,color:"#28a745",stats:[{title:"ìŠ¹ì¸ ëŒ€ê¸°",value:Y.pendingProducts.toString(),change:"ìˆ¨ê¹€ ìƒí’ˆ",isPositive:Y.pendingProducts===0},{title:"ìŠ¹ì¸ ì™„ë£Œ",value:Y.approvedProducts.toString(),change:"íŒë§¤ ì¤‘",isPositive:!0},{title:"í’ˆì ˆ ìƒí’ˆ",value:Y.soldoutProducts.toString(),change:"ì¬ê³  ì—†ìŒ",isPositive:!1},{title:"ì´ ìƒí’ˆ",value:(Y.approvedProducts+Y.soldoutProducts+Y.pendingProducts).toString(),change:"ì „ì²´",isPositive:!0}],details:{approvalStatus:b.approvalStatus,categoryApproval:b.categoryDistribution.map(m=>({category:m.category,approved:m.count,pending:0,rejected:0}))}},sales:{title:"ë§¤ì¶œ ë¶„ì„",icon:We,color:"#dc3545",stats:[{title:"ì´ ë§¤ì¶œ",value:`â‚©${Math.round(Y.totalSales/1e4).toLocaleString()}ë§Œ`,change:"ì „ì²´ ê¸°ê°„",isPositive:!0},{title:"ì´ ì£¼ë¬¸",value:Y.totalOrders.toLocaleString(),change:"ëˆ„ì  ì£¼ë¬¸",isPositive:!0},{title:"í‰ê·  ì£¼ë¬¸ì•¡",value:Y.totalOrders>0?`â‚©${Math.round(Y.totalSales/Y.totalOrders).toLocaleString()}`:"â‚©0",change:"ì£¼ë¬¸ë‹¹",isPositive:!0},{title:"ê³ ê° ìˆ˜",value:Y.totalCustomers.toString(),change:"êµ¬ë§¤ ê³ ê°",isPositive:!0}],details:{monthlySales:R.monthlyTrends.length>0?R.monthlyTrends:[{month:"ì´ë²ˆ ë‹¬",sales:Y.monthlySales,orders:Y.totalOrders,customers:Y.totalCustomers}],categorySales:b.categorySales}},operations:{title:"ìš´ì˜ íš¨ìœ¨ì„±",icon:ss,color:"#6f42c1",stats:[{title:"ì‹œìŠ¤í…œ ê°€ë™ë¥ ",value:`${R.systemMetrics.systemUptime||99.8}%`,change:"+0.2%",isPositive:!0},{title:"í‰ê·  ì²˜ë¦¬ì‹œê°„",value:`${R.systemMetrics.avgProcessingTime||2.1}ì‹œê°„`,change:"-0.3ì‹œê°„",isPositive:!0},{title:"ìƒí’ˆ ìŠ¹ì¸ë¥ ",value:`${R.systemMetrics.approvalRate||0}%`,change:"ì‹¤ì‹œê°„",isPositive:!0},{title:"ì˜¤ë¥˜ ë°œìƒë¥ ",value:`${R.systemMetrics.errorRate||.3}%`,change:"-0.1%",isPositive:!0}],details:{systemUsage:[{system:"ì…ì ì‚¬ ê´€ë¦¬",usage:Math.round(Y.totalTenants/15*100),efficiency:Math.round(R.systemMetrics.efficiency||92)},{system:"ìƒí’ˆ ìŠ¹ì¸",usage:Math.round(Y.approvedProducts/200*100),efficiency:Math.round(parseFloat(R.systemMetrics.approvalRate||88))},{system:"ê³ ê° ì„œë¹„ìŠ¤",usage:Math.round(Y.totalCustomers/10*100),efficiency:95},{system:"ë§¤ì¶œ ë¶„ì„",usage:Math.round(Y.totalOrders/30*100),efficiency:89},{system:"ì •ì‚° ê´€ë¦¬",usage:88,efficiency:91}],performanceMetrics:R.performanceIndicators}}},ge=Ss[i],Cs=m=>{y(m),j(!0)},at=()=>{let m="";const P=new Date().toISOString().split("T")[0];switch(o){case"category":m=[["ì¹´í…Œê³ ë¦¬","í†µê³„ ë°ì´í„°"].join(","),["ì„ íƒëœ ì¹´í…Œê³ ë¦¬",ge.title].join(","),["ê¸°ê°„",l==="week"?"ì£¼ê°„":"ì›”ê°„"].join(","),...ge.stats.map(q=>[q.title,q.value].join(","))].join(`
`);break;case"detailed":const Z=ge.details;i==="tenants"?m=[["ì…ì ì‚¬ëª…","ë§¤ì¶œ","ìƒí’ˆìˆ˜","ë§Œì¡±ë„"].join(","),...Z.topTenants.map(q=>[q.name,q.sales,q.products,q.satisfaction].join(","))].join(`
`):i==="products"&&(m=[["ìƒíƒœ","ê±´ìˆ˜","ë¹„ìœ¨(%)"].join(","),...Z.approvalStatus.map(q=>[q.status,q.count,q.percentage].join(","))].join(`
`));break;case"comprehensive":m=[["êµ¬ë¶„","ê°’","ë³€í™”ìœ¨"].join(","),...Object.values(Ss).map(q=>q.stats.map(ae=>[`${q.title} - ${ae.title}`,ae.value,ae.change].join(","))).flat()].join(`
`);break;default:m="ë¦¬í¬íŠ¸ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."}const K=new Blob([m],{type:"text/csv;charset=utf-8;"}),te=document.createElement("a"),le=URL.createObjectURL(K);te.setAttribute("href",le),te.setAttribute("download",`${o}_ë¦¬í¬íŠ¸_${P}.csv`),te.style.visibility="hidden",document.body.appendChild(te),te.click(),document.body.removeChild(te),j(!1),alert("ë¦¬í¬íŠ¸ê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.")};return re?e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",flexDirection:"column",gap:"1rem"},children:[e.jsx(Se,{size:32,className:"animate-spin"}),e.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:"í†µê³„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"card-title",children:"ë³¸ì‚¬ í†µê³„ ë¶„ì„"}),e.jsxs("p",{style:{color:"#666",margin:"0.5rem 0 0 0",fontSize:"0.9rem"},children:["ì‹¤ì‹œê°„ ë°ì´í„° ê¸°ë°˜ í†µê³„ ë¶„ì„ (",Y.totalTenants,"ê°œ ì…ì ì‚¬, ",Y.totalOrders,"ê±´ ì£¼ë¬¸)"]})]}),e.jsxs("button",{className:"btn btn-secondary",onClick:ne,disabled:G,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ps,{size:16,className:G?"animate-spin":""}),G?"ìƒˆë¡œê³ ì¹¨ ì¤‘...":"ìƒˆë¡œê³ ì¹¨"]})]}),de&&e.jsxs("div",{style:{padding:"1rem",margin:"1rem 0",background:"#fee",border:"1px solid #fcc",borderRadius:"8px",color:"#c33"},children:[e.jsx("strong",{children:"ì˜¤ë¥˜:"})," ",de,e.jsx("button",{onClick:F,style:{marginLeft:"1rem",padding:"0.25rem 0.5rem",background:"#c33",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"ë‹¤ì‹œ ì‹œë„"})]}),e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsx("h3",{style:{margin:0,marginBottom:"0.5rem"},children:"ê¸°ê°„ ì„ íƒ"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:`btn ${l==="week"?"btn-primary":""}`,style:l!=="week"?{background:"#f8f9fa",color:"#333",border:"1px solid #ddd"}:{},onClick:()=>c("week"),children:"ì£¼ê°„"}),e.jsx("button",{className:`btn ${l==="month"?"btn-primary":""}`,style:l!=="month"?{background:"#f8f9fa",color:"#333",border:"1px solid #ddd"}:{},onClick:()=>c("month"),children:"ì›”ê°„"})]})]})]}),e.jsx("div",{className:"card",style:{marginTop:"1rem"},children:e.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:Object.entries(Ss).map(([m,P])=>{const K=P.icon;return e.jsxs("button",{onClick:()=>w(m),className:`btn ${i===m?"btn-primary":""}`,style:i!==m?{background:"#f8f9fa",color:"#333",border:"1px solid #ddd",display:"flex",alignItems:"center",gap:"0.5rem"}:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(K,{size:16}),P.title]},m)})})}),e.jsx("div",{className:"stats-grid",style:{marginTop:"1.5rem"},children:ge.stats.map((m,P)=>e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{backgroundColor:ge.color},children:e.jsx(ge.icon,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:m.value}),e.jsx("p",{children:m.title}),e.jsxs("small",{style:{color:m.isPositive?"#28a745":"#dc3545",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"4px"},children:[m.isPositive?e.jsx(Ae,{size:12}):e.jsx(Is,{size:12}),m.change]})]})]},P))}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginTop:"1.5rem"},children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h3",{className:"card-title",children:[i==="tenants"&&"ì…ì ì‚¬ë³„ ë§¤ì¶œ í˜„í™©",i==="products"&&"ìƒí’ˆ ìŠ¹ì¸ í˜„í™©",i==="sales"&&"ì¹´í…Œê³ ë¦¬ë³„ ë§¤ì¶œ",i==="operations"&&"ì‹œìŠ¤í…œë³„ ì‚¬ìš©ë¥ "]}),e.jsx("button",{className:"btn btn-sm",style:{background:ge.color,color:"white",border:"none",padding:"0.25rem 0.75rem",fontSize:"0.75rem"},onClick:async()=>{i==="tenants"?(u("tenants"),await Ms("tenants"),v(!0)):i==="products"?t("/product-management"):i==="sales"?(await Ie(),C(!0)):i==="operations"&&t("/operations-statistics")},children:"ìì„¸íˆ ë³´ê¸°"})]}),e.jsxs("div",{style:{padding:"1rem 0"},children:[i==="tenants"&&ge.details.topTenants.map((m,P)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem 0",borderBottom:P<ge.details.topTenants.length-1?"1px solid #eee":"none"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"0.875rem"},children:m.name}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#666"},children:["ìƒí’ˆ: ",m.products,"ê°œ | ë§Œì¡±ë„: ",m.satisfaction,"/5.0"]})]}),e.jsxs("div",{style:{fontWeight:"600",color:ge.color},children:["â‚©",m.sales.toLocaleString()]})]},P)),i==="products"&&ge.details.approvalStatus.map((m,P)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem 0",borderBottom:P<ge.details.approvalStatus.length-1?"1px solid #eee":"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:m.status==="ìŠ¹ì¸ ì™„ë£Œ"?"#28a745":m.status==="ìŠ¹ì¸ ëŒ€ê¸°"?"#ffc107":"#dc3545"}}),e.jsx("span",{style:{fontWeight:"600",fontSize:"0.875rem"},children:m.status})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("span",{style:{fontWeight:"600"},children:[m.count,"ê±´"]}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"#666"},children:[m.percentage,"%"]})]})]},P)),i==="sales"&&ge.details.categorySales.map((m,P)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem 0",borderBottom:P<ge.details.categorySales.length-1?"1px solid #eee":"none"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"0.875rem"},children:m.category}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("span",{style:{fontWeight:"600",color:ge.color},children:["â‚©",m.sales.toLocaleString()]}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"#666"},children:[m.percentage,"%"]})]})]},P)),i==="operations"&&ge.details.systemUsage.map((m,P)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem 0",borderBottom:P<ge.details.systemUsage.length-1?"1px solid #eee":"none"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"0.875rem"},children:m.system}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("span",{style:{fontSize:"0.75rem",color:"#666"},children:["ì‚¬ìš©ë¥ : ",m.usage,"%"]}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"#666"},children:["íš¨ìœ¨ì„±: ",m.efficiency,"%"]})]})]},P))]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h3",{className:"card-title",children:[i==="tenants"&&"ì¹´í…Œê³ ë¦¬ë³„ ì…ì ì‚¬ ë¶„í¬",i==="products"&&"ì¹´í…Œê³ ë¦¬ë³„ ìŠ¹ì¸ í˜„í™©",i==="sales"&&"ì›”ë³„ ë§¤ì¶œ íŠ¸ë Œë“œ",i==="operations"&&"ì„±ê³¼ ì§€í‘œ"]}),e.jsx("button",{className:"btn btn-sm",style:{background:ge.color,color:"white",border:"none",padding:"0.25rem 0.75rem",fontSize:"0.75rem"},onClick:async()=>{i==="tenants"?(await ws(),x(!0)):i==="products"?t("/product-management"):i==="sales"?(u("sales"),await Ms("sales"),v(!0)):i==="operations"&&t("/operations-statistics")},children:"ìì„¸íˆ ë³´ê¸°"})]}),e.jsxs("div",{style:{padding:"1rem 0"},children:[i==="tenants"&&ge.details.categoryDistribution.map((m,P)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem 0",borderBottom:P<ge.details.categoryDistribution.length-1?"1px solid #eee":"none"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"0.875rem"},children:m.category}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("span",{style:{fontWeight:"600"},children:[m.count,"ê°œ ì…ì ì‚¬"]}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"#666"},children:[m.percentage,"%"]})]})]},P)),i==="products"&&ge.details.categoryApproval.map((m,P)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem 0",borderBottom:P<ge.details.categoryApproval.length-1?"1px solid #eee":"none"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"0.875rem"},children:m.category}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("span",{style:{fontSize:"0.75rem",color:"#28a745"},children:["ìŠ¹ì¸: ",m.approved]}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"#ffc107"},children:["ëŒ€ê¸°: ",m.pending]}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"#dc3545"},children:["ë°˜ë ¤: ",m.rejected]})]})]},P)),i==="sales"&&ge.details.monthlySales.map((m,P)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem 0",borderBottom:P<ge.details.monthlySales.length-1?"1px solid #eee":"none"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"0.875rem"},children:m.month}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("span",{style:{fontWeight:"600",color:ge.color},children:["â‚©",m.sales.toLocaleString()]}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"#666"},children:[m.orders,"ì£¼ë¬¸"]})]})]},P)),i==="operations"&&ge.details.performanceMetrics.map((m,P)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem 0",borderBottom:P<ge.details.performanceMetrics.length-1?"1px solid #eee":"none"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"0.875rem"},children:m.metric}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("span",{style:{fontWeight:"600"},children:m.current}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"#666"},children:["ëª©í‘œ: ",m.target," (",m.percentage,"%)"]})]})]},P))]})]})]}),e.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ë¦¬í¬íŠ¸ ìƒì„±"})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("button",{className:"btn btn-primary",onClick:()=>Cs("category"),children:[e.jsx(_e,{size:16}),"ì¹´í…Œê³ ë¦¬ ë¦¬í¬íŠ¸"]}),e.jsxs("button",{className:"btn btn-success",onClick:()=>Cs("detailed"),children:[e.jsx(Ge,{size:16}),"ìƒì„¸ ë¶„ì„"]}),e.jsxs("button",{className:"btn btn-warning",onClick:()=>Cs("comprehensive"),children:[e.jsx(As,{size:16}),"ì¢…í•© ë¦¬í¬íŠ¸"]})]})]}),e.jsx(fe,{isOpen:h,onClose:()=>j(!1),title:"ë¦¬í¬íŠ¸ ìƒì„±",size:"medium",children:e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(As,{size:48,color:ge.color,style:{marginBottom:"1rem"}}),e.jsxs("h3",{style:{margin:0,marginBottom:"0.5rem"},children:[o==="category"&&`${ge.title} ë¦¬í¬íŠ¸`,o==="detailed"&&`${ge.title} ìƒì„¸ ë¶„ì„`,o==="comprehensive"&&"ì¢…í•© í†µê³„ ë¦¬í¬íŠ¸"]}),e.jsxs("p",{style:{color:"#666",margin:0},children:[o==="category"&&`${ge.title}ì˜ ì£¼ìš” í†µê³„ ë°ì´í„°ë¥¼ CSV íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤.`,o==="detailed"&&`${ge.title}ì˜ ìƒì„¸ ë¶„ì„ ë°ì´í„°ë¥¼ CSV íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤.`,o==="comprehensive"&&"ëª¨ë“  ì¹´í…Œê³ ë¦¬ì˜ í†µê³„ ë°ì´í„°ë¥¼ ì¢…í•©í•˜ì—¬ CSV íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤."]})]}),e.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",fontSize:"0.875rem"},children:[e.jsx("h4",{style:{margin:0,marginBottom:"0.5rem"},children:"í¬í•¨ë  ë°ì´í„°:"}),e.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:[o==="category"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"ì¹´í…Œê³ ë¦¬ë³„ ì£¼ìš” ì§€í‘œ"}),e.jsx("li",{children:"ë³€í™”ìœ¨ ë° ì„±ì¥ë¥ "}),e.jsx("li",{children:"ê¸°ê°„ë³„ ë¹„êµ ë°ì´í„°"})]}),o==="detailed"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"ìƒì„¸ ë¶„ì„ ë°ì´í„°"}),e.jsx("li",{children:"ë¶„ë¥˜ë³„ ì„¸ë¶€ í†µê³„"}),e.jsx("li",{children:"ë¹„ìœ¨ ë° ë¶„í¬ ì •ë³´"})]}),o==="comprehensive"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"ì „ì²´ ì¹´í…Œê³ ë¦¬ í†µê³„"}),e.jsx("li",{children:"ì¢…í•© ì„±ê³¼ ì§€í‘œ"}),e.jsx("li",{children:"ë¹„êµ ë¶„ì„ ë°ì´í„°"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[e.jsxs("button",{className:"btn btn-primary",onClick:at,children:[e.jsx(Qe,{size:16}),"ë‹¤ìš´ë¡œë“œ"]}),e.jsx("button",{className:"btn",style:{background:"#6c757d",color:"white"},onClick:()=>j(!1),children:"ì·¨ì†Œ"})]})]})}),N&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>v(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"800px",maxHeight:"85vh",display:"flex",flexDirection:"column",position:"relative"},onClick:m=>m.stopPropagation(),children:[e.jsx("div",{style:{padding:"0.75rem 1rem",borderBottom:"1px solid #e5e7eb",flexShrink:0},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h2",{style:{margin:0,color:"#1f2937",fontSize:"1.125rem",fontWeight:"600"},children:I==="tenants"?"ì…ì ì‚¬ë³„ ìƒì„¸ í†µê³„":"ë§¤ì¶œë³„ ìƒì„¸ í†µê³„"}),e.jsx("button",{onClick:()=>v(!1),style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",borderRadius:"4px",color:"#6b7280"},children:e.jsx(ze,{size:20})})]})}),e.jsxs("div",{style:{flex:1,overflow:"auto",padding:"1rem"},children:[d&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"2rem",flexDirection:"column"},children:[e.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f4f6",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"1rem"}}),e.jsx("p",{style:{color:"#6b7280",fontSize:"0.875rem"},children:I==="tenants"?"ì…ì ì‚¬ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...":"ë§¤ì¶œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]}),!d&&I==="tenants"&&g&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,color:"#1e293b",fontSize:"1.125rem"},children:"ì „ì²´ ì…ì ì‚¬ í˜„í™©"}),e.jsxs("p",{style:{margin:"0.25rem 0 0 0",color:"#64748b",fontSize:"0.875rem"},children:["ì´ ",g.totalCount,"ê°œ ì…ì ì‚¬"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("p",{style:{margin:0,color:"#059669",fontSize:"1.25rem",fontWeight:"600"},children:["â‚©",g.totalSales.toLocaleString()]}),e.jsx("p",{style:{margin:"0.25rem 0 0 0",color:"#64748b",fontSize:"0.875rem"},children:"ì´ ë§¤ì¶œ"})]})]}),e.jsx("h3",{style:{marginBottom:"1rem",color:"#374151"},children:"ì…ì ì‚¬ë³„ ë§¤ì¶œ í˜„í™©"}),e.jsx("div",{style:{backgroundColor:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"6px",padding:"0.75rem",marginBottom:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#92400e",fontSize:"0.875rem"},children:[e.jsx("span",{style:{fontWeight:"600"},children:"ğŸ“ ì°¸ê³ ì‚¬í•­:"}),e.jsx("span",{children:"ë§Œì¡±ë„ì™€ ì„±ì¥ë¥ ì€ í˜„ì¬ ìƒ˜í”Œ ë°ì´í„°ì…ë‹ˆë‹¤. ì‹¤ì œ ë°ì´í„° ì—°ë™ ì‹œ ì—…ë°ì´íŠ¸ ì˜ˆì •ì…ë‹ˆë‹¤."})]})}),e.jsx("div",{style:{marginBottom:"2rem"},children:g.data.map((m,P)=>e.jsxs("div",{onClick:K=>{K.preventDefault(),K.stopPropagation(),tt(m)},className:"tenant-card",style:{display:"flex",alignItems:"center",padding:"1rem",border:"1px solid #e5e7eb",borderRadius:"8px",marginBottom:"0.5rem",backgroundColor:P<3?"#f0f9ff":"#f9fafb",cursor:"pointer",gap:"1rem"},children:[e.jsxs("div",{style:{flex:"2",minWidth:"0",backgroundColor:P<3?"#f0f9ff":"#f9fafb"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontWeight:"600",color:"#1f2937",fontSize:"1rem"},children:m.name}),e.jsx("span",{style:{backgroundColor:P<3?"#3b82f6":"#6b7280",color:"white",fontSize:"0.75rem",padding:"0.125rem 0.5rem",borderRadius:"12px",fontWeight:"500"},children:P<3?`TOP ${P+1}`:`${P+1}ìœ„`})]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:m.email}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["ìƒí’ˆ ",m.products||0,"ê°œ | ë§Œì¡±ë„ ",(m.satisfaction||0).toFixed(1),"/5.0 | ê°€ì…ì¼: ",m.joined_at?new Date(m.joined_at).toLocaleDateString():"N/A"]})]}),e.jsxs("div",{style:{flex:"1",textAlign:"center",minWidth:"100px",backgroundColor:P<3?"#f0f9ff":"#f9fafb"},children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#1f2937",marginBottom:"0.25rem"},children:["â‚©",(m.sales||0).toLocaleString()]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"500"},children:"ì´ ë§¤ì¶œ"})]}),e.jsxs("div",{style:{flex:"0 0 auto",textAlign:"right",minWidth:"80px",backgroundColor:P<3?"#f0f9ff":"#f9fafb"},children:[e.jsxs("div",{style:{fontSize:"1rem",color:(m.growth||0)>=0?"#10b981":"#ef4444",fontWeight:"600",marginBottom:"0.25rem"},children:[(m.growth||0)>=0?"+":"",(m.growth||0).toFixed(1),"%"]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"500"},children:"ì„±ì¥ë¥ "})]})]},m.id||P))})]}),!d&&I==="sales"&&g&&e.jsxs("div",{children:[e.jsx("h3",{style:{marginBottom:"1rem",color:"#374151"},children:"ì›”ë³„ ë§¤ì¶œ íŠ¸ë Œë“œ"}),e.jsx("div",{style:{marginBottom:"2rem"},children:(((Ts=g.data)==null?void 0:Ts.monthlySales)||[]).map((m,P)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",border:"1px solid #e5e7eb",borderRadius:"8px",marginBottom:"0.5rem",backgroundColor:"#f9fafb"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#1f2937"},children:m.month}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["ì£¼ë¬¸ ",m.orders||0,"ê±´ | ê³ ê° ",m.customers||0,"ëª…"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"600",color:"#059669"},children:["â‚©",(m.sales||0).toLocaleString()]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:(m.growth||0)>=0?"#059669":"#dc2626"},children:[(m.growth||0)>=0?"+":"",(m.growth||0).toFixed(1),"%"]})]})]},P))}),e.jsx("h3",{style:{marginBottom:"1rem",color:"#374151"},children:"ì¹´í…Œê³ ë¦¬ë³„ ë§¤ì¶œ í˜„í™©"}),e.jsx("div",{children:(((Rs=g.data)==null?void 0:Rs.categorySales)||[]).map((m,P)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",border:"1px solid #e5e7eb",borderRadius:"6px",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontWeight:"500"},children:m.category}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("span",{style:{color:"#6b7280"},children:[m.orders||0,"ê±´"]}),e.jsxs("span",{style:{color:"#059669",fontWeight:"600",minWidth:"80px",textAlign:"right"},children:["â‚©",(m.sales||0).toLocaleString()]})]})]},P))})]})]}),e.jsx("div",{style:{padding:"0.75rem 1rem",borderTop:"1px solid #e5e7eb",flexShrink:0},children:e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx("button",{className:"btn",style:{background:"#3b82f6",color:"white"},onClick:()=>v(!1),children:"ë‹«ê¸°"})})})]})}),D&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)"},children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9fafb",borderRadius:"8px 8px 0 0"},children:[e.jsx("h2",{style:{margin:0,fontSize:"1.25rem",fontWeight:"600",color:"#1f2937"},children:"ì…ì ì‚¬ ìƒì„¸ ì •ë³´"}),e.jsx("button",{onClick:()=>{k(!1),f(null),W(!1)},style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#6b7280",padding:"0.25rem",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:m=>m.target.style.backgroundColor="#f3f4f6",onMouseLeave:m=>m.target.style.backgroundColor="transparent",children:e.jsx(ze,{size:20})})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem"},children:B?e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"2rem",flexDirection:"column",gap:"1rem"},children:[e.jsx(Se,{className:"animate-spin",size:32}),e.jsx("p",{style:{color:"#6b7280",margin:0},children:"ì…ì ì‚¬ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]}):M?e.jsxs("div",{className:"tenant-details",children:[e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"ê¸°ë³¸ ì •ë³´"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"íšŒì‚¬ëª…"}),e.jsx("span",{children:M.name||M.companyName})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ë“±ê¸‰"}),e.jsxs("span",{style:{fontWeight:"600",color:(M.grade||1)===1?"#dc3545":(M.grade||1)===2?"#ffc107":"#28a745"},children:[M.grade||1,"ë“±ê¸‰"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì´ë©”ì¼"}),e.jsx("span",{children:M.email})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì „í™”ë²ˆí˜¸"}),e.jsx("span",{children:M.phone||"N/A"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸"}),e.jsx("span",{children:M.businessNumber||"N/A"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ë“±ë¡ëœ ìƒí’ˆ ìˆ˜"}),e.jsxs("span",{style:{fontWeight:"600",color:(M.products||M.productCount||0)>10?"#28a745":(M.products||M.productCount||0)>0?"#ffc107":"#6c757d"},children:[(M.products||M.productCount||0).toLocaleString(),"ê°œ"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì£¼ì†Œ"}),e.jsx("span",{children:M.address||"N/A"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì…ì ì¼"}),e.jsx("span",{children:M.joined_at?new Date(M.joined_at).toLocaleDateString():M.joinDate||"N/A"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ìƒíƒœ"}),e.jsx("span",{className:`badge ${rt(M.status)}`,children:M.status})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ìˆ˜ìˆ˜ë£Œìœ¨"}),e.jsxs("span",{children:[M.commission||((M.grade||1)===1?5:(M.grade||1)===2?4:3),"%"]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"ë§¤ì¶œ ì •ë³´"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì´ ë§¤ì¶œ"}),e.jsxs("span",{style:{fontWeight:"600",color:"#3b82f6"},children:["â‚©",(M.sales||M.totalSales||0).toLocaleString()]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì£¼ë¬¸ ìˆ˜"}),e.jsxs("span",{style:{fontWeight:"600",color:"#10b981"},children:[M.orderCount||0,"ê±´"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì„±ì¥ë¥ "}),e.jsxs("span",{style:{fontWeight:"600",color:(M.growth||0)>=0?"#10b981":"#ef4444"},children:[(M.growth||0)>=0?"+":"",(M.growth||0).toFixed(1),"%"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ë§Œì¡±ë„"}),e.jsxs("span",{style:{fontWeight:"600",color:"#f59e0b"},children:[(M.satisfaction||0).toFixed(1),"/5.0"]})]})]})]}),M.description&&e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"ì„¤ëª…"}),e.jsx("p",{children:M.description})]})]}):null}),e.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",backgroundColor:"#f9fafb",borderRadius:"0 0 8px 8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[(M==null?void 0:M.status)==="ìŠ¹ì¸ë¨"&&e.jsxs("button",{className:"btn btn-warning",onClick:()=>{k(!1),alert("ì¼ì‹œì •ì§€ ê¸°ëŠ¥ì€ ì…ì ì‚¬ ê´€ë¦¬ í˜ì´ì§€ì—ì„œ ì´ìš©í•´ì£¼ì„¸ìš”.")},title:"ì¼ì‹œì •ì§€",children:[e.jsx(De,{size:14})," ì¼ì‹œì •ì§€"]}),(M==null?void 0:M.status)==="ì¼ì‹œì •ì§€"&&e.jsxs("button",{className:"btn btn-success",onClick:()=>{k(!1),alert("í™œì„±í™” ê¸°ëŠ¥ì€ ì…ì ì‚¬ ê´€ë¦¬ í˜ì´ì§€ì—ì„œ ì´ìš©í•´ì£¼ì„¸ìš”.")},title:"í™œì„±í™”",children:[e.jsx(je,{size:14})," í™œì„±í™”"]}),((M==null?void 0:M.status)==="ìŠ¹ì¸ë¨"||(M==null?void 0:M.status)==="ì¼ì‹œì •ì§€")&&e.jsxs("button",{className:"btn btn-danger",onClick:()=>{k(!1),alert("ê³„ì•½ ì¢…ë£Œ ê¸°ëŠ¥ì€ ì…ì ì‚¬ ê´€ë¦¬ í˜ì´ì§€ì—ì„œ ì´ìš©í•´ì£¼ì„¸ìš”.")},title:"ê³„ì•½ ì¢…ë£Œ",style:{backgroundColor:"#dc3545",color:"white",border:"1px solid #dc3545"},children:[e.jsx(De,{size:14})," ê³„ì•½ ì¢…ë£Œ"]})]}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>{k(!1),f(null),W(!1)},style:{backgroundColor:"#6c757d",color:"white",border:"1px solid #6c757d",padding:"0.5rem 1rem",borderRadius:"4px",cursor:"pointer"},children:"ë‹«ê¸°"})]})]})}),a&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"80vh",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[e.jsx("h2",{style:{margin:0,fontSize:"1.25rem",fontWeight:"600"},children:"ì¹´í…Œê³ ë¦¬ë³„ ì…ì ì‚¬ ë¶„í¬"}),e.jsx("button",{onClick:()=>{x(!1),S(null),p(null)},style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#6b7280"},children:e.jsx(ze,{})})]}),e.jsx("div",{style:{padding:"1.5rem",overflowY:"auto",flex:1},children:E?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:e.jsx("div",{children:"ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})}):U?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"1rem",paddingBottom:"0.5rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("button",{onClick:()=>p(null),style:{background:"none",border:"none",fontSize:"1rem",cursor:"pointer",color:"#3b82f6",marginRight:"0.5rem"},children:"â† ë’¤ë¡œ"}),e.jsxs("h3",{style:{margin:0,fontSize:"1.125rem"},children:[U.category," ì¹´í…Œê³ ë¦¬ ì…ì ì‚¬"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:U.tenants.map((m,P)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",border:"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:"#f9fafb"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:m.name}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:m.email})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["ë“±ê¸‰: ",m.grade,"ë“±ê¸‰"]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["ìƒí’ˆ: ",m.productCount,"ê°œ"]})]})]},m.id))})]}):e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:"1rem",color:"#6b7280"},children:"ê° ì¹´í…Œê³ ë¦¬ë¥¼ í´ë¦­í•˜ë©´ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì˜ ì…ì ì‚¬ ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:z&&z.length>0?z.map((m,P)=>e.jsxs("div",{onClick:async()=>{T(!0);try{const K=await gs(m.category);p({category:m.category,tenants:K})}finally{T(!1)}},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",border:"1px solid #e5e7eb",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.2s",backgroundColor:"#f9fafb"},onMouseEnter:K=>{K.target.style.backgroundColor="#f3f4f6"},onMouseLeave:K=>{K.target.style.backgroundColor="#f9fafb"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:m.category}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:[m.count,"ê°œ ì…ì ì‚¬"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#3b82f6"},children:[m.percentage,"%"]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"í´ë¦­í•˜ì—¬ ìƒì„¸ë³´ê¸°"})]})]},P)):e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:"ì¹´í…Œê³ ë¦¬ë³„ ì…ì ì‚¬ ë¶„í¬ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."})})]})}),e.jsx("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"flex-end",flexShrink:0},children:e.jsx("button",{onClick:()=>{x(!1),S(null),p(null)},style:{backgroundColor:"#6c757d",color:"white",border:"1px solid #6c757d",padding:"0.5rem 1rem",borderRadius:"4px",cursor:"pointer"},children:"ë‹«ê¸°"})})]})}),V&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"80vh",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[e.jsx("h2",{style:{margin:0,fontSize:"1.25rem",fontWeight:"600"},children:"ì¹´í…Œê³ ë¦¬ë³„ ë§¤ì¶œ í˜„í™©"}),e.jsx("button",{onClick:()=>{C(!1),J(null)},style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#6b7280"},children:e.jsx(ze,{})})]}),e.jsx("div",{style:{padding:"1.5rem",overflowY:"auto",flex:1},children:H?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:e.jsx("div",{children:"ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})}):e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:"1rem",color:"#6b7280"},children:"ê° ì¹´í…Œê³ ë¦¬ë³„ ë§¤ì¶œ í˜„í™©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:A&&A.length>0?A.map((m,P)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",border:"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:"#f9fafb"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:m.category}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["ë§¤ì¶œ ë¹„ìœ¨: ",m.percentage,"%"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#28a745"},children:["â‚©",m.sales.toLocaleString()]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"ì´ ë§¤ì¶œ"})]})]},P)):e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:"ì¹´í…Œê³ ë¦¬ë³„ ë§¤ì¶œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."})})]})}),e.jsx("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"flex-end",flexShrink:0},children:e.jsx("button",{onClick:()=>{C(!1),J(null)},style:{backgroundColor:"#6c757d",color:"white",border:"1px solid #6c757d",padding:"0.5rem 1rem",borderRadius:"4px",cursor:"pointer"},children:"ë‹«ê¸°"})})]})})]})},Xr=()=>{const t=Ce(),[l,c]=n.useState(""),[i,w]=n.useState("all"),[h,j]=n.useState("all"),[o,y]=n.useState([]),[N,v]=n.useState(!0),[I,u]=n.useState(null),[d,r]=n.useState([]),[g,_]=n.useState(new Map),[D,k]=n.useState(new Map),[M,f]=n.useState({totalProducts:0,activeProducts:0,soldoutProducts:0,hiddenProducts:0,totalBrands:0,totalStock:0,totalSales:0}),[B,W]=n.useState(!1),[a,x]=n.useState(!1),[z,S]=n.useState(null),[E,T]=n.useState({name:"",price:0,status:"forsale",stock:0});n.useEffect(()=>{C()},[]);const U=async()=>{try{const{data:s,error:R}=await O.from("categories").select("id, name, level, parent_id").order("level",{ascending:!0});if(R){console.error("ì¹´í…Œê³ ë¦¬ ë¡œë“œ ì˜¤ë¥˜:",R);return}const L=new Map,F=new Map;return s==null||s.forEach(X=>{L.set(X.id,X.name)}),s==null||s.forEach(X=>{let ne=X.name,ke=X;for(;ke.parent_id;){const Ie=s.find(Xe=>Xe.id===ke.parent_id);if(Ie)ne=`${Ie.name} > ${ne}`,ke=Ie;else break}F.set(X.id,ne)}),_(L),k(F),s||[]}catch(s){return console.error("ì¹´í…Œê³ ë¦¬ ë¡œë“œ ì¤‘ ì˜¤ë¥˜:",s),[]}},p=async()=>{try{const s=await Gs();if(s.success){y(s.data||[]);const R=[...new Set(s.data.map(L=>L.category_id))];r(["all",...R])}else u(s.error||"ìƒí’ˆ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}catch(s){console.error("ìƒí’ˆ ë¡œë“œ ì˜¤ë¥˜:",s),u("ìƒí’ˆ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}},V=async()=>{try{const{data:s,error:R}=await O.from("products").select("status, brand, stock, sales, price");if(R)throw R;const L={totalProducts:(s==null?void 0:s.length)||0,activeProducts:(s==null?void 0:s.filter(F=>F.status==="forsale").length)||0,soldoutProducts:(s==null?void 0:s.filter(F=>F.status==="soldout").length)||0,hiddenProducts:(s==null?void 0:s.filter(F=>F.status==="hidden").length)||0,totalBrands:new Set(s==null?void 0:s.map(F=>F.brand)).size||0,totalStock:(s==null?void 0:s.reduce((F,X)=>F+(X.stock||0),0))||0,totalSales:(s==null?void 0:s.reduce((F,X)=>F+(X.sales||0),0))||0};return f(L),L}catch(s){return console.error("ìƒí’ˆ í†µê³„ ë¡œë“œ ì˜¤ë¥˜:",s),M}},C=async()=>{try{v(!0),u(null),await Promise.all([U(),p(),V()])}catch(s){console.error("ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:",s),u("ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{v(!1)}},A=s=>{S(s),x(!1),T({name:s.name||"",price:s.price||0,status:s.status||"forsale",stock:s.stock||0}),W(!0)},J=s=>{S(s),x(!0),T({name:s.name||"",price:s.price||0,status:s.status||"forsale",stock:s.stock||0}),W(!0)},H=async s=>{if(window.confirm(`ì •ë§ë¡œ ìƒí’ˆ [${s.name}]ì„(ë¥¼) ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`))try{const{error:L}=await O.from("products").delete().eq("id",s.id);if(L)throw L;await C(),alert("ìƒí’ˆì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(L){console.error("ìƒí’ˆ ì‚­ì œ ì˜¤ë¥˜:",L),alert("ìƒí’ˆ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}},ee=async()=>{if(z)try{const{error:s}=await O.from("products").update({name:E.name,price:Number(E.price)||0,status:E.status,stock:Number(E.stock)||0,updated_at:new Date().toISOString()}).eq("id",z.id);if(s)throw s;W(!1),await C(),alert("ìƒí’ˆ ì •ë³´ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(s){console.error("ìƒí’ˆ ìˆ˜ì • ì˜¤ë¥˜:",s),alert("ìƒí’ˆ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}},re=[{id:"products",title:"ì „ì²´ ìƒí’ˆ",description:"ë“±ë¡ëœ ëª¨ë“  ìƒí’ˆ í˜„í™©",icon:ue,color:"#007bff",path:"#products-section",stats:{total:M.totalProducts,active:M.activeProducts,brands:M.totalBrands}},{id:"inventory",title:"ì¬ê³  ê´€ë¦¬",description:"í’ˆì ˆ ë° ì¬ê³  ë¶€ì¡± ìƒí’ˆ ê´€ë¦¬",icon:Be,color:"#ffc107",path:"/inventory-management",stats:{totalStock:M.totalStock,soldout:M.soldoutProducts,lowStock:o.filter(s=>s.stock&&s.stock<=10&&s.status!=="soldout").length,totalSales:M.totalSales}},{id:"hidden",title:"ìˆ¨ê¹€ ìƒí’ˆ",description:"ë¹„í™œì„±í™”ëœ ìƒí’ˆ ê´€ë¦¬",icon:we,color:"#6c757d",path:"/hidden-products",stats:{hidden:M.hiddenProducts,needsReview:M.hiddenProducts}}],$=s=>({forsale:"badge-success",soldout:"badge-secondary",hidden:"badge-warning"})[s]||"badge-secondary",G=s=>({forsale:"íŒë§¤ì¤‘",soldout:"í’ˆì ˆ",hidden:"ìˆ¨ê¹€"})[s]||s,oe=s=>g.get(s)||`ì¹´í…Œê³ ë¦¬ ${s}`,de=s=>D.get(s)||oe(s),ie=s=>{s.id==="products"?(j("all"),w("all"),c(""),setTimeout(()=>{const R=document.querySelector(".product-list-section");R&&R.scrollIntoView({behavior:"smooth"})},100)):s.id==="hidden"?(j("hidden"),setTimeout(()=>{const R=document.querySelector(".product-list-section");R&&R.scrollIntoView({behavior:"smooth"})},100)):s.id==="inventory"?(j("low-stock"),setTimeout(()=>{const R=document.querySelector(".product-list-section");R&&R.scrollIntoView({behavior:"smooth"})},100)):s.path&&t(s.path)},Y=o.filter(s=>{var X,ne,ke,Ie;const R=((X=s.name)==null?void 0:X.toLowerCase().includes(l.toLowerCase()))||((ne=s.brand)==null?void 0:ne.toLowerCase().includes(l.toLowerCase()))||((ke=s.id)==null?void 0:ke.toString().includes(l)),L=i==="all"||((Ie=s.category_id)==null?void 0:Ie.toString())===i;let F;return h==="all"?F=!0:h==="low-stock"?F=s.status==="soldout"||s.stock&&s.stock<=10:F=s.status===h,R&&L&&F}),se=()=>{const s=[["ìƒí’ˆì½”ë“œ","ìƒí’ˆëª…","ë¸Œëœë“œ","ì¹´í…Œê³ ë¦¬","ì¹´í…Œê³ ë¦¬ê²½ë¡œ","ì¹´í…Œê³ ë¦¬ID","ê°€ê²©","ìƒíƒœ","ì¬ê³ ","íŒë§¤ëŸ‰","ë“±ë¡ì¼","ìµœì¢…ìˆ˜ì •ì¼"].join(","),...Y.map(X=>[X.id,`"${X.name}"`,`"${X.brand||""}"`,`"${oe(X.category_id)}"`,`"${de(X.category_id)}"`,X.category_id,X.price,G(X.status),X.stock,X.sales,X.created_at,X.updated_at].join(","))].join(`
`),R=new Blob([s],{type:"text/csv;charset=utf-8;"}),L=document.createElement("a"),F=URL.createObjectURL(R);L.setAttribute("href",F),L.setAttribute("download",`ì „ì²´ìƒí’ˆëª©ë¡_${new Date().toISOString().split("T")[0]}.csv`),L.style.visibility="hidden",document.body.appendChild(L),L.click(),document.body.removeChild(L)},b={totalProducts:M.totalProducts,activeProducts:M.activeProducts,soldoutProducts:M.soldoutProducts,hiddenProducts:M.hiddenProducts,totalBrands:M.totalBrands,totalStock:M.totalStock,totalSales:M.totalSales};return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"page-title",children:[e.jsx(ue,{size:24}),e.jsx("h1",{children:"ìƒí’ˆ ê´€ë¦¬"})]}),e.jsx("p",{className:"page-description",children:"ì…ì ì‚¬ ìƒí’ˆì˜ ìŠ¹ì¸, ì „ì²´ ìƒí’ˆ ì—´ëŒ, ì •ì±…ì„ ê´€ë¦¬í•©ë‹ˆë‹¤."})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:"#007bff"},children:e.jsx(ue,{size:20})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"ì „ì²´ ìƒí’ˆ"}),e.jsxs("p",{className:"stat-value",children:[b.totalProducts.toLocaleString(),"ê±´"]}),e.jsxs("p",{className:"stat-change",children:[b.totalBrands,"ê°œ ë¸Œëœë“œ"]})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:"#28a745"},children:e.jsx(je,{size:20})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"íŒë§¤ ì¤‘"}),e.jsxs("p",{className:"stat-value",children:[b.activeProducts.toLocaleString(),"ê±´"]}),e.jsxs("p",{className:"stat-change",children:[b.totalProducts>0?(b.activeProducts/b.totalProducts*100).toFixed(1):0,"%"]})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:"#ffc107"},children:e.jsx(Be,{size:20})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"ì´ ì¬ê³ "}),e.jsxs("p",{className:"stat-value",children:[b.totalStock.toLocaleString(),"ê°œ"]}),e.jsxs("p",{className:"stat-change",children:[b.soldoutProducts,"ê±´ í’ˆì ˆ"]})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:"#dc3545"},children:e.jsx(we,{size:20})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"ì´ íŒë§¤ëŸ‰"}),e.jsxs("p",{className:"stat-value",children:[b.totalSales.toLocaleString(),"ê°œ"]}),e.jsxs("p",{className:"stat-change",children:[b.hiddenProducts,"ê±´ ìˆ¨ê¹€"]})]})]})]}),e.jsx("div",{className:"menu-grid",children:re.map(s=>e.jsxs("div",{className:"menu-card",onClick:()=>ie(s),children:[e.jsxs("div",{className:"menu-card-header",children:[e.jsx("div",{className:"menu-icon",style:{background:s.color},children:e.jsx(s.icon,{size:24})}),e.jsx(es,{size:20,className:"menu-arrow"})]}),e.jsxs("div",{className:"menu-card-content",children:[e.jsx("h3",{children:s.title}),e.jsx("p",{children:s.description}),e.jsxs("div",{className:"menu-stats",children:[s.id==="products"&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"stat-item",children:[e.jsx(ue,{size:14}),"ì „ì²´: ",s.stats.total.toLocaleString()]}),e.jsxs("span",{className:"stat-item",children:[e.jsx(je,{size:14}),"í™œì„±: ",s.stats.active.toLocaleString()]}),e.jsxs("span",{className:"stat-item",children:["ë¸Œëœë“œ: ",s.stats.brands,"ê°œ"]})]}),s.id==="inventory"&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"stat-item",children:[e.jsx(Be,{size:14}),"í’ˆì ˆ: ",s.stats.soldout,"ê±´"]}),e.jsxs("span",{className:"stat-item",children:[e.jsx(ue,{size:14}),"ì¬ê³ ë¶€ì¡±: ",s.stats.lowStock,"ê±´"]}),e.jsxs("span",{className:"stat-item",children:["ì´ì¬ê³ : ",s.stats.totalStock.toLocaleString(),"ê°œ"]})]}),s.id==="hidden"&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"stat-item",children:[e.jsx(we,{size:14}),"ìˆ¨ê¹€: ",s.stats.hidden,"ê±´"]}),e.jsxs("span",{className:"stat-item",children:["ê²€í†  í•„ìš”: ",s.stats.needsReview,"ê±´"]})]})]})]})]},s.id))}),e.jsxs("div",{className:"card product-list-section",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h2",{className:"card-title",children:"ì „ì²´ ìƒí’ˆ ëª©ë¡"}),N&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Se,{size:16,className:"animate-spin"}),e.jsx("span",{children:"ë¡œë”© ì¤‘..."})]})]}),I&&e.jsxs("div",{style:{padding:"1rem",margin:"1rem",background:"#fee",border:"1px solid #fcc",borderRadius:"8px",color:"#c33"},children:[e.jsx("strong",{children:"ì˜¤ë¥˜:"})," ",I,e.jsx("button",{onClick:C,style:{marginLeft:"1rem",padding:"0.25rem 0.5rem",background:"#c33",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"ë‹¤ì‹œ ì‹œë„"})]}),e.jsx("div",{style:{padding:"1rem",borderBottom:"1px solid #e5e7eb"},children:e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{position:"relative",flex:"1",minWidth:"300px"},children:[e.jsx(Ue,{size:20,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#6b7280"}}),e.jsx("input",{type:"text",placeholder:"ìƒí’ˆëª…, ë¸Œëœë“œ, ìƒí’ˆì½”ë“œë¡œ ê²€ìƒ‰...",value:l,onChange:s=>c(s.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"0.875rem"}})]}),e.jsxs("select",{value:i,onChange:s=>w(s.target.value),style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"0.875rem",minWidth:"150px"},children:[e.jsx("option",{value:"all",children:"ì „ì²´ ì¹´í…Œê³ ë¦¬"}),d.filter(s=>s!=="all").map(s=>e.jsx("option",{value:s,children:oe(s)},s))]}),e.jsxs("select",{value:h,onChange:s=>j(s.target.value),style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"0.875rem",minWidth:"120px"},children:[e.jsx("option",{value:"all",children:"ì „ì²´ ìƒíƒœ"}),e.jsx("option",{value:"forsale",children:"íŒë§¤ì¤‘"}),e.jsx("option",{value:"soldout",children:"í’ˆì ˆ"}),e.jsx("option",{value:"hidden",children:"ìˆ¨ê¹€"}),e.jsx("option",{value:"low-stock",children:"ì¬ê³  ë¶€ì¡±"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:se,style:{display:"flex",alignItems:"center",gap:"0.5rem"},disabled:N||Y.length===0,children:[e.jsx(Qe,{size:16}),"ë‚´ë³´ë‚´ê¸°"]})]})}),e.jsx("div",{className:"table-container",children:N?e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:[e.jsx(Se,{size:32,className:"animate-spin",style:{marginBottom:"1rem"}}),e.jsx("p",{children:"ìƒí’ˆ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]}):Y.length===0?e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:[e.jsx(ue,{size:48,style:{marginBottom:"1rem",opacity:.5}}),e.jsx("p",{children:"ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤."})]}):e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ì´ë¯¸ì§€"}),e.jsx("th",{children:"ìƒí’ˆì½”ë“œ"}),e.jsx("th",{children:"ìƒí’ˆëª…"}),e.jsx("th",{children:"ë¸Œëœë“œ"}),e.jsx("th",{children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("th",{children:"ê°€ê²©"}),e.jsx("th",{children:"ìƒíƒœ"}),e.jsx("th",{children:"ì¬ê³ "}),e.jsx("th",{children:"íŒë§¤ëŸ‰"}),e.jsx("th",{children:"ë“±ë¡ì¼"}),e.jsx("th",{children:"ìµœì¢…ìˆ˜ì •ì¼"}),e.jsx("th",{children:"ì‘ì—…"})]})}),e.jsx("tbody",{children:Y.map(s=>{var R;return e.jsxs("tr",{children:[e.jsx("td",{children:s.image_urls&&s.image_urls.length>0?e.jsx("img",{src:s.image_urls[0],alt:s.name,style:{width:"50px",height:"50px",objectFit:"cover",borderRadius:"6px",border:"1px solid #e5e7eb"},onError:L=>{L.target.style.display="none",L.target.nextSibling.style.display="flex"}}):e.jsx("div",{style:{width:"50px",height:"50px",background:"#f3f4f6",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e5e7eb"},children:e.jsx(et,{size:20,color:"#9ca3af"})})}),e.jsx("td",{style:{fontWeight:"600",color:"#007bff"},children:s.id}),e.jsx("td",{style:{fontWeight:"600"},children:s.name}),e.jsx("td",{children:s.brand||"-"}),e.jsx("td",{children:e.jsxs("div",{style:{fontSize:"0.875rem"},children:[e.jsx("div",{style:{fontWeight:"600",color:"#374151",marginBottom:"2px"},children:oe(s.category_id)}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontStyle:"italic"},title:`ì¹´í…Œê³ ë¦¬ ID: ${s.category_id}`,children:de(s.category_id)})]})}),e.jsxs("td",{style:{fontWeight:"600"},children:["â‚©",(R=s.price)==null?void 0:R.toLocaleString()]}),e.jsx("td",{children:e.jsx("span",{className:`badge ${$(s.status)}`,children:G(s.status)})}),e.jsx("td",{children:e.jsxs("span",{style:{color:s.stock>10?"#28a745":s.stock>0?"#ffc107":"#dc3545",fontWeight:"600"},children:[s.stock,"ê°œ"]})}),e.jsx("td",{style:{fontWeight:"600"},children:s.sales||0}),e.jsx("td",{children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{children:new Date(s.updated_at).toLocaleDateString()}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-sm",style:{background:"#007bff",color:"white",border:"none",padding:"0.25rem 0.5rem"},title:"ìƒì„¸ë³´ê¸°",onClick:()=>A(s),children:e.jsx(we,{size:14})}),e.jsx("button",{className:"btn btn-sm",style:{background:"#28a745",color:"white",border:"none",padding:"0.25rem 0.5rem"},title:"ìˆ˜ì •",onClick:()=>J(s),children:e.jsx(rs,{size:14})}),e.jsx("button",{className:"btn btn-sm",style:{background:"#dc3545",color:"white",border:"none",padding:"0.25rem 0.5rem"},title:"ì‚­ì œ",onClick:()=>H(s),children:e.jsx(Ye,{size:14})})]})})]},s.id)})})]})})]}),e.jsx(fe,{isOpen:B,onClose:()=>W(!1),title:a?"ìƒí’ˆ ì •ë³´ ìˆ˜ì •":"ìƒí’ˆ ìƒì„¸ ë³´ê¸°",size:"lg",children:z&&e.jsx("div",{className:"space-y-4",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"12px",color:"#374151",fontWeight:600},children:"ìƒí’ˆëª…"}),e.jsx("input",{type:"text",value:E.name,onChange:s=>T({...E,name:s.target.value}),style:{border:"1px solid #d1d5db",borderRadius:8,padding:"8px"}})]}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"12px",color:"#374151",fontWeight:600},children:"ê°€ê²©(ì›)"}),e.jsx("input",{type:"number",value:E.price,onChange:s=>T({...E,price:s.target.value}),style:{border:"1px solid #d1d5db",borderRadius:8,padding:"8px"}})]}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"12px",color:"#374151",fontWeight:600},children:"ìƒíƒœ"}),e.jsxs("select",{value:E.status,onChange:s=>T({...E,status:s.target.value}),style:{border:"1px solid #d1d5db",borderRadius:8,padding:"8px"},children:[e.jsx("option",{value:"forsale",children:"íŒë§¤ì¤‘"}),e.jsx("option",{value:"soldout",children:"í’ˆì ˆ"}),e.jsx("option",{value:"hidden",children:"ìˆ¨ê¹€"})]})]}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"12px",color:"#374151",fontWeight:600},children:"ì¬ê³ (ê°œ)"}),e.jsx("input",{type:"number",value:E.stock,onChange:s=>T({...E,stock:s.target.value}),style:{border:"1px solid #d1d5db",borderRadius:8,padding:"8px"}})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"12px"},children:[e.jsx("button",{className:"btn",style:{background:"#111827",color:"white",border:"none",padding:"0.5rem 0.75rem"},onClick:()=>x(!1),children:"ì·¨ì†Œ"}),e.jsx("button",{className:"btn",style:{background:"#2563eb",color:"white",border:"none",padding:"0.5rem 0.75rem"},onClick:ee,children:"ì €ì¥"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("div",{style:{width:"120px",height:"120px",background:"#f8f9fa",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"1px solid #e9ecef"},children:[z.image_urls&&z.image_urls.length>0?e.jsxs("div",{style:{position:"relative",width:"100%",height:"100%"},children:[e.jsx("img",{src:z.image_urls[0],alt:z.name,style:{width:"100%",height:"100%",objectFit:"cover",cursor:"pointer"},onClick:()=>window.open(z.image_urls[0],"_blank"),onError:s=>{s.target.style.display="none",s.target.nextSibling&&(s.target.nextSibling.style.display="flex")}}),z.image_urls.length>1&&e.jsxs("div",{style:{position:"absolute",top:"4px",right:"4px",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600"},children:["+",z.image_urls.length-1]})]}):null,e.jsx("div",{style:{display:z.image_urls&&z.image_urls.length>0?"none":"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:e.jsx(ue,{size:32,color:"#666"})})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,marginBottom:"0.5rem"},children:z.name}),e.jsx("span",{className:`badge ${$(z.status)}`,children:G(z.status)})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ìƒí’ˆ ID"}),e.jsx("p",{style:{margin:0},children:z.id})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ë¸Œëœë“œ"}),e.jsx("p",{style:{margin:0},children:z.brand||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("p",{style:{margin:0},children:oe(z.category_id)})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ê°€ê²©"}),e.jsxs("p",{style:{margin:0,fontWeight:"600",fontSize:"1.125rem",color:"#007bff"},children:["â‚©",(z.price||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ì¬ê³ "}),e.jsxs("p",{style:{margin:0,fontWeight:"600",color:z.stock===0?"#dc3545":z.stock<50?"#ffc107":"#28a745"},children:[z.stock||0,"ê°œ"]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"íŒë§¤ëŸ‰"}),e.jsxs("p",{style:{margin:0,fontWeight:"600"},children:[z.sales||0,"ê°œ"]})]})]}),z.description&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ìƒí’ˆ ì„¤ëª…"}),e.jsx("p",{style:{margin:0,lineHeight:"1.5"},children:z.description})]}),z.image_urls&&z.image_urls.length>1&&e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:["ì¶”ê°€ ì´ë¯¸ì§€ë“¤ (",z.image_urls.length-1,"ê°œ)"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(80px, 1fr))",gap:"8px"},children:z.image_urls.slice(1).map((s,R)=>e.jsx("img",{src:s,alt:`${z.name} ${R+2}`,style:{width:"100%",height:"80px",objectFit:"cover",borderRadius:"6px",cursor:"pointer",border:"1px solid #e9ecef"},onClick:()=>window.open(s,"_blank")},R))})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>x(!0),children:"ìˆ˜ì •"}),e.jsx("button",{className:"btn",style:{background:"#6c757d",color:"white"},onClick:()=>W(!1),children:"ë‹«ê¸°"})]})]})})})]})},Zr=()=>{const[t,l]=n.useState(""),[c,i]=n.useState("all"),[w,h]=n.useState("all"),[j,o]=n.useState(!1),[y,N]=n.useState(null),[v,I]=n.useState([{id:1,name:"ê°¤ëŸ­ì‹œ S24 ìš¸íŠ¸ë¼",tenant:"ì‚¼ì„±ì „ì",category:"ì „ìì œí’ˆ",price:1598e3,status:"ìŠ¹ì¸ëŒ€ê¸°",submittedDate:"2024-01-15",description:"ìµœì‹  ìŠ¤ë§ˆíŠ¸í° ëª¨ë¸",imageUrl:"https://via.placeholder.com/100x100?text=Phone",stock:50,commission:5},{id:2,name:"LG OLED TV 65ì¸ì¹˜",tenant:"LGì „ì",category:"ì „ìì œí’ˆ",price:25e5,status:"ìŠ¹ì¸ë¨",submittedDate:"2024-01-14",description:"í”„ë¦¬ë¯¸ì—„ OLED TV",imageUrl:"https://via.placeholder.com/100x100?text=TV",stock:20,commission:4.5},{id:3,name:"ë‚˜ì´í‚¤ ì—ì–´ë§¥ìŠ¤",tenant:"ì‹ ì„¸ê³„ì¸í„°ë‚´ì…”ë‚ ",category:"íŒ¨ì…˜",price:89e3,status:"ìŠ¹ì¸ë¨",submittedDate:"2024-01-13",description:"ìŠ¤í¬ì¸  ì‹ ë°œ",imageUrl:"https://via.placeholder.com/100x100?text=Shoes",stock:100,commission:6},{id:4,name:"ìœ ê¸°ë† ê³¼ì¼ ì„¸íŠ¸",tenant:"ì‹ ê·œì…ì ì—…ì²´",category:"ì‹í’ˆ",price:25e3,status:"ìŠ¹ì¸ê±°ë¶€",submittedDate:"2024-01-12",description:"ì‹ ì„ í•œ ìœ ê¸°ë† ê³¼ì¼",imageUrl:"https://via.placeholder.com/100x100?text=Fruit",stock:30,commission:5,rejectionReason:"ì‹í’ˆ ì•ˆì „ ì¸ì¦ì„œ ëˆ„ë½"},{id:5,name:"ë””ìì¸ ì˜ì",tenant:"ê°€êµ¬ì—…ì²´",category:"ê°€êµ¬",price:45e4,status:"ìŠ¹ì¸ëŒ€ê¸°",submittedDate:"2024-01-11",description:"ëª¨ë˜ ë””ìì¸ ì˜ì",imageUrl:"https://via.placeholder.com/100x100?text=Chair",stock:15,commission:5.5}]),u=[{value:"all",label:"ì „ì²´"},{value:"ìŠ¹ì¸ëŒ€ê¸°",label:"ìŠ¹ì¸ëŒ€ê¸°"},{value:"ìŠ¹ì¸ë¨",label:"ìŠ¹ì¸ë¨"},{value:"ìŠ¹ì¸ê±°ë¶€",label:"ìŠ¹ì¸ê±°ë¶€"}],d=["ì „ìì œí’ˆ","íŒ¨ì…˜","ì‹í’ˆ","ê°€êµ¬","ë·°í‹°","ìŠ¤í¬ì¸ ","ë„ì„œ","ì™„êµ¬","ê¸°íƒ€"],r=v.filter(a=>{const x=a.name.toLowerCase().includes(t.toLowerCase())||a.tenant.toLowerCase().includes(t.toLowerCase()),z=c==="all"||a.status===c,S=w==="all"||a.category===w;return x&&z&&S}),g=(a,x,z="")=>{I(v.map(E=>E.id===a?{...E,status:x,...z&&{rejectionReason:z}}:E)),alert(`ìƒí’ˆì´ ${x==="ìŠ¹ì¸ë¨"?"ìŠ¹ì¸":"ë°˜ë ¤"}ë˜ì—ˆìŠµë‹ˆë‹¤.`)},_=a=>{N(a),o(!0)},D=a=>({ìŠ¹ì¸ëŒ€ê¸°:"badge-warning",ìŠ¹ì¸ë¨:"badge-success",ìŠ¹ì¸ê±°ë¶€:"badge-danger"})[a]||"badge-info",k=v.filter(a=>a.status==="ìŠ¹ì¸ëŒ€ê¸°").length,M=v.filter(a=>a.status==="ìŠ¹ì¸ë¨").length,f=v.filter(a=>a.status==="ìŠ¹ì¸ê±°ë¶€").length,B=[{id:1,product:"ê°¤ëŸ­ì‹œ S24 ìš¸íŠ¸ë¼",tenant:"ì‚¼ì„±ì „ì",action:"ìŠ¹ì¸ë¨",timestamp:"2024-01-15 14:30",status:"success"},{id:2,product:"LG OLED TV 65ì¸ì¹˜",tenant:"LGì „ì",action:"ìŠ¹ì¸ë¨",timestamp:"2024-01-15 13:45",status:"success"},{id:3,product:"ë‚˜ì´í‚¤ ì—ì–´ë§¥ìŠ¤",tenant:"ì‹ ì„¸ê³„ì¸í„°ë‚´ì…”ë‚ ",action:"ë°˜ë ¤ë¨",timestamp:"2024-01-15 12:20",status:"danger"},{id:4,product:"ì• í”Œ ì•„ì´í° 15 Pro",tenant:"ì• í”Œì½”ë¦¬ì•„",action:"ìŠ¹ì¸ ëŒ€ê¸°",timestamp:"2024-01-15 11:15",status:"warning"}],W=a=>({success:"badge-success",danger:"badge-danger",warning:"badge-warning"})[a]||"badge-info";return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:"ìƒí’ˆ ìŠ¹ì¸ ê´€ë¦¬"}),k>0&&e.jsxs("div",{className:"alert alert-warning",children:[e.jsx(Be,{size:16}),"ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì¸ ìƒí’ˆì´ ",k,"ê°œ ìˆìŠµë‹ˆë‹¤."]})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:"#ffc107"},children:e.jsx(Te,{size:20})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"ìŠ¹ì¸ ëŒ€ê¸°"}),e.jsxs("p",{className:"stat-value",children:[k,"ê±´"]}),e.jsx("p",{className:"stat-change",children:"+5ê±´"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:"#28a745"},children:e.jsx(je,{size:20})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"ìŠ¹ì¸ ì™„ë£Œ"}),e.jsxs("p",{className:"stat-value",children:[M,"ê±´"]}),e.jsx("p",{className:"stat-change",children:"+12ê±´"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:"#dc3545"},children:e.jsx(De,{size:20})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"ë°˜ë ¤ ê±´ìˆ˜"}),e.jsxs("p",{className:"stat-value",children:[f,"ê±´"]}),e.jsx("p",{className:"stat-change",children:"-2ê±´"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:"#007bff"},children:e.jsx(_e,{size:20})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"í‰ê·  ì²˜ë¦¬ì‹œê°„"}),e.jsx("p",{className:"stat-value",children:"2.3ì¼"}),e.jsx("p",{className:"stat-change",children:"-0.5ì¼"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:"ìµœê·¼ ìŠ¹ì¸ í™œë™"})}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ìƒí’ˆëª…"}),e.jsx("th",{children:"ì…ì ì‚¬"}),e.jsx("th",{children:"ì²˜ë¦¬ë‚´ìš©"}),e.jsx("th",{children:"ì²˜ë¦¬ì‹œê°„"}),e.jsx("th",{children:"ìƒíƒœ"})]})}),e.jsx("tbody",{children:B.map(a=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:"600"},children:a.product}),e.jsx("td",{children:a.tenant}),e.jsx("td",{children:a.action}),e.jsx("td",{children:a.timestamp}),e.jsx("td",{children:e.jsx("span",{className:`badge ${W(a.status)}`,children:a.action})})]},a.id))})]})})]}),e.jsxs("div",{className:"search-filter-bar",children:[e.jsxs("div",{className:"search-box",children:[e.jsx(Ue,{size:16}),e.jsx("input",{type:"text",placeholder:"ìƒí’ˆëª…, ì…ì ì‚¬ëª…ìœ¼ë¡œ ê²€ìƒ‰...",value:t,onChange:a=>l(a.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx(Fe,{size:16}),e.jsx("select",{value:c,onChange:a=>i(a.target.value),children:u.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx(Fe,{size:16}),e.jsxs("select",{value:w,onChange:a=>h(a.target.value),children:[e.jsx("option",{value:"all",children:"ì „ì²´ ì¹´í…Œê³ ë¦¬"}),d.map(a=>e.jsx("option",{value:a,children:a},a))]})]})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ìƒí’ˆ ì´ë¯¸ì§€"}),e.jsx("th",{children:"ìƒí’ˆëª…"}),e.jsx("th",{children:"ì…ì ì‚¬"}),e.jsx("th",{children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("th",{children:"ê°€ê²©"}),e.jsx("th",{children:"ì¬ê³ "}),e.jsx("th",{children:"ìƒíƒœ"}),e.jsx("th",{children:"ë“±ë¡ì¼"}),e.jsx("th",{children:"ì‘ì—…"})]})}),e.jsx("tbody",{children:r.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{src:a.imageUrl,alt:a.name,style:{width:"50px",height:"50px",objectFit:"cover",borderRadius:"4px"}})}),e.jsx("td",{children:e.jsxs("div",{className:"product-info",children:[e.jsx("strong",{children:a.name}),e.jsx("small",{style:{color:"#666",display:"block"},children:a.description})]})}),e.jsx("td",{children:e.jsxs("div",{className:"tenant-info",children:[e.jsx(ye,{size:14}),e.jsx("span",{children:a.tenant})]})}),e.jsx("td",{children:a.category}),e.jsxs("td",{children:["â‚©",a.price.toLocaleString()]}),e.jsxs("td",{children:[a.stock,"ê°œ"]}),e.jsx("td",{children:e.jsx("span",{className:`badge ${D(a.status)}`,children:a.status})}),e.jsx("td",{children:a.submittedDate}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>_(a),children:e.jsx(we,{size:14})}),a.status==="ìŠ¹ì¸ëŒ€ê¸°"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>g(a.id,"ìŠ¹ì¸ë¨"),children:e.jsx(je,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>{const x=prompt("ë°˜ë ¤ ì‚¬ìœ ë¥¼ ì…ë ¥í•˜ì„¸ìš”:");x&&g(a.id,"ìŠ¹ì¸ê±°ë¶€",x)},children:e.jsx(De,{size:14})})]})]})})]},a.id))})]})}),e.jsxs(fe,{isOpen:j,onClose:()=>o(!1),title:"ìƒí’ˆ ìƒì„¸ ì •ë³´",children:[y&&e.jsxs("div",{className:"product-details",children:[e.jsx("div",{className:"product-image-section",children:e.jsx("img",{src:y.imageUrl,alt:y.name,style:{width:"200px",height:"200px",objectFit:"cover",borderRadius:"8px"}})}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"ê¸°ë³¸ ì •ë³´"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ìƒí’ˆëª…"}),e.jsx("span",{children:y.name})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì…ì ì‚¬"}),e.jsx("span",{children:y.tenant})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("span",{children:y.category})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ê°€ê²©"}),e.jsxs("span",{children:["â‚©",y.price.toLocaleString()]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì¬ê³ "}),e.jsxs("span",{children:[y.stock,"ê°œ"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ìˆ˜ìˆ˜ë£Œìœ¨"}),e.jsxs("span",{children:[y.commission,"%"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ìƒíƒœ"}),e.jsx("span",{className:`badge ${D(y.status)}`,children:y.status})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ë“±ë¡ì¼"}),e.jsx("span",{children:y.submittedDate})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"ìƒí’ˆ ì„¤ëª…"}),e.jsx("p",{children:y.description})]}),y.rejectionReason&&e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"ë°˜ë ¤ ì‚¬ìœ "}),e.jsx("div",{className:"alert alert-danger",children:y.rejectionReason})]})]}),e.jsxs("div",{className:"modal-actions",children:[y&&y.status==="ìŠ¹ì¸ëŒ€ê¸°"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn btn-success",onClick:()=>{g(y.id,"ìŠ¹ì¸ë¨"),o(!1)},children:[e.jsx(je,{size:16}),"ìŠ¹ì¸"]}),e.jsxs("button",{className:"btn btn-danger",onClick:()=>{const a=prompt("ë°˜ë ¤ ì‚¬ìœ ë¥¼ ì…ë ¥í•˜ì„¸ìš”:");a&&(g(y.id,"ìŠ¹ì¸ê±°ë¶€",a),o(!1))},children:[e.jsx(De,{size:16}),"ë°˜ë ¤"]})]}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>o(!1),children:"ë‹«ê¸°"})]})]})]})},ea=()=>{Ce();const[t,l]=n.useState("general"),[c,i]=n.useState(!1),[w,h]=n.useState(null),[j,o]=n.useState([{id:1,name:"ì „ìì œí’ˆ í’ˆì§ˆ ê¸°ì¤€",category:"ì „ìì œí’ˆ",description:"ì „ìì œí’ˆì˜ í’ˆì§ˆ ë° ì•ˆì „ì„± ê¸°ì¤€",criteria:["KC ì¸ì¦ í•„ìˆ˜","ì œí’ˆ ë³´ì¦ ê¸°ê°„ 1ë…„ ì´ìƒ","A/S ì„¼í„° ë³´ìœ ","í™˜ë¶ˆ ì •ì±… ëª…ì‹œ"],isActive:!0,createdAt:"2024-01-01",updatedAt:"2024-01-15"},{id:2,name:"íŒ¨ì…˜ì˜ë¥˜ í’ˆì§ˆ ê¸°ì¤€",category:"íŒ¨ì…˜ì˜ë¥˜",description:"íŒ¨ì…˜ì˜ë¥˜ì˜ í’ˆì§ˆ ë° ì›ì‚°ì§€ ê¸°ì¤€",criteria:["ì›ì‚°ì§€ í‘œì‹œ í•„ìˆ˜","ì†Œì¬ ì„±ë¶„ í‘œì‹œ","ì‚¬ì´ì¦ˆ ê°€ì´ë“œ ì œê³µ","ì„¸íƒ ë°©ë²• ëª…ì‹œ"],isActive:!0,createdAt:"2024-01-01",updatedAt:"2024-01-10"},{id:3,name:"í™”ì¥í’ˆ ì•ˆì „ ê¸°ì¤€",category:"í™”ì¥í’ˆ",description:"í™”ì¥í’ˆì˜ ì•ˆì „ì„± ë° ì„±ë¶„ ê¸°ì¤€",criteria:["ì‹ì•½ì²˜ í—ˆê°€ í•„ìˆ˜","ì„±ë¶„ í‘œì‹œ ì˜ë¬´","ì‚¬ìš©ê¸°í•œ ëª…ì‹œ","ì•Œë ˆë¥´ê¸° ì£¼ì˜ì‚¬í•­"],isActive:!1,createdAt:"2024-01-05",updatedAt:"2024-01-12"}]),[y,N]=n.useState({autoApproval:!1,approvalTimeLimit:3,requireDocumentation:!0,notificationEnabled:!0,qualityThreshold:80}),[v,I]=n.useState({name:"",category:"",description:"",criteria:[""]}),u=()=>{alert("ì¼ë°˜ ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.")},d=()=>{if(!v.name||!v.category){alert("ì •ì±…ëª…ê³¼ ì¹´í…Œê³ ë¦¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}const B={id:Date.now(),...v,isActive:!0,createdAt:new Date().toISOString().split("T")[0],updatedAt:new Date().toISOString().split("T")[0]};o([...j,B]),I({name:"",category:"",description:"",criteria:[""]}),i(!1)},r=B=>{h(B),I({name:B.name,category:B.category,description:B.description,criteria:[...B.criteria]}),i(!0)},g=()=>{if(!v.name||!v.category){alert("ì •ì±…ëª…ê³¼ ì¹´í…Œê³ ë¦¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}o(j.map(B=>B.id===w.id?{...B,...v,updatedAt:new Date().toISOString().split("T")[0]}:B)),I({name:"",category:"",description:"",criteria:[""]}),h(null),i(!1)},_=B=>{window.confirm("ì •ì±…ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&o(j.filter(W=>W.id!==B))},D=B=>{o(j.map(W=>W.id===B?{...W,isActive:!W.isActive}:W))},k=()=>{I({...v,criteria:[...v.criteria,""]})},M=B=>{const W=v.criteria.filter((a,x)=>x!==B);I({...v,criteria:W})},f=(B,W)=>{const a=[...v.criteria];a[B]=W,I({...v,criteria:a})};return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"page-title",children:[e.jsx(ns,{size:24}),e.jsx("h1",{children:"ìŠ¹ì¸ ì •ì±… ì„¤ì •"})]}),e.jsx("p",{className:"page-description",children:"ìƒí’ˆ ìŠ¹ì¸ ê¸°ì¤€ê³¼ ì •ì±…ì„ ê´€ë¦¬í•©ë‹ˆë‹¤."})]}),e.jsxs("div",{className:"tab-navigation",children:[e.jsx("button",{className:`tab-button ${t==="general"?"active":""}`,onClick:()=>l("general"),children:"ì¼ë°˜ ì„¤ì •"}),e.jsx("button",{className:`tab-button ${t==="policies"?"active":""}`,onClick:()=>l("policies"),children:"ìŠ¹ì¸ ì •ì±…"})]}),t==="general"&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h2",{className:"card-title",children:"ì¼ë°˜ ì„¤ì •"}),e.jsxs("button",{className:"btn btn-primary",onClick:u,children:[e.jsx(ms,{size:16}),"ì €ì¥"]})]}),e.jsx("div",{style:{padding:"1.5rem"},children:e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{className:"setting-group",children:[e.jsxs("label",{className:"setting-label",children:[e.jsx("input",{type:"checkbox",checked:y.autoApproval,onChange:B=>N({...y,autoApproval:B.target.checked})}),"ìë™ ìŠ¹ì¸ í™œì„±í™”"]}),e.jsx("p",{className:"setting-description",children:"íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ìƒí’ˆì€ ìë™ìœ¼ë¡œ ìŠ¹ì¸ë©ë‹ˆë‹¤."})]}),e.jsxs("div",{className:"setting-group",children:[e.jsx("label",{className:"setting-label",children:"ìŠ¹ì¸ ì²˜ë¦¬ ê¸°í•œ (ì¼)"}),e.jsx("input",{type:"number",min:"1",max:"30",value:y.approvalTimeLimit,onChange:B=>N({...y,approvalTimeLimit:parseInt(B.target.value)}),className:"form-input"}),e.jsx("p",{className:"setting-description",children:"ìƒí’ˆ ìŠ¹ì¸ ìš”ì²­ í›„ ì²˜ë¦¬í•´ì•¼ í•  ê¸°í•œì„ ì„¤ì •í•©ë‹ˆë‹¤."})]}),e.jsxs("div",{className:"setting-group",children:[e.jsxs("label",{className:"setting-label",children:[e.jsx("input",{type:"checkbox",checked:y.requireDocumentation,onChange:B=>N({...y,requireDocumentation:B.target.checked})}),"ì„œë¥˜ ì œì¶œ í•„ìˆ˜"]}),e.jsx("p",{className:"setting-description",children:"ìƒí’ˆ ë“±ë¡ ì‹œ ê´€ë ¨ ì„œë¥˜ ì œì¶œì„ í•„ìˆ˜ë¡œ í•©ë‹ˆë‹¤."})]}),e.jsxs("div",{className:"setting-group",children:[e.jsxs("label",{className:"setting-label",children:[e.jsx("input",{type:"checkbox",checked:y.notificationEnabled,onChange:B=>N({...y,notificationEnabled:B.target.checked})}),"ì•Œë¦¼ í™œì„±í™”"]}),e.jsx("p",{className:"setting-description",children:"ìŠ¹ì¸ ìƒíƒœ ë³€ê²½ ì‹œ ê´€ë ¨ìì—ê²Œ ì•Œë¦¼ì„ ë°œì†¡í•©ë‹ˆë‹¤."})]}),e.jsxs("div",{className:"setting-group",children:[e.jsx("label",{className:"setting-label",children:"í’ˆì§ˆ ê¸°ì¤€ ì„ê³„ê°’ (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:y.qualityThreshold,onChange:B=>N({...y,qualityThreshold:parseInt(B.target.value)}),className:"form-input"}),e.jsx("p",{className:"setting-description",children:"ìë™ ìŠ¹ì¸ì„ ìœ„í•œ ìµœì†Œ í’ˆì§ˆ ê¸°ì¤€ ì ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤."})]})]})})]}),t==="policies"&&e.jsx("div",{children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h2",{className:"card-title",children:"ìŠ¹ì¸ ì •ì±… ê´€ë¦¬"}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>{h(null),I({name:"",category:"",description:"",criteria:[""]}),i(!0)},children:[e.jsx(qe,{size:16}),"ì •ì±… ì¶”ê°€"]})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ì •ì±…ëª…"}),e.jsx("th",{children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("th",{children:"ìƒíƒœ"}),e.jsx("th",{children:"ìƒì„±ì¼"}),e.jsx("th",{children:"ìˆ˜ì •ì¼"}),e.jsx("th",{children:"ì‘ì—…"})]})}),e.jsx("tbody",{children:j.map(B=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600"},children:B.name}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#666"},children:B.description})]})}),e.jsx("td",{children:e.jsx("span",{className:"badge badge-info",children:B.category})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${B.isActive?"badge-success":"badge-secondary"}`,children:B.isActive?"í™œì„±":"ë¹„í™œì„±"})}),e.jsx("td",{children:B.createdAt}),e.jsx("td",{children:B.updatedAt}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-sm",onClick:()=>D(B.id),children:B.isActive?"ë¹„í™œì„±í™”":"í™œì„±í™”"}),e.jsx("button",{className:"btn btn-sm",onClick:()=>r(B),children:e.jsx(rs,{size:14})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>_(B.id),children:e.jsx(Ye,{size:14})})]})})]},B.id))})]})})]})}),c&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:w?"ì •ì±… ìˆ˜ì •":"ì •ì±… ì¶”ê°€"}),e.jsx("button",{className:"btn btn-sm",onClick:()=>{i(!1),h(null),I({name:"",category:"",description:"",criteria:[""]})},children:"Ã—"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"ì •ì±…ëª… *"}),e.jsx("input",{type:"text",value:v.name,onChange:B=>I({...v,name:B.target.value}),className:"form-input",placeholder:"ì •ì±…ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"ì¹´í…Œê³ ë¦¬ *"}),e.jsxs("select",{value:v.category,onChange:B=>I({...v,category:B.target.value}),className:"form-input",children:[e.jsx("option",{value:"",children:"ì¹´í…Œê³ ë¦¬ ì„ íƒ"}),e.jsx("option",{value:"ì „ìì œí’ˆ",children:"ì „ìì œí’ˆ"}),e.jsx("option",{value:"íŒ¨ì…˜ì˜ë¥˜",children:"íŒ¨ì…˜ì˜ë¥˜"}),e.jsx("option",{value:"í™”ì¥í’ˆ",children:"í™”ì¥í’ˆ"}),e.jsx("option",{value:"ì‹í’ˆ",children:"ì‹í’ˆ"}),e.jsx("option",{value:"ê°€êµ¬",children:"ê°€êµ¬"}),e.jsx("option",{value:"ê¸°íƒ€",children:"ê¸°íƒ€"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"ì„¤ëª…"}),e.jsx("textarea",{value:v.description,onChange:B=>I({...v,description:B.target.value}),className:"form-input",rows:"3",placeholder:"ì •ì±…ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"ìŠ¹ì¸ ê¸°ì¤€"}),v.criteria.map((B,W)=>e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx("input",{type:"text",value:B,onChange:a=>f(W,a.target.value),className:"form-input",placeholder:"ìŠ¹ì¸ ê¸°ì¤€ì„ ì…ë ¥í•˜ì„¸ìš”"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-danger",onClick:()=>M(W),children:e.jsx(Ye,{size:14})})]},W)),e.jsxs("button",{type:"button",className:"btn btn-sm",onClick:k,children:[e.jsx(qe,{size:14}),"ê¸°ì¤€ ì¶”ê°€"]})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>{i(!1),h(null),I({name:"",category:"",description:"",criteria:[""]})},children:"ì·¨ì†Œ"}),e.jsx("button",{className:"btn btn-primary",onClick:w?g:d,children:w?"ìˆ˜ì •":"ì¶”ê°€"})]})]})})]})},sa=()=>{const[t,l]=n.useState(""),[c,i]=n.useState("all"),[w,h]=n.useState(!1),[j,o]=n.useState(!1),[y,N]=n.useState(!1),[v,I]=n.useState(!1),[u,d]=n.useState(null),[r,g]=n.useState(null),[_,D]=n.useState(null),[k,M]=n.useState(1),[f,B]=n.useState(!0),[W,a]=n.useState(!1),[x,z]=n.useState(null),[S,E]=n.useState({companyName:"",representative:"",email:"",phone:"",businessNumber:"",address:"",description:""}),[T,U]=n.useState([]);n.useEffect(()=>{p()},[]);const p=async()=>{try{B(!0),z(null);const{data:b,error:s}=await O.from("brand_admins").select("*").order("joined_at",{ascending:!1});if(s)throw s;const{data:R,error:L}=await O.from("products").select("brand").in("brand",(b==null?void 0:b.map(ne=>ne.name))||[]);L&&console.error("ìƒí’ˆ ìˆ˜ ì¡°íšŒ ì˜¤ë¥˜:",L);const F={};R==null||R.forEach(ne=>{F[ne.brand]=(F[ne.brand]||0)+1});const X=(b==null?void 0:b.map(ne=>({id:ne.id,companyName:ne.name,representative:"ëŒ€í‘œì ì •ë³´ ì—†ìŒ",email:ne.email,phone:ne.phone||"-",businessNumber:ne.business_number||"-",productCount:F[ne.name]||0,status:C(ne.status),joinDate:new Date(ne.joined_at).toLocaleDateString("ko-KR"),monthlySales:0,commission:A(ne.grade),address:ne.address||"-",description:`${ne.name} ë¸Œëœë“œ`,grade:ne.grade,logoUrl:ne.logo_url,terminatedAt:ne.terminated_at,originalStatus:ne.status})))||[];U(X),console.log("ì…ì ì‚¬ ë°ì´í„° ë¡œë“œ ì™„ë£Œ:",X.length,"ê°œ")}catch(b){console.error("ì…ì ì‚¬ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:",b),z("ì…ì ì‚¬ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{B(!1)}},V=async()=>{a(!0),await p(),a(!1)},C=b=>({active:"ìŠ¹ì¸ë¨",suspended:"ì¼ì‹œì •ì§€",terminated:"ê³„ì•½ì¢…ë£Œ"})[b]||"ìŠ¹ì¸ëŒ€ê¸°",A=b=>({1:3,2:4,3:5})[b]||5,J=b=>{const s={1:{name:"1ë“±ê¸‰ (í”„ë¦¬ë¯¸ì—„)",commission:"3.0%",benefits:["ìµœìš°ì„  ìƒí’ˆ ë…¸ì¶œ","í”„ë¦¬ë¯¸ì—„ ë§ˆì¼€íŒ… ì§€ì›","ì „ë‹´ ë§¤ë‹ˆì € ë°°ì •","ìš°ì„  ê³ ê° ì§€ì›","íŠ¹ë³„ í”„ë¡œëª¨ì…˜ ì°¸ì—¬","ìµœì € ìˆ˜ìˆ˜ë£Œìœ¨ ì ìš©"]},2:{name:"2ë“±ê¸‰ (ìŠ¤íƒ ë‹¤ë“œ)",commission:"4.0%",benefits:["ìš°ì„  ìƒí’ˆ ë…¸ì¶œ","ë§ˆì¼€íŒ… ì§€ì›","ì •ê¸° ìƒë‹´ ì„œë¹„ìŠ¤","ê³ ê° ì§€ì›","í”„ë¡œëª¨ì…˜ ì°¸ì—¬"]},3:{name:"3ë“±ê¸‰ (ë² ì´ì§)",commission:"5.0%",benefits:["ê¸°ë³¸ ìƒí’ˆ ë…¸ì¶œ","ê¸°ë³¸ ë§ˆì¼€íŒ… ì§€ì›","ì´ë©”ì¼ ì§€ì›","ê¸°ë³¸ í”„ë¡œëª¨ì…˜ ì°¸ì—¬"]}};return s[b]||s[1]},H=[{value:"all",label:"ì „ì²´"},{value:"ìŠ¹ì¸ëŒ€ê¸°",label:"ìŠ¹ì¸ëŒ€ê¸°"},{value:"ìŠ¹ì¸ë¨",label:"ìŠ¹ì¸ë¨"},{value:"ì¼ì‹œì •ì§€",label:"ì¼ì‹œì •ì§€"},{value:"ê³„ì•½ì¢…ë£Œ",label:"ê³„ì•½ì¢…ë£Œ"}],ee=T.filter(b=>{const s=b.companyName.toLowerCase().includes(t.toLowerCase())||b.representative.toLowerCase().includes(t.toLowerCase())||b.email.toLowerCase().includes(t.toLowerCase()),R=c==="all"||b.status===c;return s&&R}),re=async(b,s)=>{try{const L={ìŠ¹ì¸ë¨:"active",ì¼ì‹œì •ì§€:"suspended",ê³„ì•½ì¢…ë£Œ:"terminated"}[s];if(!L){alert("ì˜¬ë°”ë¥´ì§€ ì•Šì€ ìƒíƒœì…ë‹ˆë‹¤.");return}const{error:F}=await O.from("brand_admins").update({status:L,terminated_at:L==="terminated"?new Date().toISOString():null}).eq("id",b);if(F)throw F;U(T.map(X=>X.id===b?{...X,status:s,originalStatus:L}:X)),alert(`ì…ì ì‚¬ ìƒíƒœê°€ '${s}'ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`)}catch(R){console.error("ìƒíƒœ ë³€ê²½ ì˜¤ë¥˜:",R),alert("ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}},$=async()=>{if(!S.companyName||!S.email){alert("í•„ìˆ˜ ì •ë³´(íšŒì‚¬ëª…, ì´ë©”ì¼)ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}try{const{data:b,error:s}=await O.from("brand_admins").insert([{name:S.companyName,email:S.email,phone:S.phone||null,business_number:S.businessNumber||null,address:S.address||null,grade:3,status:"active"}]).select().single();if(s)throw s;const R={id:b.id,companyName:b.name,representative:"ëŒ€í‘œì ì •ë³´ ì—†ìŒ",email:b.email,phone:b.phone||"-",businessNumber:b.business_number||"-",productCount:0,status:C(b.status),joinDate:new Date(b.joined_at).toLocaleDateString("ko-KR"),monthlySales:0,commission:A(b.grade),address:b.address||"-",description:`${b.name} ë¸Œëœë“œ`,grade:b.grade,logoUrl:b.logo_url,terminatedAt:b.terminated_at,originalStatus:b.status};U([R,...T]),E({companyName:"",representative:"",email:"",phone:"",businessNumber:"",address:"",description:""}),h(!1),alert("ì…ì ì‚¬ê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(b){console.error("ì…ì ì‚¬ ë“±ë¡ ì˜¤ë¥˜:",b),alert("ì…ì ì‚¬ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}},G=b=>{d(b),setTimeout(()=>{o(!0)},0)},oe=b=>{g(b),N(!0)},de=async()=>{if(r)try{const{error:b}=await O.from("brand_admins").update({status:"terminated",terminated_at:new Date().toISOString()}).eq("id",r.id);if(b)throw b;const{error:s}=await O.from("products").update({status:"hidden"}).eq("brand",r.companyName);s&&console.warn("ìƒí’ˆ ìƒíƒœ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:",s),U(T.map(R=>R.id===r.id?{...R,status:"ê³„ì•½ì¢…ë£Œ",originalStatus:"terminated",terminatedAt:new Date().toISOString()}:R)),N(!1),g(null),alert(`'${r.companyName}'ì˜ ê³„ì•½ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.
í•´ë‹¹ ë¸Œëœë“œì˜ ëª¨ë“  ìƒí’ˆì´ ìˆ¨ê¹€ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.`)}catch(b){console.error("ê³„ì•½ ì¢…ë£Œ ì˜¤ë¥˜:",b),alert("ê³„ì•½ ì¢…ë£Œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}},ie=b=>{D(b),M(b.grade),I(!0)},Y=async()=>{if(_)try{const{error:b}=await O.from("brand_admins").update({grade:k}).eq("id",_.id);if(b)throw b;U(T.map(R=>R.id===_.id?{...R,grade:k,commission:A(k)}:R)),u&&u.id===_.id&&d({...u,grade:k,commission:A(k)}),I(!1),D(null);const s=J(k);alert(`'${_.companyName}'ì˜ ë“±ê¸‰ì´ ${s.name}ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.
ìˆ˜ìˆ˜ë£Œìœ¨: ${s.commission}`)}catch(b){console.error("ë“±ê¸‰ ë³€ê²½ ì˜¤ë¥˜:",b),alert("ë“±ê¸‰ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}},se=b=>({ìŠ¹ì¸ëŒ€ê¸°:"badge-warning",ìŠ¹ì¸ë¨:"badge-success",ì¼ì‹œì •ì§€:"badge-warning",ê³„ì•½ì¢…ë£Œ:"badge-secondary"})[b]||"badge-info";return f?e.jsx("div",{className:"page",children:e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",flexDirection:"column",gap:"1rem"},children:[e.jsx(Se,{size:32,className:"animate-spin"}),e.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:"ì…ì ì‚¬ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]})}):e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"ì…ì ì‚¬ ê´€ë¦¬"}),e.jsxs("p",{style:{color:"#666",margin:"0.5rem 0 0 0"},children:["ì´ ",T.length,"ê°œì˜ ì…ì ì‚¬ê°€ ë“±ë¡ë˜ì–´ ìˆìŠµë‹ˆë‹¤."]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:"btn btn-secondary",onClick:V,disabled:W,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ps,{size:16,className:W?"animate-spin":""}),W?"ìƒˆë¡œê³ ì¹¨ ì¤‘...":"ìƒˆë¡œê³ ì¹¨"]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>h(!0),children:[e.jsx(qe,{size:16}),"ìƒˆ ì…ì ì‚¬ ë“±ë¡"]})]})]}),x&&e.jsxs("div",{style:{padding:"1rem",margin:"1rem 0",background:"#fee",border:"1px solid #fcc",borderRadius:"8px",color:"#c33"},children:[e.jsx("strong",{children:"ì˜¤ë¥˜:"})," ",x,e.jsx("button",{onClick:p,style:{marginLeft:"1rem",padding:"0.25rem 0.5rem",background:"#c33",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"ë‹¤ì‹œ ì‹œë„"})]}),e.jsxs("div",{className:"card",style:{marginTop:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{style:{margin:0},children:"ê²€ìƒ‰ ë° í•„í„°"}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#666",fontSize:"0.9rem"},children:e.jsxs("span",{children:["ì´ ",ee.length,"ê°œ ê²°ê³¼"]})})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{position:"relative",flex:"1",minWidth:"300px",maxWidth:"400px"},children:[e.jsx("div",{style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#6b7280",zIndex:1},children:e.jsx(Ue,{size:16})}),e.jsx("input",{type:"text",placeholder:"ì…ì ì‚¬ëª…, ëŒ€í‘œìëª…, ì´ë©”ì¼ë¡œ ê²€ìƒ‰...",value:t,onChange:b=>l(b.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"0.875rem",backgroundColor:"#fff",transition:"all 0.2s ease",outline:"none"},onFocus:b=>{b.target.style.borderColor="#3b82f6",b.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:b=>{b.target.style.borderColor="#d1d5db",b.target.style.boxShadow="none"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",minWidth:"200px"},children:[e.jsx(Fe,{size:16,style:{color:"#6b7280"}}),e.jsx("select",{value:c,onChange:b=>i(b.target.value),style:{flex:1,padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"0.875rem",backgroundColor:"#fff",cursor:"pointer",outline:"none",transition:"all 0.2s ease"},onFocus:b=>{b.target.style.borderColor="#3b82f6",b.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:b=>{b.target.style.borderColor="#d1d5db",b.target.style.boxShadow="none"},children:H.map(b=>e.jsx("option",{value:b.value,children:b.label},b.value))})]}),(t||c!=="all")&&e.jsxs("button",{onClick:()=>{l(""),i("all")},style:{padding:"0.75rem 1rem",backgroundColor:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"0.875rem",color:"#374151",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:b=>{b.target.style.backgroundColor="#e5e7eb"},onMouseLeave:b=>{b.target.style.backgroundColor="#f3f4f6"},children:[e.jsx(De,{size:14}),"ì´ˆê¸°í™”"]})]})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ë¡œê³ "}),e.jsx("th",{children:"ì…ì ì‚¬ëª…"}),e.jsx("th",{children:"ì´ë©”ì¼"}),e.jsx("th",{children:"ìƒí’ˆ ìˆ˜"}),e.jsx("th",{children:"ìƒíƒœ"}),e.jsx("th",{children:"ì…ì ì¼"}),e.jsx("th",{children:"ë“±ê¸‰"}),e.jsx("th",{children:"ìˆ˜ìˆ˜ë£Œìœ¨"}),e.jsx("th",{children:"ì‘ì—…"})]})}),e.jsx("tbody",{children:ee.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"9",style:{textAlign:"center",padding:"2rem",color:"#666"},children:[e.jsx(ye,{size:48,style:{marginBottom:"1rem",opacity:.5}}),e.jsx("p",{children:"ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ì…ì ì‚¬ê°€ ì—†ìŠµë‹ˆë‹¤."})]})}):ee.map(b=>e.jsxs("tr",{children:[e.jsxs("td",{children:[b.logoUrl?e.jsx("img",{src:b.logoUrl,alt:`${b.companyName} ë¡œê³ `,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"6px",border:"1px solid #e5e7eb"},onError:s=>{s.target.style.display="none",s.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{style:{width:"40px",height:"40px",background:"#f3f4f6",borderRadius:"6px",display:b.logoUrl?"none":"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e5e7eb"},children:e.jsx(ye,{size:20,color:"#9ca3af"})})]}),e.jsx("td",{children:e.jsx("div",{className:"company-info",children:e.jsx("span",{style:{fontWeight:"600"},children:b.companyName})})}),e.jsx("td",{children:b.email}),e.jsx("td",{children:e.jsxs("span",{style:{fontWeight:"600",color:b.productCount>10?"#28a745":b.productCount>0?"#ffc107":"#6c757d"},children:[b.productCount.toLocaleString(),"ê°œ"]})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${se(b.status)}`,children:b.status})}),e.jsx("td",{children:b.joinDate}),e.jsx("td",{children:e.jsxs("span",{style:{fontWeight:"600",color:b.grade===1?"#dc3545":b.grade===2?"#ffc107":"#28a745"},children:[b.grade,"ë“±ê¸‰"]})}),e.jsxs("td",{children:[b.commission,"%"]}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>G(b),title:"ìƒì„¸ë³´ê¸°",children:e.jsx(we,{size:14})}),b.status==="ìŠ¹ì¸ë¨"&&e.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>re(b.id,"ì¼ì‹œì •ì§€"),title:"ì¼ì‹œì •ì§€",children:e.jsx(De,{size:14})}),b.status==="ì¼ì‹œì •ì§€"&&e.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>re(b.id,"ìŠ¹ì¸ë¨"),title:"í™œì„±í™”",children:e.jsx(je,{size:14})}),(b.status==="ìŠ¹ì¸ë¨"||b.status==="ì¼ì‹œì •ì§€")&&e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>oe(b),title:"ê³„ì•½ ì¢…ë£Œ",style:{backgroundColor:"#dc3545",color:"white",border:"1px solid #dc3545"},children:e.jsx(De,{size:14})})]})})]},b.id))})]})}),e.jsxs(fe,{isOpen:w,onClose:()=>h(!1),title:"ìƒˆ ì…ì ì‚¬ ë“±ë¡",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"íšŒì‚¬ëª… *"}),e.jsx("input",{type:"text",value:S.companyName,onChange:b=>E({...S,companyName:b.target.value}),placeholder:"íšŒì‚¬ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ëŒ€í‘œìëª… *"}),e.jsx("input",{type:"text",value:S.representative,onChange:b=>E({...S,representative:b.target.value}),placeholder:"ëŒ€í‘œìëª…ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ì´ë©”ì¼ *"}),e.jsx("input",{type:"email",value:S.email,onChange:b=>E({...S,email:b.target.value}),placeholder:"ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ì „í™”ë²ˆí˜¸"}),e.jsx("input",{type:"tel",value:S.phone,onChange:b=>E({...S,phone:b.target.value}),placeholder:"ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸"}),e.jsx("input",{type:"text",value:S.businessNumber,onChange:b=>E({...S,businessNumber:b.target.value}),placeholder:"ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ì£¼ì†Œ"}),e.jsx("input",{type:"text",value:S.address,onChange:b=>E({...S,address:b.target.value}),placeholder:"ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ì„¤ëª…"}),e.jsx("textarea",{value:S.description,onChange:b=>E({...S,description:b.target.value}),placeholder:"ì—…ì²´ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”",rows:"3"})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>h(!1),children:"ì·¨ì†Œ"}),e.jsx("button",{className:"btn btn-primary",onClick:$,children:"ë“±ë¡"})]})]}),j&&u&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)"},children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9fafb",borderRadius:"8px 8px 0 0"},children:[e.jsx("h2",{style:{margin:0,fontSize:"1.25rem",fontWeight:"600",color:"#1f2937"},children:"ì…ì ì‚¬ ìƒì„¸ ì •ë³´"}),e.jsx("button",{onClick:()=>o(!1),style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#6b7280",padding:"0.25rem",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:b=>b.target.style.backgroundColor="#f3f4f6",onMouseLeave:b=>b.target.style.backgroundColor="transparent",children:e.jsx(ze,{size:20})})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem"},children:e.jsxs("div",{className:"tenant-details",children:[e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"ê¸°ë³¸ ì •ë³´"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"íšŒì‚¬ëª…"}),e.jsx("span",{children:u.companyName})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ë“±ê¸‰"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("span",{style:{fontWeight:"600",color:u.grade===1?"#dc3545":u.grade===2?"#ffc107":"#28a745"},children:[u.grade,"ë“±ê¸‰"]}),e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>ie(u),style:{padding:"0.25rem 0.5rem",fontSize:"0.75rem",border:"1px solid #d1d5db",borderRadius:"4px",backgroundColor:"white",color:"#374151",cursor:"pointer"},title:"ë“±ê¸‰ ë³€ê²½",children:"ë³€ê²½"})]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì´ë©”ì¼"}),e.jsx("span",{children:u.email})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì „í™”ë²ˆí˜¸"}),e.jsx("span",{children:u.phone})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸"}),e.jsx("span",{children:u.businessNumber})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ë“±ë¡ëœ ìƒí’ˆ ìˆ˜"}),e.jsxs("span",{style:{fontWeight:"600",color:u.productCount>10?"#28a745":u.productCount>0?"#ffc107":"#6c757d"},children:[u.productCount.toLocaleString(),"ê°œ"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì£¼ì†Œ"}),e.jsx("span",{children:u.address})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ì…ì ì¼"}),e.jsx("span",{children:u.joinDate})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ìƒíƒœ"}),e.jsx("span",{className:`badge ${se(u.status)}`,children:u.status})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ë¡œê³ "}),e.jsx("div",{children:u.logoUrl?e.jsx("img",{src:u.logoUrl,alt:`${u.companyName} ë¡œê³ `,style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"8px",border:"1px solid #e5e7eb"}}):e.jsx("div",{style:{width:"60px",height:"60px",background:"#f3f4f6",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e5e7eb"},children:e.jsx(ye,{size:24,color:"#9ca3af"})})})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"ìˆ˜ìˆ˜ë£Œìœ¨"}),e.jsxs("span",{children:[u.commission,"%"]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:"ì—…ì²´ ì„¤ëª…"}),e.jsx("p",{children:u.description})]})]})}),e.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",backgroundColor:"#f9fafb",borderRadius:"0 0 8px 8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[u&&u.status==="ìŠ¹ì¸ë¨"&&e.jsxs("button",{className:"btn btn-warning",onClick:()=>{o(!1),re(u.id,"ì¼ì‹œì •ì§€")},title:"ì¼ì‹œì •ì§€",children:[e.jsx(De,{size:14})," ì¼ì‹œì •ì§€"]}),u&&u.status==="ì¼ì‹œì •ì§€"&&e.jsxs("button",{className:"btn btn-success",onClick:()=>{o(!1),re(u.id,"ìŠ¹ì¸ë¨")},title:"í™œì„±í™”",children:[e.jsx(je,{size:14})," í™œì„±í™”"]}),u&&(u.status==="ìŠ¹ì¸ë¨"||u.status==="ì¼ì‹œì •ì§€")&&e.jsxs("button",{className:"btn btn-danger",onClick:()=>{o(!1),oe(u)},title:"ê³„ì•½ ì¢…ë£Œ",style:{backgroundColor:"#dc3545",color:"white",border:"1px solid #dc3545"},children:[e.jsx(De,{size:14})," ê³„ì•½ ì¢…ë£Œ"]})]}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>o(!1),style:{backgroundColor:"#6c757d",color:"white",border:"1px solid #6c757d",padding:"0.5rem 1rem",borderRadius:"4px",cursor:"pointer"},children:"ë‹«ê¸°"})]})]})}),e.jsx(fe,{isOpen:y,onClose:()=>{N(!1),g(null)},title:"ê³„ì•½ ì¢…ë£Œ í™•ì¸",children:r&&e.jsxs("div",{children:[e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#dc2626",fontWeight:"600",marginBottom:"0.5rem"},children:[e.jsx(De,{size:20}),e.jsx("span",{children:"ê²½ê³ "})]}),e.jsx("p",{style:{margin:0,color:"#7f1d1d",fontSize:"0.9rem"},children:"ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê³„ì•½ ì¢…ë£Œ í›„ì—ëŠ” ì…ì ì‚¬ê°€ ë” ì´ìƒ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h4",{style:{margin:"0 0 1rem 0",color:"#374151"},children:"ê³„ì•½ ì¢…ë£Œ ëŒ€ìƒ"}),e.jsx("div",{style:{padding:"1rem",backgroundColor:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1.1rem",color:"#1f2937"},children:r.companyName}),e.jsx("div",{style:{color:"#6b7280",fontSize:"0.9rem",marginTop:"0.25rem"},children:r.email})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"0.25rem"},children:"í˜„ì¬ ìƒíƒœ"}),e.jsx("span",{className:`badge ${se(r.status)}`,children:r.status})]})]})})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"8px",marginBottom:"1.5rem"},children:[e.jsx("h5",{style:{margin:"0 0 0.5rem 0",color:"#92400e"},children:"ê³„ì•½ ì¢…ë£Œ ì‹œ ì˜í–¥"}),e.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"#92400e",fontSize:"0.9rem"},children:[e.jsx("li",{children:"ì…ì ì‚¬ ê³„ì •ì´ ë¹„í™œì„±í™”ë©ë‹ˆë‹¤"}),e.jsx("li",{children:e.jsx("strong",{children:"ë“±ë¡ëœ ëª¨ë“  ìƒí’ˆì´ 'ìˆ¨ê¹€' ìƒíƒœë¡œ ë³€ê²½ë©ë‹ˆë‹¤"})}),e.jsx("li",{children:"ì¬ê³ ê°€ ìˆì–´ë„ ìƒí’ˆì´ ê³ ê°ì—ê²Œ ë…¸ì¶œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤"}),e.jsx("li",{children:"ìƒˆë¡œìš´ ì£¼ë¬¸ì„ ë°›ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("li",{children:"ê¸°ì¡´ ì£¼ë¬¸ì€ ì²˜ë¦¬ ì™„ë£Œê¹Œì§€ ìœ ì§€ë©ë‹ˆë‹¤"}),e.jsx("li",{children:"í•„ìš”ì‹œ ê´€ë¦¬ìê°€ ìƒí’ˆì„ ë‹¤ì‹œ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"}),e.jsx("li",{children:"ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>{N(!1),g(null)},children:"ì·¨ì†Œ"}),e.jsx("button",{className:"btn btn-danger",onClick:de,style:{backgroundColor:"#dc3545",borderColor:"#dc3545",color:"white"},children:"ê³„ì•½ ì¢…ë£Œ"})]})]})}),e.jsx(fe,{isOpen:v,onClose:()=>{I(!1),D(null)},title:"ì…ì ì‚¬ ë“±ê¸‰ ë³€ê²½",children:_&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h4",{style:{margin:"0 0 1rem 0",color:"#374151"},children:"ë“±ê¸‰ ë³€ê²½ ëŒ€ìƒ"}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1.1rem",color:"#1f2937"},children:_.companyName}),e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.9rem",marginTop:"0.25rem"},children:["í˜„ì¬ ë“±ê¸‰: ",J(_.grade).name]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ìƒˆ ë“±ê¸‰ ì„ íƒ"}),e.jsxs("select",{value:k,onChange:b=>M(parseInt(b.target.value)),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"0.875rem",backgroundColor:"#fff",cursor:"pointer",outline:"none"},children:[e.jsx("option",{value:1,children:"1ë“±ê¸‰ (í”„ë¦¬ë¯¸ì—„) - ìˆ˜ìˆ˜ë£Œ 3.0%"}),e.jsx("option",{value:2,children:"2ë“±ê¸‰ (ìŠ¤íƒ ë‹¤ë“œ) - ìˆ˜ìˆ˜ë£Œ 4.0%"}),e.jsx("option",{value:3,children:"3ë“±ê¸‰ (ë² ì´ì§) - ìˆ˜ìˆ˜ë£Œ 5.0%"})]})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",marginBottom:"1.5rem"},children:[e.jsxs("h5",{style:{margin:"0 0 0.5rem 0",color:"#0c4a6e"},children:[J(k).name," í˜œíƒ"]}),e.jsxs("div",{style:{color:"#0c4a6e",fontSize:"0.9rem"},children:[e.jsxs("div",{style:{marginBottom:"0.5rem",fontWeight:"600"},children:["ìˆ˜ìˆ˜ë£Œìœ¨: ",J(k).commission]}),e.jsx("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:J(k).benefits.map((b,s)=>e.jsx("li",{children:b},s))})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>{I(!1),D(null)},children:"ì·¨ì†Œ"}),e.jsx("button",{className:"btn btn-primary",onClick:Y,style:{backgroundColor:"#3b82f6",borderColor:"#3b82f6",color:"white"},children:"ë“±ê¸‰ ë³€ê²½"})]})]})})]})},ta=()=>{const t=Ce(),[l,c]=n.useState("month"),[i,w]=n.useState("overview"),h={overview:{totalTenants:156,newTenants:12,averageSales:245e4,satisfaction:4.2,growthRate:8.5},topTenants:[{name:"ì‚¼ì„±ì „ì",sales:125e6,products:45,satisfaction:4.5,growth:12.3},{name:"LGì „ì",sales:98e6,products:38,satisfaction:4.3,growth:8.7},{name:"ì• í”Œì½”ë¦¬ì•„",sales:156e6,products:52,satisfaction:4.7,growth:15.2},{name:"í˜„ëŒ€ìë™ì°¨",sales:67e6,products:23,satisfaction:4.1,growth:5.8},{name:"ê¸°ì•„ìë™ì°¨",sales:89e6,products:31,satisfaction:4.2,growth:9.1}],categoryDistribution:[{category:"ì „ìì œí’ˆ",count:45,percentage:28.8,sales:156e6},{category:"íŒ¨ì…˜ì˜ë¥˜",count:38,percentage:24.4,sales:123e6},{category:"í™”ì¥í’ˆ",count:25,percentage:16,sales:89e6},{category:"ì‹í’ˆ",count:22,percentage:14.1,sales:67e6},{category:"ê°€êµ¬",count:15,percentage:9.6,sales:45e6},{category:"ê¸°íƒ€",count:11,percentage:7.1,sales:32e6}],monthlyTrends:[{month:"1ì›”",newTenants:8,totalSales:42e7,satisfaction:4.1},{month:"2ì›”",newTenants:12,totalSales:4567e5,satisfaction:4.2},{month:"3ì›”",newTenants:15,totalSales:389e6,satisfaction:4},{month:"4ì›”",newTenants:10,totalSales:523e6,satisfaction:4.3},{month:"5ì›”",newTenants:18,totalSales:478e6,satisfaction:4.2},{month:"6ì›”",newTenants:12,totalSales:512e6,satisfaction:4.2}],performanceMetrics:[{metric:"í‰ê·  ë§¤ì¶œ",value:"â‚©2,450,000",target:"â‚©2,200,000",percentage:111.4},{metric:"ìƒí’ˆ ë‹¤ì–‘ì„±",value:"32ê°œ",target:"28ê°œ",percentage:114.3},{metric:"ê³ ê° ë§Œì¡±ë„",value:"4.2/5.0",target:"4.0/5.0",percentage:105},{metric:"ì¬ê³„ì•½ìœ¨",value:"94.2%",target:"90.0%",percentage:104.7}]},j=[{id:"overview",title:"ê°œìš”",icon:ss},{id:"topTenants",title:"TOP ì…ì ì‚¬",icon:$s},{id:"categoryDistribution",title:"ì¹´í…Œê³ ë¦¬ ë¶„í¬",icon:Ge},{id:"monthlyTrends",title:"ì›”ë³„ íŠ¸ë Œë“œ",icon:_e},{id:"performanceMetrics",title:"ì„±ê³¼ ì§€í‘œ",icon:ye}],o=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ì…ì ì‚¬ ê´€ë¦¬ ê°œìš”"})}),e.jsx("div",{style:{padding:"1.5rem"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx(ye,{size:32,color:"#007bff",style:{marginBottom:"0.5rem"}}),e.jsx("h4",{style:{margin:"0.5rem 0",color:"#007bff"},children:h.overview.totalTenants}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"ì´ ì…ì ì‚¬"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx(as,{size:32,color:"#28a745",style:{marginBottom:"0.5rem"}}),e.jsx("h4",{style:{margin:"0.5rem 0",color:"#28a745"},children:h.overview.newTenants}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"ì‹ ê·œ ì…ì ì‚¬"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx(We,{size:32,color:"#ffc107",style:{marginBottom:"0.5rem"}}),e.jsxs("h4",{style:{margin:"0.5rem 0",color:"#ffc107"},children:["â‚©",h.overview.averageSales.toLocaleString()]}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"í‰ê·  ë§¤ì¶œ"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx($s,{size:32,color:"#dc3545",style:{marginBottom:"0.5rem"}}),e.jsxs("h4",{style:{margin:"0.5rem 0",color:"#dc3545"},children:[h.overview.satisfaction,"/5.0"]}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"í‰ê·  ë§Œì¡±ë„"})]})]})})]}),y=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"TOP ì…ì ì‚¬ í˜„í™©"})}),e.jsx("div",{style:{padding:"1rem 0"},children:h.topTenants.map((d,r)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:r<h.topTenants.length-1?"1px solid #eee":"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#007bff",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:r+1}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:d.name}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["ìƒí’ˆ: ",d.products,"ê°œ | ë§Œì¡±ë„: ",d.satisfaction,"/5.0"]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#007bff"},children:["â‚©",d.sales.toLocaleString()]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#28a745"},children:["+",d.growth,"% ì„±ì¥"]})]})]},r))})]}),N=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ì¹´í…Œê³ ë¦¬ë³„ ì…ì ì‚¬ ë¶„í¬"})}),e.jsx("div",{style:{padding:"1rem 0"},children:h.categoryDistribution.map((d,r)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:r<h.categoryDistribution.length-1?"1px solid #eee":"none"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:d.category}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:[d.count,"ê°œ ì…ì ì‚¬ (",d.percentage,"%)"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#007bff"},children:["â‚©",d.sales.toLocaleString()]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#666"},children:"ì´ ë§¤ì¶œ"})]})]},r))})]}),v=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ì›”ë³„ ì…ì ì‚¬ íŠ¸ë Œë“œ"})}),e.jsx("div",{style:{padding:"1rem 0"},children:h.monthlyTrends.map((d,r)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:r<h.monthlyTrends.length-1?"1px solid #eee":"none"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:d.month}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["ì‹ ê·œ ì…ì ì‚¬: ",d.newTenants,"ê°œ"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#007bff"},children:["â‚©",d.totalSales.toLocaleString()]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["ë§Œì¡±ë„: ",d.satisfaction,"/5.0"]})]})]},r))})]}),I=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ì„±ê³¼ ì§€í‘œ"})}),e.jsx("div",{style:{padding:"1rem 0"},children:h.performanceMetrics.map((d,r)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:r<h.performanceMetrics.length-1?"1px solid #eee":"none"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:d.metric}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#007bff"},children:d.value}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["ëª©í‘œ: ",d.target," (",d.percentage,"%)"]})]})]},r))})]}),u=()=>{switch(i){case"overview":return o();case"topTenants":return y();case"categoryDistribution":return N();case"monthlyTrends":return v();case"performanceMetrics":return I();default:return o()}};return e.jsxs("div",{children:[e.jsx("div",{className:"card",children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("button",{className:"btn",onClick:()=>t("/statistics"),style:{background:"#f8f9fa",border:"1px solid #ddd"},children:[e.jsx(xs,{size:16}),"ë’¤ë¡œê°€ê¸°"]}),e.jsx("h2",{className:"card-title",style:{margin:0},children:"ì…ì ì‚¬ ê´€ë¦¬ ìƒì„¸ í†µê³„"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:`btn ${l==="week"?"btn-primary":""}`,style:l!=="week"?{background:"#f8f9fa",color:"#333",border:"1px solid #ddd"}:{},onClick:()=>c("week"),children:"ì£¼ê°„"}),e.jsx("button",{className:`btn ${l==="month"?"btn-primary":""}`,style:l!=="month"?{background:"#f8f9fa",color:"#333",border:"1px solid #ddd"}:{},onClick:()=>c("month"),children:"ì›”ê°„"})]})]})}),e.jsx("div",{className:"card",style:{marginTop:"1rem"},children:e.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:j.map(d=>{const r=d.icon;return e.jsxs("button",{onClick:()=>w(d.id),className:`btn ${i===d.id?"btn-primary":""}`,style:i!==d.id?{background:"#f8f9fa",color:"#333",border:"1px solid #ddd",display:"flex",alignItems:"center",gap:"0.5rem"}:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(r,{size:16}),d.title]},d.id)})})}),e.jsx("div",{style:{marginTop:"1.5rem"},children:u()}),e.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ"})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("button",{className:"btn btn-primary",children:[e.jsx(Qe,{size:16}),"ì „ì²´ ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ"]}),e.jsxs("button",{className:"btn btn-success",children:[e.jsx(_e,{size:16}),"TOP ì…ì ì‚¬ ë¦¬í¬íŠ¸"]}),e.jsxs("button",{className:"btn btn-warning",children:[e.jsx(Ge,{size:16}),"ì¹´í…Œê³ ë¦¬ë³„ ë¶„ì„"]})]})]})]})},ra=()=>{const t=Ce(),[l,c]=n.useState("month"),[i,w]=n.useState("overview"),h={overview:{systemUptime:99.8,averageProcessingTime:2.1,taskCompletionRate:96.5,errorRate:.3,efficiencyScore:94.2},systemUsage:[{system:"ì…ì ì‚¬ ê´€ë¦¬",usage:85,efficiency:92,uptime:99.9,errors:2},{system:"ìƒí’ˆ ìŠ¹ì¸",usage:78,efficiency:88,uptime:99.7,errors:5},{system:"ê³ ê° ì„œë¹„ìŠ¤",usage:92,efficiency:95,uptime:99.8,errors:3},{system:"ë§¤ì¶œ ë¶„ì„",usage:65,efficiency:89,uptime:99.5,errors:8},{system:"ì •ì‚° ê´€ë¦¬",usage:88,efficiency:91,uptime:99.6,errors:4}],performanceMetrics:[{metric:"ì—…ë¬´ ì²˜ë¦¬ëŸ‰",current:156,target:150,percentage:104,trend:"+4%"},{metric:"ì‘ë‹µ ì‹œê°„",current:2.1,target:2.5,percentage:119,trend:"-19%"},{metric:"ì •í™•ë„",current:98.5,target:95,percentage:103.7,trend:"+3.7%"},{metric:"ê³ ê° ë§Œì¡±ë„",current:4.2,target:4,percentage:105,trend:"+5%"}],monthlyTrends:[{month:"1ì›”",uptime:99.5,efficiency:91.2,errors:12,completion:94.2},{month:"2ì›”",uptime:99.7,efficiency:92.8,errors:8,completion:95.1},{month:"3ì›”",uptime:99.6,efficiency:91.9,errors:10,completion:94.8},{month:"4ì›”",uptime:99.8,efficiency:93.5,errors:6,completion:95.8},{month:"5ì›”",uptime:99.9,efficiency:94.1,errors:4,completion:96.2},{month:"6ì›”",uptime:99.8,efficiency:94.2,errors:5,completion:96.5}],errorAnalysis:[{type:"ì‹œìŠ¤í…œ ì˜¤ë¥˜",count:15,percentage:37.5,severity:"High",resolution:2.3},{type:"ë„¤íŠ¸ì›Œí¬ ì§€ì—°",count:12,percentage:30,severity:"Medium",resolution:1.8},{type:"ë°ì´í„° ë¶ˆì¼ì¹˜",count:8,percentage:20,severity:"Medium",resolution:3.2},{type:"ê¶Œí•œ ì˜¤ë¥˜",count:3,percentage:7.5,severity:"Low",resolution:.5},{type:"ê¸°íƒ€",count:2,percentage:5,severity:"Low",resolution:1.2}],efficiencyTrends:[{period:"1ì£¼ì°¨",efficiency:91.2,uptime:99.5,completion:94.2},{period:"2ì£¼ì°¨",efficiency:92.1,uptime:99.6,completion:94.8},{period:"3ì£¼ì°¨",efficiency:93.5,uptime:99.7,completion:95.3},{period:"4ì£¼ì°¨",efficiency:94.2,uptime:99.8,completion:96.5}]},j=[{id:"overview",title:"ê°œìš”",icon:ss},{id:"systemUsage",title:"ì‹œìŠ¤í…œë³„",icon:_e},{id:"performanceMetrics",title:"ì„±ê³¼ ì§€í‘œ",icon:zr},{id:"monthlyTrends",title:"ì›”ë³„ íŠ¸ë Œë“œ",icon:Ae},{id:"errorAnalysis",title:"ì˜¤ë¥˜ ë¶„ì„",icon:ts},{id:"efficiencyTrends",title:"íš¨ìœ¨ì„± íŠ¸ë Œë“œ",icon:je}],o=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ìš´ì˜ íš¨ìœ¨ì„± ê°œìš”"})}),e.jsx("div",{style:{padding:"1.5rem"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx(ss,{size:32,color:"#6f42c1",style:{marginBottom:"0.5rem"}}),e.jsxs("h4",{style:{margin:"0.5rem 0",color:"#6f42c1"},children:[h.overview.systemUptime,"%"]}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"ì‹œìŠ¤í…œ ê°€ë™ë¥ "})]}),e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx(Te,{size:32,color:"#007bff",style:{marginBottom:"0.5rem"}}),e.jsxs("h4",{style:{margin:"0.5rem 0",color:"#007bff"},children:[h.overview.averageProcessingTime,"ì‹œê°„"]}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"í‰ê·  ì²˜ë¦¬ì‹œê°„"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx(je,{size:32,color:"#28a745",style:{marginBottom:"0.5rem"}}),e.jsxs("h4",{style:{margin:"0.5rem 0",color:"#28a745"},children:[h.overview.taskCompletionRate,"%"]}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"ì—…ë¬´ ì™„ë£Œìœ¨"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx(ts,{size:32,color:"#dc3545",style:{marginBottom:"0.5rem"}}),e.jsxs("h4",{style:{margin:"0.5rem 0",color:"#dc3545"},children:[h.overview.errorRate,"%"]}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"ì˜¤ë¥˜ ë°œìƒë¥ "})]})]})})]}),y=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ì‹œìŠ¤í…œë³„ ì‚¬ìš©ë¥  ë° íš¨ìœ¨ì„±"})}),e.jsx("div",{style:{padding:"1rem 0"},children:h.systemUsage.map((r,g)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:g<h.systemUsage.length-1?"1px solid #eee":"none"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:r.system}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["ê°€ë™ë¥ : ",r.uptime,"% | ì˜¤ë¥˜: ",r.errors,"ê±´"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#6f42c1"},children:["ì‚¬ìš©ë¥ : ",r.usage,"%"]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["íš¨ìœ¨ì„±: ",r.efficiency,"%"]})]})]},g))})]}),N=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ì„±ê³¼ ì§€í‘œ"})}),e.jsx("div",{style:{padding:"1rem 0"},children:h.performanceMetrics.map((r,g)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:g<h.performanceMetrics.length-1?"1px solid #eee":"none"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:r.metric}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["ëª©í‘œ: ",r.target," | ë‹¬ì„±ë¥ : ",r.percentage,"%"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#6f42c1"},children:r.current}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#28a745"},children:r.trend})]})]},g))})]}),v=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ì›”ë³„ ìš´ì˜ íŠ¸ë Œë“œ"})}),e.jsx("div",{style:{padding:"1rem 0"},children:h.monthlyTrends.map((r,g)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:g<h.monthlyTrends.length-1?"1px solid #eee":"none"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:r.month}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["ì˜¤ë¥˜: ",r.errors,"ê±´ | ì™„ë£Œìœ¨: ",r.completion,"%"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#6f42c1"},children:["ê°€ë™ë¥ : ",r.uptime,"%"]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["íš¨ìœ¨ì„±: ",r.efficiency,"%"]})]})]},g))})]}),I=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ì˜¤ë¥˜ ë¶„ì„"})}),e.jsx("div",{style:{padding:"1rem 0"},children:h.errorAnalysis.map((r,g)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:g<h.errorAnalysis.length-1?"1px solid #eee":"none"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:r.type}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["ì‹¬ê°ë„: ",r.severity," | í•´ê²°ì‹œê°„: ",r.resolution,"ì‹œê°„"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#dc3545"},children:[r.count,"ê±´"]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:[r.percentage,"%"]})]})]},g))})]}),u=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"íš¨ìœ¨ì„± íŠ¸ë Œë“œ"})}),e.jsx("div",{style:{padding:"1rem 0"},children:h.efficiencyTrends.map((r,g)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:g<h.efficiencyTrends.length-1?"1px solid #eee":"none"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:r.period}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["ì™„ë£Œìœ¨: ",r.completion,"%"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#6f42c1"},children:["íš¨ìœ¨ì„±: ",r.efficiency,"%"]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["ê°€ë™ë¥ : ",r.uptime,"%"]})]})]},g))})]}),d=()=>{switch(i){case"overview":return o();case"systemUsage":return y();case"performanceMetrics":return N();case"monthlyTrends":return v();case"errorAnalysis":return I();case"efficiencyTrends":return u();default:return o()}};return e.jsxs("div",{children:[e.jsx("div",{className:"card",children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("button",{className:"btn",onClick:()=>t("/statistics"),style:{background:"#f8f9fa",border:"1px solid #ddd"},children:[e.jsx(xs,{size:16}),"ë’¤ë¡œê°€ê¸°"]}),e.jsx("h2",{className:"card-title",style:{margin:0},children:"ìš´ì˜ íš¨ìœ¨ì„± ìƒì„¸ í†µê³„"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:`btn ${l==="week"?"btn-primary":""}`,style:l!=="week"?{background:"#f8f9fa",color:"#333",border:"1px solid #ddd"}:{},onClick:()=>c("week"),children:"ì£¼ê°„"}),e.jsx("button",{className:`btn ${l==="month"?"btn-primary":""}`,style:l!=="month"?{background:"#f8f9fa",color:"#333",border:"1px solid #ddd"}:{},onClick:()=>c("month"),children:"ì›”ê°„"})]})]})}),e.jsx("div",{className:"card",style:{marginTop:"1rem"},children:e.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:j.map(r=>{const g=r.icon;return e.jsxs("button",{onClick:()=>w(r.id),className:`btn ${i===r.id?"btn-primary":""}`,style:i!==r.id?{background:"#f8f9fa",color:"#333",border:"1px solid #ddd",display:"flex",alignItems:"center",gap:"0.5rem"}:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(g,{size:16}),r.title]},r.id)})})}),e.jsx("div",{style:{marginTop:"1.5rem"},children:d()}),e.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ"})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("button",{className:"btn btn-primary",children:[e.jsx(Qe,{size:16}),"ì „ì²´ ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ"]}),e.jsxs("button",{className:"btn btn-success",children:[e.jsx(ss,{size:16}),"ì‹œìŠ¤í…œë³„ ë¶„ì„"]}),e.jsxs("button",{className:"btn btn-warning",children:[e.jsx(ts,{size:16}),"ì˜¤ë¥˜ ë¶„ì„ ë¦¬í¬íŠ¸"]})]})]})]})},aa=()=>{const[t,l]=n.useState(""),[c,i]=n.useState("all"),[w,h]=n.useState("all"),[j,o]=n.useState(!1),[y,N]=n.useState(null),[v,I]=n.useState(""),[u,d]=n.useState([]),[r,g]=n.useState(!0);n.useEffect(()=>{_()},[]);const _=async()=>{try{g(!0),console.log("ğŸ”„ ë³¸ì‚¬ ê³ ê°ì„œë¹„ìŠ¤: ë¬¸ì˜ ëª©ë¡ ë¡œë“œ ì‹œì‘");const z=(await lt()).map(S=>{var E,T;return{id:S.id,customerName:((E=S.users)==null?void 0:E.name)||"ì•Œ ìˆ˜ ì—†ìŒ",customerEmail:S.email,customerPhone:S.phone||((T=S.users)==null?void 0:T.phone)||"ë¯¸ë“±ë¡",category:S.category,subject:S.title,content:S.content,status:S.status,priority:S.priority,submittedDate:new Date(S.created_at).toLocaleString("ko-KR"),assignedTo:S.assigned_to||"ë¯¸ë°°ì •",tenant:S.product_brand||S.tenant||"ì¼ë°˜",reply:S.reply_content,replyDate:S.reply_date?new Date(S.reply_date).toLocaleString("ko-KR"):null,orderId:S.order_id}});d(z),console.log(`âœ… ë³¸ì‚¬ ê³ ê°ì„œë¹„ìŠ¤: ${z.length}ê±´ ë¬¸ì˜ ë¡œë“œ ì™„ë£Œ`)}catch(x){console.error("ë¬¸ì˜ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:",x)}finally{g(!1)}},D=[{value:"all",label:"ì „ì²´"},{value:"ë‹µë³€ëŒ€ê¸°",label:"ë‹µë³€ëŒ€ê¸°"},{value:"ì²˜ë¦¬ì¤‘",label:"ì²˜ë¦¬ì¤‘"},{value:"ë‹µë³€ì™„ë£Œ",label:"ë‹µë³€ì™„ë£Œ"}],k=["ìƒí’ˆë¬¸ì˜","ë°°ì†¡ë¬¸ì˜","í™˜ë¶ˆìš”ì²­","êµí™˜ìš”ì²­","ìƒí’ˆë¶ˆë§Œ","ì‹œìŠ¤í…œë¬¸ì˜","ê¸°íƒ€"],M=u.filter(x=>{const z=x.customerName.toLowerCase().includes(t.toLowerCase())||x.subject.toLowerCase().includes(t.toLowerCase())||x.content.toLowerCase().includes(t.toLowerCase()),S=c==="all"||x.status===c,E=w==="all"||x.category===w;return z&&S&&E}),f=async x=>{if(!v.trim()){alert("ë‹µë³€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}try{console.log("ğŸ’¬ ë‹µë³€ ë“±ë¡ ì‹œì‘:",x),await Hs(x,v,"ë³¸ì‚¬ ê´€ë¦¬ì")?(d(u.map(S=>S.id===x?{...S,reply:v,status:"ë‹µë³€ì™„ë£Œ",assignedTo:"ë³¸ì‚¬ ê´€ë¦¬ì",replyDate:new Date().toLocaleString("ko-KR")}:S)),I(""),o(!1),alert("ë‹µë³€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤."),console.log("âœ… ë‹µë³€ ë“±ë¡ ì™„ë£Œ")):alert("ë‹µë³€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}catch(z){console.error("ë‹µë³€ ë“±ë¡ ì‹¤íŒ¨:",z),alert("ë‹µë³€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}},B=x=>{N(x),I(x.reply||""),o(!0)},W=x=>{window.open(`/admin/orders?orderId=${x}`,"_blank")},a=u.filter(x=>x.status==="ë‹µë³€ëŒ€ê¸°").length;return r?e.jsxs("div",{className:"page",children:[e.jsx("div",{className:"page-header",children:e.jsx("h1",{children:"ê³ ê° ì„œë¹„ìŠ¤ ê´€ë¦¬"})}),e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx("div",{children:"ë¬¸ì˜ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ê³ ê° ì„œë¹„ìŠ¤ ê´€ë¦¬"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"ê³ ê° ë¬¸ì˜ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ë¹ ë¥´ê²Œ ì‘ë‹µí•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex gap-4",children:[e.jsxs("div",{className:`rounded-lg px-4 py-3 min-w-[100px] cursor-pointer transition-all hover:shadow-md ${c==="all"?"bg-blue-100 border-2 border-blue-300":"bg-blue-50 hover:bg-blue-100"}`,onClick:()=>i("all"),children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:u.length}),e.jsx("div",{className:"text-sm text-blue-600",children:"ì „ì²´ ë¬¸ì˜"})]}),e.jsxs("div",{className:`rounded-lg px-4 py-3 min-w-[100px] cursor-pointer transition-all hover:shadow-md ${c==="ë‹µë³€ëŒ€ê¸°"?"bg-orange-100 border-2 border-orange-300":"bg-orange-50 hover:bg-orange-100"}`,onClick:()=>i("ë‹µë³€ëŒ€ê¸°"),children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:a}),e.jsx("div",{className:"text-sm text-orange-600",children:"ë‹µë³€ ëŒ€ê¸°"})]}),e.jsxs("div",{className:`rounded-lg px-4 py-3 min-w-[100px] cursor-pointer transition-all hover:shadow-md ${c==="ë‹µë³€ì™„ë£Œ"?"bg-green-100 border-2 border-green-300":"bg-green-50 hover:bg-green-100"}`,onClick:()=>i("ë‹µë³€ì™„ë£Œ"),children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:u.filter(x=>x.status==="ë‹µë³€ì™„ë£Œ").length}),e.jsx("div",{className:"text-sm text-green-600",children:"ë‹µë³€ ì™„ë£Œ"})]})]})]}),a>0&&e.jsx("div",{className:"mt-4 bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{size:20,className:"text-orange-600 mr-2"}),e.jsxs("span",{className:"text-orange-800 font-medium",children:["ë‹µë³€ ëŒ€ê¸° ì¤‘ì¸ ë¬¸ì˜ê°€ ",a,"ê°œ ìˆìŠµë‹ˆë‹¤."]})]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:e.jsx("h2",{className:"card-title",children:"ê³ ê° ì„œë¹„ìŠ¤ ê´€ë¦¬"})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{position:"relative",flex:"1",minWidth:"200px"},children:[e.jsx(Ue,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#666"}}),e.jsx("input",{type:"text",placeholder:"ê³ ê°ëª…, ì œëª©, ì´ë©”ì¼ë¡œ ê²€ìƒ‰...",value:t,onChange:x=>l(x.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"0.875rem"}})]}),e.jsx("select",{value:c,onChange:x=>i(x.target.value),style:{padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"0.875rem",minWidth:"140px"},children:D.map(x=>e.jsx("option",{value:x.value,children:x.label},x.value))}),e.jsxs("select",{value:w,onChange:x=>h(x.target.value),style:{padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"0.875rem",minWidth:"140px"},children:[e.jsx("option",{value:"all",children:"ì „ì²´ ì¹´í…Œê³ ë¦¬"}),k.map(x=>e.jsx("option",{value:x,children:x},x))]}),e.jsxs("button",{className:"btn",style:{background:"#6c757d",color:"white"},children:[e.jsx(Fe,{size:16}),"í•„í„°"]})]})]}),e.jsx("div",{className:"card",children:M.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(He,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ë¬¸ì˜ê°€ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("p",{className:"text-gray-500",children:"ì¡°ê±´ì— ë§ëŠ” ë¬¸ì˜ê°€ ì—†ìŠµë‹ˆë‹¤."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ê³ ê° ì •ë³´"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ë¬¸ì˜ ë‚´ìš©"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ì…ì ì‚¬"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ìš°ì„ ìˆœìœ„"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ìƒíƒœ"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ë“±ë¡ì¼"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ì‘ì—…"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(x=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(Re,{size:20,className:"text-gray-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.customerName}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(Pe,{size:12,className:"mr-1"}),x.customerEmail]}),x.customerPhone!=="ë¯¸ë“±ë¡"&&e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(Ke,{size:12,className:"mr-1"}),x.customerPhone]})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:x.subject}),e.jsx("div",{className:"text-sm text-gray-500 max-w-xs",children:x.content.length>50?`${x.content.substring(0,50)}...`:x.content})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:x.category})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.tenant}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x.priority==="ë†’ìŒ"?"bg-red-100 text-red-800":x.priority==="ë³´í†µ"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:x.priority})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${x.status==="ë‹µë³€ì™„ë£Œ"?"bg-green-100 text-green-800":x.status==="ì²˜ë¦¬ì¤‘"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:x.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Te,{size:14,className:"mr-1"}),x.submittedDate]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{onClick:()=>B(x),className:"text-blue-600 hover:text-blue-900 transition-colors p-2 rounded-lg hover:bg-blue-50",title:"ìƒì„¸ë³´ê¸° ë° ë‹µë³€",children:e.jsx(we,{size:16})})})]},x.id))})]})})})]})]}),e.jsxs(fe,{isOpen:j,onClose:()=>o(!1),title:"ë¬¸ì˜ ìƒì„¸ ì •ë³´",children:[y&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ê³ ê° ì •ë³´"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ê³ ê°ëª…"}),e.jsx("div",{className:"text-sm text-gray-900",children:y.customerName})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ì´ë©”ì¼"}),e.jsx("div",{className:"text-sm text-gray-900",children:y.customerEmail})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ì „í™”ë²ˆí˜¸"}),e.jsx("div",{className:"text-sm text-gray-900",children:y.customerPhone})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("div",{className:"text-sm text-gray-900",children:y.category})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ì…ì ì‚¬"}),e.jsx("div",{className:"text-sm text-gray-900",children:y.tenant})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ìš°ì„ ìˆœìœ„"}),e.jsx("div",{children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y.priority==="ë†’ìŒ"?"bg-red-100 text-red-800":y.priority==="ë³´í†µ"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:y.priority})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ìƒíƒœ"}),e.jsx("div",{children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y.status==="ë‹µë³€ì™„ë£Œ"?"bg-green-100 text-green-800":y.status==="ì²˜ë¦¬ì¤‘"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:y.status})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ë‹´ë‹¹ì"}),e.jsx("div",{className:"text-sm text-gray-900",children:y.assignedTo})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ë“±ë¡ì¼"}),e.jsx("div",{className:"text-sm text-gray-900",children:y.submittedDate})]})]}),y.orderId&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ê´€ë ¨ ì£¼ë¬¸"}),e.jsxs("div",{className:"text-sm text-gray-900",children:["ì£¼ë¬¸ ID: ",y.orderId]})]}),e.jsxs("button",{onClick:()=>W(y.orderId),className:"inline-flex items-center px-3 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"ì£¼ë¬¸ë‚´ì—­ ë³´ê¸°"]})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ë¬¸ì˜ ë‚´ìš©"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900",children:y.subject}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:y.content})]})]}),y.reply&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"ë‹µë³€"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:y.reply}),y.replyDate&&e.jsxs("div",{className:"text-xs text-gray-500",children:["ë‹µë³€ì¼: ",y.replyDate]})]})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:y.reply?"ë‹µë³€ ìˆ˜ì •":"ë‹µë³€ ì‘ì„±"}),e.jsx("textarea",{value:v,onChange:x=>I(x.target.value),placeholder:"ë‹µë³€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...",rows:"4",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200",children:[y&&e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",onClick:()=>f(y.id),children:[e.jsx(He,{size:16,className:"mr-2"}),y.reply?"ë‹µë³€ ìˆ˜ì •":"ë‹µë³€ ë“±ë¡"]}),e.jsx("button",{className:"inline-flex items-center px-4 py-2 bg-gray-300 text-gray-700 text-sm font-medium rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",onClick:()=>o(!1),children:"ë‹«ê¸°"})]})]})]})},na=()=>{const t=Ce(),[l,c]=n.useState("month"),[i,w]=n.useState("overview"),h={overview:{pendingApproval:23,approved:156,rejected:8,averageProcessingTime:2.3,approvalRate:83.4},approvalDetails:[{status:"ìŠ¹ì¸ ì™„ë£Œ",count:156,percentage:83.4,avgTime:2.1},{status:"ìŠ¹ì¸ ëŒ€ê¸°",count:23,percentage:12.3,avgTime:0},{status:"ë°˜ë ¤",count:8,percentage:4.3,avgTime:1.8}],categoryApproval:[{category:"ì „ìì œí’ˆ",approved:45,pending:5,rejected:2,rate:86.5},{category:"íŒ¨ì…˜ì˜ë¥˜",approved:38,pending:8,rejected:3,rate:77.6},{category:"í™”ì¥í’ˆ",approved:25,pending:4,rejected:1,rate:83.3},{category:"ì‹í’ˆ",approved:22,pending:3,rejected:1,rate:84.6},{category:"ê°€êµ¬",approved:15,pending:2,rejected:1,rate:83.3},{category:"ê¸°íƒ€",approved:11,pending:1,rejected:0,rate:91.7}],monthlyTrends:[{month:"1ì›”",submitted:45,approved:38,rejected:3,avgTime:2.5},{month:"2ì›”",submitted:52,approved:45,rejected:4,avgTime:2.3},{month:"3ì›”",submitted:38,approved:32,rejected:2,avgTime:2.8},{month:"4ì›”",submitted:67,approved:58,rejected:5,avgTime:2.1},{month:"5ì›”",submitted:58,approved:49,rejected:4,avgTime:2.2},{month:"6ì›”",submitted:62,approved:53,rejected:3,avgTime:2}],rejectionReasons:[{reason:"í’ˆì§ˆ ê¸°ì¤€ ë¯¸ë‹¬",count:15,percentage:37.5},{reason:"ì„œë¥˜ ë¶ˆì™„ì „",count:12,percentage:30},{reason:"ê°€ê²© ì •ì±… ìœ„ë°˜",count:8,percentage:20},{reason:"ë¸Œëœë“œ ì •ì±… ìœ„ë°˜",count:3,percentage:7.5},{reason:"ê¸°íƒ€",count:2,percentage:5}],processingTime:[{time:"1ì¼ ì´ë‚´",count:45,percentage:24.1},{time:"1-2ì¼",count:78,percentage:41.7},{time:"2-3ì¼",count:34,percentage:18.2},{time:"3-5ì¼",count:20,percentage:10.7},{time:"5ì¼ ì´ìƒ",count:10,percentage:5.3}]},j=[{id:"overview",title:"ê°œìš”",icon:ue},{id:"approvalDetails",title:"ìŠ¹ì¸ í˜„í™©",icon:je},{id:"categoryApproval",title:"ì¹´í…Œê³ ë¦¬ë³„",icon:Ge},{id:"monthlyTrends",title:"ì›”ë³„ íŠ¸ë Œë“œ",icon:_e},{id:"rejectionReasons",title:"ë°˜ë ¤ ì‚¬ìœ ",icon:De},{id:"processingTime",title:"ì²˜ë¦¬ ì‹œê°„",icon:Te}],o=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ìƒí’ˆ ìŠ¹ì¸ ê´€ë¦¬ ê°œìš”"})}),e.jsx("div",{style:{padding:"1.5rem"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx(Te,{size:32,color:"#ffc107",style:{marginBottom:"0.5rem"}}),e.jsx("h4",{style:{margin:"0.5rem 0",color:"#ffc107"},children:h.overview.pendingApproval}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"ìŠ¹ì¸ ëŒ€ê¸°"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx(je,{size:32,color:"#28a745",style:{marginBottom:"0.5rem"}}),e.jsx("h4",{style:{margin:"0.5rem 0",color:"#28a745"},children:h.overview.approved}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"ìŠ¹ì¸ ì™„ë£Œ"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx(De,{size:32,color:"#dc3545",style:{marginBottom:"0.5rem"}}),e.jsx("h4",{style:{margin:"0.5rem 0",color:"#dc3545"},children:h.overview.rejected}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"ë°˜ë ¤"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx(_e,{size:32,color:"#007bff",style:{marginBottom:"0.5rem"}}),e.jsxs("h4",{style:{margin:"0.5rem 0",color:"#007bff"},children:[h.overview.approvalRate,"%"]}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"ìŠ¹ì¸ìœ¨"})]})]})})]}),y=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ìŠ¹ì¸ í˜„í™© ìƒì„¸"})}),e.jsx("div",{style:{padding:"1rem 0"},children:h.approvalDetails.map((r,g)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:g<h.approvalDetails.length-1?"1px solid #eee":"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:r.status==="ìŠ¹ì¸ ì™„ë£Œ"?"#28a745":r.status==="ìŠ¹ì¸ ëŒ€ê¸°"?"#ffc107":"#dc3545"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:r.status}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["í‰ê·  ì²˜ë¦¬ì‹œê°„: ",r.avgTime,"ì¼"]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#007bff"},children:[r.count,"ê±´"]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:[r.percentage,"%"]})]})]},g))})]}),N=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ì¹´í…Œê³ ë¦¬ë³„ ìŠ¹ì¸ í˜„í™©"})}),e.jsx("div",{style:{padding:"1rem 0"},children:h.categoryApproval.map((r,g)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:g<h.categoryApproval.length-1?"1px solid #eee":"none"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:r.category}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["ìŠ¹ì¸ìœ¨: ",r.rate,"%"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("span",{style:{fontSize:"0.875rem",color:"#28a745"},children:["ìŠ¹ì¸: ",r.approved]}),e.jsxs("span",{style:{fontSize:"0.875rem",color:"#ffc107"},children:["ëŒ€ê¸°: ",r.pending]}),e.jsxs("span",{style:{fontSize:"0.875rem",color:"#dc3545"},children:["ë°˜ë ¤: ",r.rejected]})]})]},g))})]}),v=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ì›”ë³„ ìŠ¹ì¸ íŠ¸ë Œë“œ"})}),e.jsx("div",{style:{padding:"1rem 0"},children:h.monthlyTrends.map((r,g)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:g<h.monthlyTrends.length-1?"1px solid #eee":"none"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:r.month}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["ì œì¶œ: ",r.submitted,"ê±´"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#007bff"},children:["ìŠ¹ì¸: ",r.approved,"ê±´"]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["ë°˜ë ¤: ",r.rejected,"ê±´ | í‰ê· : ",r.avgTime,"ì¼"]})]})]},g))})]}),I=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ë°˜ë ¤ ì‚¬ìœ  ë¶„ì„"})}),e.jsx("div",{style:{padding:"1rem 0"},children:h.rejectionReasons.map((r,g)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:g<h.rejectionReasons.length-1?"1px solid #eee":"none"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:r.reason}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#dc3545"},children:[r.count,"ê±´"]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:[r.percentage,"%"]})]})]},g))})]}),u=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ì²˜ë¦¬ ì‹œê°„ ë¶„í¬"})}),e.jsx("div",{style:{padding:"1rem 0"},children:h.processingTime.map((r,g)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:g<h.processingTime.length-1?"1px solid #eee":"none"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:r.time}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#007bff"},children:[r.count,"ê±´"]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:[r.percentage,"%"]})]})]},g))})]}),d=()=>{switch(i){case"overview":return o();case"approvalDetails":return y();case"categoryApproval":return N();case"monthlyTrends":return v();case"rejectionReasons":return I();case"processingTime":return u();default:return o()}};return e.jsxs("div",{children:[e.jsx("div",{className:"card",children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("button",{className:"btn",onClick:()=>t("/statistics"),style:{background:"#f8f9fa",border:"1px solid #ddd"},children:[e.jsx(xs,{size:16}),"ë’¤ë¡œê°€ê¸°"]}),e.jsx("h2",{className:"card-title",style:{margin:0},children:"ìƒí’ˆ ìŠ¹ì¸ ê´€ë¦¬ ìƒì„¸ í†µê³„"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:`btn ${l==="week"?"btn-primary":""}`,style:l!=="week"?{background:"#f8f9fa",color:"#333",border:"1px solid #ddd"}:{},onClick:()=>c("week"),children:"ì£¼ê°„"}),e.jsx("button",{className:`btn ${l==="month"?"btn-primary":""}`,style:l!=="month"?{background:"#f8f9fa",color:"#333",border:"1px solid #ddd"}:{},onClick:()=>c("month"),children:"ì›”ê°„"})]})]})}),e.jsx("div",{className:"card",style:{marginTop:"1rem"},children:e.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:j.map(r=>{const g=r.icon;return e.jsxs("button",{onClick:()=>w(r.id),className:`btn ${i===r.id?"btn-primary":""}`,style:i!==r.id?{background:"#f8f9fa",color:"#333",border:"1px solid #ddd",display:"flex",alignItems:"center",gap:"0.5rem"}:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(g,{size:16}),r.title]},r.id)})})}),e.jsx("div",{style:{marginTop:"1.5rem"},children:d()}),e.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ"})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("button",{className:"btn btn-primary",children:[e.jsx(Qe,{size:16}),"ì „ì²´ ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ"]}),e.jsxs("button",{className:"btn btn-success",children:[e.jsx(je,{size:16}),"ìŠ¹ì¸ í˜„í™© ë¦¬í¬íŠ¸"]}),e.jsxs("button",{className:"btn btn-warning",children:[e.jsx(Ge,{size:16}),"ì¹´í…Œê³ ë¦¬ë³„ ë¶„ì„"]})]})]})]})},la=()=>{const t=Ce(),[l,c]=n.useState("month"),[i,w]=n.useState("overview"),h={overview:{totalSales:4567e5,totalOrders:1234,averageOrderValue:37e4,totalCustomers:892,growthRate:12.5},monthlySales:[{month:"1ì›”",sales:42e6,orders:1150,customers:820,growth:8.2},{month:"2ì›”",sales:4567e4,orders:1234,customers:892,growth:12.5},{month:"3ì›”",sales:389e5,orders:1056,customers:756,growth:-2.1},{month:"4ì›”",sales:523e5,orders:1423,customers:1023,growth:18.7},{month:"5ì›”",sales:478e5,orders:1298,customers:945,growth:15.3},{month:"6ì›”",sales:512e5,orders:1389,customers:987,growth:22.1}],categorySales:[{category:"ì „ìì œí’ˆ",sales:156e6,percentage:34.2,orders:423,avgOrder:368e3},{category:"íŒ¨ì…˜ì˜ë¥˜",sales:123e6,percentage:26.9,orders:332,avgOrder:37e4},{category:"í™”ì¥í’ˆ",sales:89e6,percentage:19.5,orders:245,avgOrder:363e3},{category:"ì‹í’ˆ",sales:67e6,percentage:14.7,orders:178,avgOrder:376e3},{category:"ê°€êµ¬",sales:21e6,percentage:4.7,orders:56,avgOrder:375e3}],customerAnalysis:[{segment:"VIP ê³ ê°",count:89,sales:156e6,percentage:34.2,avgOrder:175e4},{segment:"ì¼ë°˜ ê³ ê°",count:456,sales:234e6,percentage:51.2,avgOrder:513e3},{segment:"ì‹ ê·œ ê³ ê°",count:347,sales:667e5,percentage:14.6,avgOrder:192e3}],performanceMetrics:[{metric:"ì´ ë§¤ì¶œ",value:"â‚©456,700,000",target:"â‚©400,000,000",percentage:114.2},{metric:"í‰ê·  ì£¼ë¬¸ì•¡",value:"â‚©370,000",target:"â‚©350,000",percentage:105.7},{metric:"ê³ ê° ìˆ˜",value:"892ëª…",target:"800ëª…",percentage:111.5},{metric:"ì¬êµ¬ë§¤ìœ¨",value:"78.5%",target:"75.0%",percentage:104.7}]},j=[{id:"overview",title:"ê°œìš”",icon:ss},{id:"monthlySales",title:"ì›”ë³„ ë§¤ì¶œ",icon:_e},{id:"categorySales",title:"ì¹´í…Œê³ ë¦¬ë³„",icon:Ge},{id:"customerAnalysis",title:"ê³ ê° ë¶„ì„",icon:as},{id:"performanceMetrics",title:"ì„±ê³¼ ì§€í‘œ",icon:Ae}],o=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ë§¤ì¶œ ë¶„ì„ ê°œìš”"})}),e.jsx("div",{style:{padding:"1.5rem"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx(We,{size:32,color:"#dc3545",style:{marginBottom:"0.5rem"}}),e.jsxs("h4",{style:{margin:"0.5rem 0",color:"#dc3545"},children:["â‚©",h.overview.totalSales.toLocaleString()]}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"ì´ ë§¤ì¶œ"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx(Je,{size:32,color:"#007bff",style:{marginBottom:"0.5rem"}}),e.jsx("h4",{style:{margin:"0.5rem 0",color:"#007bff"},children:h.overview.totalOrders}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"ì´ ì£¼ë¬¸"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx(Ae,{size:32,color:"#28a745",style:{marginBottom:"0.5rem"}}),e.jsxs("h4",{style:{margin:"0.5rem 0",color:"#28a745"},children:["â‚©",h.overview.averageOrderValue.toLocaleString()]}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"í‰ê·  ì£¼ë¬¸ì•¡"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx(as,{size:32,color:"#ffc107",style:{marginBottom:"0.5rem"}}),e.jsx("h4",{style:{margin:"0.5rem 0",color:"#ffc107"},children:h.overview.totalCustomers}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666"},children:"ì´ ê³ ê°"})]})]})})]}),y=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ì›”ë³„ ë§¤ì¶œ íŠ¸ë Œë“œ"})}),e.jsx("div",{style:{padding:"1rem 0"},children:h.monthlySales.map((d,r)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:r<h.monthlySales.length-1?"1px solid #eee":"none"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:d.month}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["ì£¼ë¬¸: ",d.orders,"ê±´ | ê³ ê°: ",d.customers,"ëª…"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#dc3545"},children:["â‚©",d.sales.toLocaleString()]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:d.growth>=0?"#28a745":"#dc3545"},children:[d.growth>=0?"+":"",d.growth,"% ì„±ì¥"]})]})]},r))})]}),N=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ì¹´í…Œê³ ë¦¬ë³„ ë§¤ì¶œ í˜„í™©"})}),e.jsx("div",{style:{padding:"1rem 0"},children:h.categorySales.map((d,r)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:r<h.categorySales.length-1?"1px solid #eee":"none"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:d.category}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["ì£¼ë¬¸: ",d.orders,"ê±´ | í‰ê· : â‚©",d.avgOrder.toLocaleString()]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#dc3545"},children:["â‚©",d.sales.toLocaleString()]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:[d.percentage,"%"]})]})]},r))})]}),v=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ ë¶„ì„"})}),e.jsx("div",{style:{padding:"1rem 0"},children:h.customerAnalysis.map((d,r)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:r<h.customerAnalysis.length-1?"1px solid #eee":"none"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:d.segment}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:[d.count,"ëª… | í‰ê· : â‚©",d.avgOrder.toLocaleString()]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#dc3545"},children:["â‚©",d.sales.toLocaleString()]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:[d.percentage,"%"]})]})]},r))})]}),I=()=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ì„±ê³¼ ì§€í‘œ"})}),e.jsx("div",{style:{padding:"1rem 0"},children:h.performanceMetrics.map((d,r)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:r<h.performanceMetrics.length-1?"1px solid #eee":"none"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1rem"},children:d.metric}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"#dc3545"},children:d.value}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["ëª©í‘œ: ",d.target," (",d.percentage,"%)"]})]})]},r))})]}),u=()=>{switch(i){case"overview":return o();case"monthlySales":return y();case"categorySales":return N();case"customerAnalysis":return v();case"performanceMetrics":return I();default:return o()}};return e.jsxs("div",{children:[e.jsx("div",{className:"card",children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("button",{className:"btn",onClick:()=>t("/statistics"),style:{background:"#f8f9fa",border:"1px solid #ddd"},children:[e.jsx(xs,{size:16}),"ë’¤ë¡œê°€ê¸°"]}),e.jsx("h2",{className:"card-title",style:{margin:0},children:"ë§¤ì¶œ ë¶„ì„ ìƒì„¸ í†µê³„"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:`btn ${l==="week"?"btn-primary":""}`,style:l!=="week"?{background:"#f8f9fa",color:"#333",border:"1px solid #ddd"}:{},onClick:()=>c("week"),children:"ì£¼ê°„"}),e.jsx("button",{className:`btn ${l==="month"?"btn-primary":""}`,style:l!=="month"?{background:"#f8f9fa",color:"#333",border:"1px solid #ddd"}:{},onClick:()=>c("month"),children:"ì›”ê°„"})]})]})}),e.jsx("div",{className:"card",style:{marginTop:"1rem"},children:e.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:j.map(d=>{const r=d.icon;return e.jsxs("button",{onClick:()=>w(d.id),className:`btn ${i===d.id?"btn-primary":""}`,style:i!==d.id?{background:"#f8f9fa",color:"#333",border:"1px solid #ddd",display:"flex",alignItems:"center",gap:"0.5rem"}:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(r,{size:16}),d.title]},d.id)})})}),e.jsx("div",{style:{marginTop:"1.5rem"},children:u()}),e.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ"})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("button",{className:"btn btn-primary",children:[e.jsx(Qe,{size:16}),"ì „ì²´ ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ"]}),e.jsxs("button",{className:"btn btn-success",children:[e.jsx(_e,{size:16}),"ì›”ë³„ ë§¤ì¶œ ë¦¬í¬íŠ¸"]}),e.jsxs("button",{className:"btn btn-warning",children:[e.jsx(Ge,{size:16}),"ì¹´í…Œê³ ë¦¬ë³„ ë¶„ì„"]})]})]})]})},ia=()=>{const{user:t,updateProfile:l,loading:c,error:i,setError:w,isAdmin:h}=Le(),[j,o]=n.useState(!1),[y,N]=n.useState(null),[v,I]=n.useState(!0),[u,d]=n.useState({name:"",description:"",phone:"",email:"",businessNumber:"",address:""}),[r,g]=n.useState(""),[_,D]=n.useState(!1),k=n.useRef(null);n.useEffect(()=>{(async()=>{if(t!=null&&t.email)try{const{data:S,error:E}=await O.from("brand_admins").select("*").eq("email",t.email).single();if(E){console.error("ë¸Œëœë“œ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:",E);return}S&&(N(S),d({name:S.name||"",description:"",phone:S.phone||"",email:S.email||"",businessNumber:S.business_number||"",address:S.address||""}),S.logo_url&&g(S.logo_url))}catch(S){console.error("ë¸Œëœë“œ ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜:",S)}finally{I(!1)}})()},[t]);const M=(z,S)=>{d(E=>({...E,[z]:S})),i&&w("")},f=async z=>{if(z.preventDefault(),!!(t!=null&&t.email))try{const{error:S}=await O.from("brand_admins").update({name:u.name,phone:u.phone,address:u.address}).eq("email",t.email);if(S){console.error("ë¸Œëœë“œ ì •ë³´ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:",S),alert("ë¸Œëœë“œ ì •ë³´ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");return}alert("ë¸Œëœë“œ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(S){console.error("ë¸Œëœë“œ ì •ë³´ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:",S),alert("ë¸Œëœë“œ ì •ë³´ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},B=async z=>{if(z){if(!z.type.startsWith("image/")){alert("ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");return}if(z.size>5*1024*1024){alert("íŒŒì¼ í¬ê¸°ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.");return}D(!0);try{const S=z.name.split(".").pop(),E=`${t.email}_logo_${Date.now()}.${S}`,{data:T,error:U}=await O.storage.from("brand-logos").upload(E,z);if(U){console.error("ë¡œê³  ì—…ë¡œë“œ ì˜¤ë¥˜:",U),alert("ë¡œê³  ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");return}const{data:p}=O.storage.from("brand-logos").getPublicUrl(E),V=p.publicUrl,{error:C}=await O.from("brand_admins").update({logo_url:V}).eq("email",t.email);if(C){console.error("ë¡œê³  URL ì €ì¥ ì˜¤ë¥˜:",C),alert("ë¡œê³  URL ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");return}g(V),alert("ë¡œê³ ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(S){console.error("ë¡œê³  ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜:",S),alert("ë¡œê³  ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{D(!1)}}},W=z=>{const S=z.target.files[0];S&&B(S)},a=()=>{var z;(z=k.current)==null||z.click()},x=()=>{var z;return e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"2rem"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{width:"120px",height:"120px",background:r?`url(${r}) center/cover`:"linear-gradient(135deg, #495057 0%, #343a40 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",position:"relative",cursor:"pointer",overflow:"hidden",transition:"transform 0.2s ease"},onClick:a,onMouseEnter:S=>{S.currentTarget.style.transform="scale(1.05)"},onMouseLeave:S=>{S.currentTarget.style.transform="scale(1)"},children:[!r&&e.jsx(Re,{size:48,color:"white"}),e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.875rem",fontWeight:"600",opacity:0,transition:"opacity 0.2s ease",borderRadius:"50%"},onMouseEnter:S=>{S.currentTarget.style.opacity="1"},onMouseLeave:S=>{S.currentTarget.style.opacity="0"},children:_?e.jsx(Se,{size:20,style:{animation:"spin 1s linear infinite"}}):e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(Qs,{size:20,style:{marginBottom:"0.25rem"}}),e.jsx("div",{children:"ë¡œê³ ë³€ê²½"})]})})]}),e.jsx("input",{ref:k,type:"file",accept:"image/*",onChange:W,style:{display:"none"}}),e.jsx("h3",{style:{margin:"0 0 0.5rem",color:"#333"},children:u.name||((z=t==null?void 0:t.user_metadata)==null?void 0:z.name)||"ì‚¬ìš©ì"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx(Pe,{size:14,color:"#666"}),e.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:t==null?void 0:t.email})]}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsxs("span",{className:`badge ${h()?"badge-success":"badge-info"}`,style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"0.5rem 0.75rem"},children:[e.jsx(hs,{size:12}),h()?"ê´€ë¦¬ì":"ê°€ë§¹ì "]})}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#999",textAlign:"left",background:"#f8f9fa",padding:"0.75rem",borderRadius:"6px"},children:[e.jsxs("div",{style:{marginBottom:"0.25rem"},children:[e.jsx("strong",{children:"ê°€ì…ì¼:"})," ",new Date(t==null?void 0:t.created_at).toLocaleDateString("ko-KR")]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ë§ˆì§€ë§‰ ë¡œê·¸ì¸:"})," ",new Date(t==null?void 0:t.last_sign_in_at).toLocaleDateString("ko-KR")]})]})]})}),e.jsx("div",{style:{marginTop:"2rem"},children:e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ê¸°ë³¸ ì •ë³´"})}),e.jsx("form",{onSubmit:f,children:e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ë¸Œëœë“œ ì´ë¦„"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(ye,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#666"}}),e.jsx("input",{type:"text",value:u.name,readOnly:!0,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #ddd",borderRadius:"6px",backgroundColor:"#f8f9fa",cursor:"not-allowed",color:"#666"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ë¸Œëœë“œ ì„¤ëª…"}),e.jsx("textarea",{value:u.description,onChange:S=>M("description",S.target.value),rows:3,disabled:v,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",resize:"vertical",backgroundColor:v?"#f8f9fa":"white"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ëŒ€í‘œ ì „í™”ë²ˆí˜¸"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Ke,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#666"}}),e.jsx("input",{type:"tel",value:u.phone,onChange:S=>M("phone",S.target.value),disabled:v,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #ddd",borderRadius:"6px",backgroundColor:v?"#f8f9fa":"white"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ëŒ€í‘œ ì´ë©”ì¼"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Pe,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#666"}}),e.jsx("input",{type:"email",value:u.email,disabled:!0,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #ddd",borderRadius:"6px",backgroundColor:"#f8f9fa",color:"#666"}})]})]})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"ì‚¬ì—…ì ì •ë³´"})}),e.jsx("form",{onSubmit:f,children:e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸"}),e.jsx("input",{type:"text",value:u.businessNumber,onChange:S=>M("businessNumber",S.target.value),disabled:v,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",backgroundColor:v?"#f8f9fa":"white"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ì‚¬ì—…ì¥ ì£¼ì†Œ"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(st,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#666"}}),e.jsx("input",{type:"text",value:u.address,onChange:S=>M("address",S.target.value),disabled:v,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #ddd",borderRadius:"6px",backgroundColor:v?"#f8f9fa":"white"}})]})]}),e.jsx("div",{style:{textAlign:"right",marginTop:"1rem"},children:e.jsx("button",{type:"submit",disabled:v||j,className:"btn btn-primary",children:j?e.jsxs(e.Fragment,{children:[e.jsx(Se,{size:16,style:{animation:"spin 1s linear infinite"}}),"ì €ì¥ ì¤‘..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ms,{size:16}),"ë¸Œëœë“œ ì •ë³´ ì €ì¥"]})})})]})})]})]})})]})};return e.jsxs("div",{children:[i&&e.jsx("div",{style:{background:"#fee",color:"#c33",padding:"0.75rem",borderRadius:"6px",marginBottom:"1.5rem",fontSize:"0.875rem",border:"1px solid #fcc"},children:i}),e.jsx(x,{})]})},oa=()=>{const t=Ce(),[l,c]=n.useState([]),[i,w]=n.useState("all"),[h,j]=n.useState(!0);n.useEffect(()=>{setTimeout(()=>{const g=[{id:1,type:"new_order",title:"ìƒˆ ì£¼ë¬¸ì´ ë„ì°©í–ˆìŠµë‹ˆë‹¤",message:"ì£¼ë¬¸ë²ˆí˜¸ #ORD-2024-001 - ê¹€ì² ìˆ˜ë‹˜ì˜ ì£¼ë¬¸ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.",timestamp:new Date(Date.now()-3e5),isRead:!1,priority:"high",orderId:"ORD-2024-001"},{id:2,type:"low_stock",title:"ì¬ê³  ë¶€ì¡± ì•Œë¦¼",message:'ìƒí’ˆ "í”„ë¦¬ë¯¸ì—„ ì»¤í”¼ ì›ë‘ 500g"ì˜ ì¬ê³ ê°€ 10ê°œ ë¯¸ë§Œì…ë‹ˆë‹¤.',timestamp:new Date(Date.now()-9e5),isRead:!1,priority:"medium",productId:"PROD-001"},{id:3,type:"payment_complete",title:"ê²°ì œ ì™„ë£Œ",message:"ì£¼ë¬¸ë²ˆí˜¸ #ORD-2024-002 - ì´ì˜í¬ë‹˜ì˜ ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",timestamp:new Date(Date.now()-18e5),isRead:!0,priority:"low",orderId:"ORD-2024-002"},{id:4,type:"customer_inquiry",title:"ìƒˆë¡œìš´ ê³ ê° ë¬¸ì˜",message:'ë°•ë¯¼ìˆ˜ë‹˜ì´ "ë°°ì†¡ ê´€ë ¨ ë¬¸ì˜"ë¡œ ìƒˆë¡œìš´ ë¬¸ì˜ë¥¼ ë‚¨ê²¼ìŠµë‹ˆë‹¤.',timestamp:new Date(Date.now()-72e5),isRead:!1,priority:"medium",inquiryId:"INQ-2024-001"},{id:5,type:"new_order",title:"ìƒˆ ì£¼ë¬¸ì´ ë„ì°©í–ˆìŠµë‹ˆë‹¤",message:"ì£¼ë¬¸ë²ˆí˜¸ #ORD-2024-003 - ìµœì§€ì˜ë‹˜ì˜ ì£¼ë¬¸ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.",timestamp:new Date(Date.now()-108e5),isRead:!0,priority:"high",orderId:"ORD-2024-003"},{id:6,type:"low_stock",title:"ì¬ê³  ë¶€ì¡± ì•Œë¦¼",message:'ìƒí’ˆ "ìœ ê¸°ë† í—ˆë¸Œí‹° ì„¸íŠ¸"ì˜ ì¬ê³ ê°€ 5ê°œ ë¯¸ë§Œì…ë‹ˆë‹¤.',timestamp:new Date(Date.now()-144e5),isRead:!0,priority:"medium",productId:"PROD-002"},{id:7,type:"payment_complete",title:"ê²°ì œ ì™„ë£Œ",message:"ì£¼ë¬¸ë²ˆí˜¸ #ORD-2024-004 - ì •ìˆ˜ì§„ë‹˜ì˜ ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",timestamp:new Date(Date.now()-216e5),isRead:!0,priority:"low",orderId:"ORD-2024-004"},{id:8,type:"customer_inquiry",title:"ìƒˆë¡œìš´ ê³ ê° ë¬¸ì˜",message:'í•œì†Œí¬ë‹˜ì´ "ìƒí’ˆ í’ˆì§ˆ ë¬¸ì˜"ë¡œ ìƒˆë¡œìš´ ë¬¸ì˜ë¥¼ ë‚¨ê²¼ìŠµë‹ˆë‹¤.',timestamp:new Date(Date.now()-288e5),isRead:!0,priority:"medium",inquiryId:"INQ-2024-002"}];c(g),j(!1)},1e3)},[]);const o=r=>{switch(r){case"new_order":return{icon:ue,color:"#3b82f6",bgColor:"#dbeafe"};case"low_stock":return{icon:ts,color:"#f59e0b",bgColor:"#fef3c7"};case"payment_complete":return{icon:Zs,color:"#10b981",bgColor:"#d1fae5"};case"customer_inquiry":return{icon:nr,color:"#8b5cf6",bgColor:"#ede9fe"};default:return{icon:Ve,color:"#6b7280",bgColor:"#f3f4f6"}}},y=r=>{switch(c(g=>g.map(_=>_.id===r.id?{..._,isRead:!0}:_)),r.type){case"new_order":case"payment_complete":t("/orders",{state:{orderId:r.orderId}});break;case"low_stock":t("/products",{state:{productId:r.productId}});break;case"customer_inquiry":t("/customers",{state:{inquiryId:r.inquiryId}});break}},N=(r,g)=>{g.stopPropagation(),c(_=>_.filter(D=>D.id!==r))},v=()=>{c(r=>r.map(g=>({...g,isRead:!0})))},I=l.filter(r=>i==="unread"?!r.isRead:i==="read"?r.isRead:!0),u=l.filter(r=>!r.isRead).length,d=r=>{const _=new Date-r,D=Math.floor(_/(1e3*60)),k=Math.floor(_/(1e3*60*60)),M=Math.floor(_/(1e3*60*60*24));return D<1?"ë°©ê¸ˆ ì „":D<60?`${D}ë¶„ ì „`:k<24?`${k}ì‹œê°„ ì „`:M<7?`${M}ì¼ ì „`:r.toLocaleDateString("ko-KR")};return h?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{animation:"spin 1s linear infinite",marginBottom:"1rem"},children:e.jsx(Ve,{size:32})}),e.jsx("p",{children:"ì•Œë¦¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]})}):e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"1.875rem",fontWeight:"700",color:"#111827",margin:"0 0 0.5rem 0"},children:"ì•Œë¦¼(ë¯¸êµ¬í˜„)"}),e.jsxs("p",{style:{color:"#6b7280",margin:0,fontSize:"0.875rem"},children:[u,"ê°œì˜ ì½ì§€ ì•Šì€ ì•Œë¦¼ì´ ìˆìŠµë‹ˆë‹¤"]})]}),u>0&&e.jsx("button",{onClick:v,style:{background:"#3b82f6",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"ëª¨ë‘ ì½ìŒ ì²˜ë¦¬"})]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem"},children:[{key:"all",label:"ì „ì²´",count:l.length},{key:"unread",label:"ì½ì§€ ì•ŠìŒ",count:u},{key:"read",label:"ì½ìŒ",count:l.filter(r=>r.isRead).length}].map(({key:r,label:g,count:_})=>e.jsxs("button",{onClick:()=>w(r),style:{background:i===r?"#3b82f6":"#f3f4f6",color:i===r?"white":"#374151",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[g," (",_,")"]},r))}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:I.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"3rem 1rem",color:"#6b7280"},children:[e.jsx(Ve,{size:48,style:{marginBottom:"1rem",opacity:.5}}),e.jsx("p",{children:"ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤"})]}):I.map(r=>{const{icon:g,color:_,bgColor:D}=o(r.type);return e.jsx("div",{onClick:()=>y(r),style:{background:r.isRead?"#ffffff":"#fef7ff",border:`1px solid ${r.isRead?"#e5e7eb":"#c084fc"}`,borderRadius:"8px",padding:"1rem",cursor:"pointer",transition:"all 0.2s ease",position:"relative"},onMouseEnter:k=>{k.currentTarget.style.transform="translateY(-1px)",k.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},onMouseLeave:k=>{k.currentTarget.style.transform="translateY(0)",k.currentTarget.style.boxShadow="none"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[e.jsx("div",{style:{background:D,color:_,width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(g,{size:20})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:r.isRead?"500":"600",color:r.isRead?"#374151":"#111827"},children:r.title}),e.jsx("button",{onClick:k=>N(r.id,k),style:{background:"none",border:"none",color:"#9ca3af",cursor:"pointer",padding:"0.25rem",borderRadius:"4px",marginLeft:"0.5rem"},onMouseEnter:k=>{k.currentTarget.style.background="#f3f4f6",k.currentTarget.style.color="#ef4444"},onMouseLeave:k=>{k.currentTarget.style.background="none",k.currentTarget.style.color="#9ca3af"},children:e.jsx(ze,{size:16})})]}),e.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#6b7280",fontSize:"0.875rem",lineHeight:"1.5"},children:r.message}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.75rem",color:"#9ca3af"},children:[e.jsx(Te,{size:12}),d(r.timestamp),!r.isRead&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#ef4444"}}),e.jsx("span",{children:"ì½ì§€ ì•ŠìŒ"})]})]})]})]})},r.id)})})]})},da=async t=>{try{const l=new Date().toISOString().split("T")[0],c=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0],{data:i,error:w}=await be.from("orders").select("id, items").gte("created_at",`${l}T00:00:00`).lte("created_at",`${l}T23:59:59`);w&&console.error("ì˜¤ëŠ˜ ì£¼ë¬¸ ì¡°íšŒ ì˜¤ë¥˜:",w);const h=(i==null?void 0:i.filter(D=>D.items&&D.items.some(k=>k.brand===t)))||[],{data:j,error:o}=await be.from("orders").select("id, items").gte("created_at",`${c}T00:00:00`).lte("created_at",`${c}T23:59:59`);o&&console.error("ì–´ì œ ì£¼ë¬¸ ì¡°íšŒ ì˜¤ë¥˜:",o);const y=(j==null?void 0:j.filter(D=>D.items&&D.items.some(k=>k.brand===t)))||[],{data:N,error:v}=await be.from("products").select("id").eq("brand",t);v&&console.error("ìƒí’ˆ ì¡°íšŒ ì˜¤ë¥˜:",v);const{data:I,error:u}=await be.from("orders").select("user_id, items").not("user_id","is",null);u&&console.error("ê³ ê° ì¡°íšŒ ì˜¤ë¥˜:",u);const d=new Set;I==null||I.forEach(D=>{D.items&&D.items.some(k=>k.brand===t)&&d.add(D.user_id)});let r=0;h.forEach(D=>{D.items&&D.items.forEach(k=>{k.brand===t&&(r+=k.price*k.quantity)})});let g=0;y.forEach(D=>{D.items&&D.items.forEach(k=>{k.brand===t&&(g+=k.price*k.quantity)})});const _=(D,k)=>{if(k===0)return D>0?"+100%":"0%";const M=(D-k)/k*100;return`${M>=0?"+":""}${M.toFixed(1)}%`};return{todayOrders:h.length,totalProducts:(N==null?void 0:N.length)||0,totalCustomers:d.size,todayRevenue:r,todayOrdersChange:_(h.length,y.length),totalProductsChange:"+0%",totalCustomersChange:"+0%",todayRevenueChange:_(r,g)}}catch(l){return console.error("ëŒ€ì‹œë³´ë“œ í†µê³„ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:",l),null}},ca=async(t,l=5)=>{var c;try{const{data:i,error:w}=await be.from("orders").select(`
        id,
        total_amount,
        status,
        order_date,
        items,
        users!inner(name)
      `).order("created_at",{ascending:!1}).limit(50);if(w)return console.error("ìµœê·¼ ì£¼ë¬¸ ì¡°íšŒ ì˜¤ë¥˜:",w),[];const h=[];for(const j of i||[])if(j.items&&j.items.some(o=>o.brand===t)){const o=j.items.find(y=>y.brand===t);if(h.push({id:j.id,customer_name:((c=j.users)==null?void 0:c.name)||"ì•Œ ìˆ˜ ì—†ìŒ",product_name:(o==null?void 0:o.name)||"ìƒí’ˆ ì •ë³´ ì—†ìŒ",total_amount:o?o.price*o.quantity:0,status:j.status,order_date:j.order_date}),h.length>=l)break}return h}catch(i){return console.error("ìµœê·¼ ì£¼ë¬¸ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:",i),[]}},ma=async(t,l=5)=>{try{const{data:c,error:i}=await be.from("products").select("name, sales, price, brand").eq("brand",t).order("sales",{ascending:!1}).limit(l);return i?(console.error("ì¸ê¸° ìƒí’ˆ ì¡°íšŒ ì˜¤ë¥˜:",i),[]):(c||[]).map(w=>({name:w.name,sales:w.sales||0,revenue:(w.sales||0)*w.price,brand:w.brand}))}catch(c){return console.error("ì¸ê¸° ìƒí’ˆ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:",c),[]}},ha=async()=>{try{const{data:{user:t}}=await be.auth.getUser();if(!t)return console.error("ë¡œê·¸ì¸ëœ ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤."),null;const{data:l,error:c}=await be.from("brand_admins").select("name").eq("email",t.email).single();return c?(console.error("ë¸Œëœë“œ ì •ë³´ ì¡°íšŒ ì˜¤ë¥˜:",c),null):(l==null?void 0:l.name)||null}catch(t){return console.error("í˜„ì¬ ë¸Œëœë“œ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:",t),null}},ds=t=>new Intl.NumberFormat("ko-KR").format(t),vs=t=>`â‚©${ds(t)}`,Fs=()=>{const t=Ce(),[l,c]=n.useState(!1),[i,w]=n.useState(null),[h,j]=n.useState(!0),[o,y]=n.useState(!1),[N,v]=n.useState(null),[I,u]=n.useState([]),[d,r]=n.useState([]),[g,_]=n.useState(null),D=N?[{title:"ì˜¤ëŠ˜ ì£¼ë¬¸",value:ds(N.todayOrders),icon:Je,color:"#007bff",change:N.todayOrdersChange},{title:"ì´ ìƒí’ˆ",value:ds(N.totalProducts),icon:ue,color:"#28a745",change:N.totalProductsChange},{title:"ì´ ê³ ê°",value:ds(N.totalCustomers),icon:as,color:"#ffc107",change:N.totalCustomersChange},{title:"ì˜¤ëŠ˜ ë§¤ì¶œ",value:vs(N.todayRevenue),icon:We,color:"#dc3545",change:N.todayRevenueChange}]:[],k=async()=>{try{j(!0);const a=await ha();if(!a){console.error("ë¸Œëœë“œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}_(a);const[x,z,S]=await Promise.all([da(a),ca(a,5),ma(a,5)]);v(x),u(z),r(S),console.log("ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ ì™„ë£Œ:",{brand:a,stats:x,orders:z.length,products:S.length})}catch(a){console.error("ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜:",a)}finally{j(!1)}},M=async()=>{y(!0),await k(),y(!1)};n.useEffect(()=>{k()},[]);const f=a=>({ì£¼ë¬¸ì ‘ìˆ˜:"badge-info",ê²°ì œì™„ë£Œ:"badge-success",ìƒí’ˆì¤€ë¹„:"badge-warning",ë°°ì†¡ì¤‘:"badge-warning",ë°°ì†¡ì™„ë£Œ:"badge-success",ì£¼ë¬¸ì·¨ì†Œ:"badge-danger",ë°˜í’ˆì‹ ì²­:"badge-secondary",ë°˜í’ˆì™„ë£Œ:"badge-secondary"})[a]||"badge-info",B=a=>{w(a),c(!0)},W=a=>{switch(a){case"products":t("/admin/products");break;case"orders":t("/admin/orders");break;case"customers":t("/admin/customers");break;case"statistics":t("/admin/statistics");break}};return h?e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",flexDirection:"column",gap:"1rem"},children:[e.jsx("div",{className:"spinner-border",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})}),e.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:g?`${g} ëŒ€ì‹œë³´ë“œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...`:"ëŒ€ì‹œë³´ë“œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{margin:0,marginBottom:"0.5rem"},children:"ëŒ€ì‹œë³´ë“œ"}),g&&e.jsxs("p",{style:{margin:0,color:"#666",fontSize:"1.1rem"},children:[g," ë¸Œëœë“œ ê´€ë¦¬"]})]}),e.jsxs("button",{className:"btn btn-primary",onClick:M,disabled:o,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ps,{size:16,className:o?"spinning":""}),o?"ìƒˆë¡œê³ ì¹¨ ì¤‘...":"ìƒˆë¡œê³ ì¹¨"]})]}),e.jsx("div",{className:"stats-grid",children:D.map((a,x)=>{const z=a.icon,S=a.change.startsWith("+");return e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{backgroundColor:a.color},children:e.jsx(z,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:a.value}),e.jsx("p",{children:a.title}),e.jsxs("small",{style:{color:S?"#28a745":"#dc3545",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"2px"},children:[e.jsx(Ae,{size:12}),a.change]})]})]},x)})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h2",{className:"card-title",children:"ìµœê·¼ ì£¼ë¬¸"}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>t("/admin/orders"),children:[e.jsx(we,{size:16}),"ì „ì²´ë³´ê¸°"]})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ì£¼ë¬¸ë²ˆí˜¸"}),e.jsx("th",{children:"ê³ ê°ëª…"}),e.jsx("th",{children:"ìƒí’ˆëª…"}),e.jsx("th",{children:"ê¸ˆì•¡"}),e.jsx("th",{children:"ìƒíƒœ"})]})}),e.jsx("tbody",{children:I.length>0?I.map(a=>e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>B(a),children:[e.jsxs("td",{style:{fontWeight:"600",color:"#007bff"},children:["#",a.id.slice(-8)]}),e.jsx("td",{children:a.customer_name}),e.jsx("td",{children:a.product_name}),e.jsx("td",{style:{fontWeight:"600"},children:vs(a.total_amount)}),e.jsx("td",{children:e.jsx("span",{className:`badge ${f(a.status)}`,children:a.status})})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",style:{textAlign:"center",padding:"2rem",color:"#666"},children:"ìµœê·¼ ì£¼ë¬¸ì´ ì—†ìŠµë‹ˆë‹¤."})})})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:"ì¸ê¸° ìƒí’ˆ"})}),e.jsx("div",{children:d.length>0?d.map((a,x)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem 0",borderBottom:x<d.length-1?"1px solid #eee":"none"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:a.name}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["íŒë§¤: ",ds(a.sales),"ê°œ"]})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontWeight:"600",color:"#28a745"},children:vs(a.revenue)})})]},x)):e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:"ì¸ê¸° ìƒí’ˆ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."})})]})]}),e.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:"ë¹ ë¥¸ ì‘ì—…"})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("button",{className:"btn btn-primary",onClick:()=>W("products"),children:[e.jsx(ue,{size:16}),"ìƒˆ ìƒí’ˆ ë“±ë¡"]}),e.jsxs("button",{className:"btn btn-success",onClick:()=>W("orders"),children:[e.jsx(Je,{size:16}),"ì£¼ë¬¸ ì²˜ë¦¬"]}),e.jsxs("button",{className:"btn btn-warning",onClick:()=>W("customers"),children:[e.jsx(as,{size:16}),"ê³ ê° ê´€ë¦¬"]}),e.jsxs("button",{className:"btn",style:{background:"#6f42c1",color:"white"},onClick:()=>W("statistics"),children:[e.jsx(Ae,{size:16}),"ë§¤ì¶œ ë¶„ì„"]})]})]}),e.jsx(fe,{isOpen:l,onClose:()=>c(!1),title:"ì£¼ë¬¸ ìƒì„¸ ì •ë³´",size:"medium",children:i&&e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ì£¼ë¬¸ë²ˆí˜¸"}),e.jsx("p",{style:{margin:0,color:"#007bff",fontWeight:"600"},children:i.id})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ì£¼ë¬¸ìƒíƒœ"}),e.jsx("span",{className:`badge ${f(i.status)}`,children:i.status})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ê³ ê°ëª…"}),e.jsx("p",{style:{margin:0},children:i.customer_name||i.customer})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ìƒí’ˆëª…"}),e.jsx("p",{style:{margin:0},children:i.product_name||i.product})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ì£¼ë¬¸ê¸ˆì•¡"}),e.jsx("p",{style:{margin:0,fontWeight:"600",fontSize:"1.125rem"},children:i.total_amount?vs(i.total_amount):i.amount})]}),i.order_date&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ì£¼ë¬¸ì¼ì‹œ"}),e.jsx("p",{style:{margin:0,color:"#666"},children:new Date(i.order_date).toLocaleString("ko-KR")})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>{c(!1),t("/admin/orders")},children:"ì£¼ë¬¸ ê´€ë¦¬ë¡œ ì´ë™"}),e.jsx("button",{className:"btn",style:{background:"#6c757d",color:"white"},onClick:()=>c(!1),children:"ë‹«ê¸°"})]})]})})]})},xa=()=>{var U;Ce();const{user:t}=Le();n.useState("month"),n.useState("products"),n.useState(!1),n.useState("");const[l,c]=n.useState(!0),[i,w]=n.useState(!1),[h,j]=n.useState(null),[o,y]=n.useState(""),[N,v]=n.useState("revenue"),[I,u]=n.useState(!1),[d,r]=n.useState(5e6),[g,_]=n.useState({totalProducts:0,approvedProducts:0,pendingProducts:0,soldoutProducts:0,totalSales:0,totalOrders:0,totalCustomers:0,monthlySales:0,monthlyOrders:0}),[D,k]=n.useState({productsByCategory:[],salesByMonth:[],topProducts:[],customerStats:[]}),[M,f]=n.useState({monthlyTrends:[],performanceMetrics:{revenueGrowth:0,orderGrowth:0,averageOrderValue:0},kpiAchievement:{salesTarget:1e7,salesActual:0,achievementRate:0}});n.useEffect(()=>{var p,V,C;if(t){const A=((p=t.user_metadata)==null?void 0:p.brand)||((V=t.user_metadata)==null?void 0:V.company)||((C=t.user_metadata)==null?void 0:C.name)||"ì•Œ ìˆ˜ ì—†ìŒ";y(A)}},[t]);const B=async()=>{if(!o||o==="ì•Œ ìˆ˜ ì—†ìŒ")return 5e6;try{const p=new Date().getFullYear(),V=new Date().getMonth()+1,{data:C,error:A}=await O.from("brand_sales_targets").select("monthly_target").eq("brand_name",o).eq("target_year",p).eq("target_month",V).single();return A&&A.code!=="PGRST116"?(console.error("ëª©í‘œ ì¡°íšŒ ì˜¤ë¥˜:",A),5e6):(C==null?void 0:C.monthly_target)||5e6}catch(p){return console.error("ëª©í‘œ ì¡°íšŒ ì‹¤íŒ¨:",p),5e6}},W=async p=>{if(!o||o==="ì•Œ ìˆ˜ ì—†ìŒ")return!1;try{const V=new Date().getFullYear(),C=new Date().getMonth()+1,{error:A}=await O.from("brand_sales_targets").upsert({brand_name:o,target_year:V,target_month:C,monthly_target:p,updated_at:new Date().toISOString()});return A?(console.error("ëª©í‘œ ì„¤ì • ì˜¤ë¥˜:",A),!1):(r(p),!0)}catch(V){return console.error("ëª©í‘œ ì„¤ì • ì‹¤íŒ¨:",V),!1}},a=()=>!D.topProducts||D.topProducts.length===0?[]:[...D.topProducts].sort((p,V)=>N==="revenue"?V.totalRevenue-p.totalRevenue:V.totalQuantity-p.totalQuantity).slice(0,5),x=async()=>{if(!(!o||o==="ì•Œ ìˆ˜ ì—†ìŒ"))try{console.log(`ğŸ“Š ${o} ë¸Œëœë“œ ì‹¤ì‹œê°„ í†µê³„ ë¡œë“œ ì‹œì‘`),console.log(`ğŸ“‹ ìƒí’ˆ ì¿¼ë¦¬ ì¡°ê±´: brand = '${o}'`);const{data:p}=await O.from("products").select("status").eq("brand",o);console.log("ğŸ“¦ ìƒí’ˆ ë°ì´í„°:",p);const V=(p==null?void 0:p.length)||0,C=(p==null?void 0:p.filter(se=>se.status==="forsale").length)||0,A=0,J=(p==null?void 0:p.filter(se=>se.status==="soldout").length)||0,{data:H}=await O.from("orders").select(`
          id,
          user_id,
          total_amount,
          status,
          order_date,
          created_at,
          items
        `),ee=(H==null?void 0:H.filter(se=>!se.items||!Array.isArray(se.items)?!1:se.items.some(b=>b.brand===o)))||[];let re=0,$=ee.length;ee.forEach(se=>{const s=se.items.filter(R=>R.brand===o).reduce((R,L)=>R+L.price*L.quantity,0);re+=s});const G=new Date,oe=new Date(G.getFullYear(),G.getMonth(),1),de=ee.filter(se=>new Date(se.order_date||se.created_at)>=oe);let ie=0;de.forEach(se=>{const s=se.items.filter(R=>R.brand===o).reduce((R,L)=>R+L.price*L.quantity,0);ie+=s});const Y=new Set(ee.map(se=>se.user_id)).size;_({totalProducts:V,approvedProducts:C,pendingProducts:A,soldoutProducts:J,totalSales:re,totalOrders:$,totalCustomers:Y,monthlySales:ie,monthlyOrders:de.length}),console.log(`âœ… ${o} ë¸Œëœë“œ ì‹¤ì‹œê°„ í†µê³„ ë¡œë“œ ì™„ë£Œ:`,{totalProducts:V,approvedProducts:C,pendingProducts:A,soldoutProducts:J,totalOrders:$,totalSales:re,uniqueCustomers:Y,monthlySales:ie,monthlyOrdersCount:de.length,allOrdersCount:(H==null?void 0:H.length)||0,brandOrdersCount:ee.length})}catch(p){console.error("ì‹¤ì‹œê°„ í†µê³„ ë¡œë“œ ì‹¤íŒ¨:",p),j("í†µê³„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},z=async()=>{if(!(!o||o==="ì•Œ ìˆ˜ ì—†ìŒ"))try{console.log(`ğŸ“ˆ ${o} ë¸Œëœë“œ ìƒì„¸ ë°ì´í„° ë¡œë“œ ì‹œì‘`);const{data:p}=await O.from("products").select(`
          status,
          categories!inner(name)
        `).eq("brand",o),V=(p==null?void 0:p.reduce((G,oe)=>{var ie;const de=((ie=oe.categories)==null?void 0:ie.name)||"ê¸°íƒ€";return G[de]||(G[de]={forsale:0,soldout:0,total:0}),G[de][oe.status]=(G[de][oe.status]||0)+1,G[de].total+=1,G},{}))||{},C=Object.entries(V).map(([G,oe])=>({category:G,...oe}));console.log(`ğŸ“‚ ${o} ì¹´í…Œê³ ë¦¬ë³„ ìƒí’ˆ:`,C);const{data:A}=await O.from("orders").select("items, order_date, created_at");console.log("ğŸ“¦ ì „ì²´ ì£¼ë¬¸ ë°ì´í„°:",(A==null?void 0:A.length)||0,"ê±´");const J={},H={},ee=new Date;ee.setMonth(ee.getMonth()-6),A==null||A.forEach(G=>{if(!G.items||!Array.isArray(G.items))return;const oe=new Date(G.order_date||G.created_at),de=oe.toISOString().slice(0,7),ie=G.items.filter(Y=>Y.brand===o);if(ie.length>0&&(ie.forEach(Y=>{const se=Y.name;J[se]||(J[se]={name:se,brand:Y.brand,price:Y.price,totalQuantity:0,totalRevenue:0}),J[se].totalQuantity+=Y.quantity,J[se].totalRevenue+=Y.quantity*Y.price}),oe>=ee)){H[de]||(H[de]=0);const Y=ie.reduce((se,b)=>se+b.price*b.quantity,0);H[de]+=Y}});const re=Object.values(J).sort((G,oe)=>oe.totalRevenue-G.totalRevenue).slice(0,10),$=Object.entries(H).map(([G,oe])=>({month:G,sales:oe})).sort((G,oe)=>G.month.localeCompare(oe.month));console.log(`ğŸ“Š ${o} ìƒí’ˆë³„ ë§¤ì¶œ:`,Object.keys(J).length,"ê°œ ìƒí’ˆ"),console.log(`ğŸ“ˆ ${o} ì›”ë³„ ë§¤ì¶œ:`,$.length,"ê°œì›”"),console.log(`ğŸ† ${o} ì¸ê¸° ìƒí’ˆ TOP 3 (ì´ ë§¤ì¶œì•¡ ê¸°ì¤€):`,re.slice(0,3).map(G=>({name:G.name,quantity:G.totalQuantity,revenue:G.totalRevenue.toLocaleString()+"ì›"}))),k({productsByCategory:C,salesByMonth:$,topProducts:re,customerStats:[]}),console.log(`âœ… ${o} ë¸Œëœë“œ ìƒì„¸ ë°ì´í„° ë¡œë“œ ì™„ë£Œ`)}catch(p){console.error("ìƒì„¸ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:",p)}},S=async()=>{if(!(!o||o==="ì•Œ ìˆ˜ ì—†ìŒ"))try{console.log(`ğŸ” ${o} ë¸Œëœë“œ ê³ ê¸‰ ë¶„ì„ ë°ì´í„° ë¡œë“œ ì‹œì‘`);const{data:p}=await O.from("orders").select("items, order_date, created_at"),V=new Date().getMonth(),C=V-1;let A=0,J=0,H=0,ee=0;p==null||p.forEach(ie=>{const se=new Date(ie.order_date||ie.created_at).getMonth();if(ie.items&&Array.isArray(ie.items)){const b=ie.items.filter(s=>s.brand===o).reduce((s,R)=>s+R.price*R.quantity,0);b>0&&(se===V?(A+=b,H+=1):se===C&&(J+=b,ee+=1))}});const re=J>0?((A-J)/J*100).toFixed(1):0,$=ee>0?((H-ee)/ee*100).toFixed(1):0,G=H>0?(A/H).toFixed(0):0,oe=await B(),de=(A/oe*100).toFixed(1);f({monthlyTrends:[],performanceMetrics:{revenueGrowth:parseFloat(re),orderGrowth:parseFloat($),averageOrderValue:parseFloat(G)},kpiAchievement:{salesTarget:oe,salesActual:A,achievementRate:parseFloat(de)}}),console.log(`âœ… ${o} ë¸Œëœë“œ ê³ ê¸‰ ë¶„ì„ ë°ì´í„° ë¡œë“œ ì™„ë£Œ`)}catch(p){console.error("ê³ ê¸‰ ë¶„ì„ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:",p)}},E=async()=>{if(!(!o||o==="ì•Œ ìˆ˜ ì—†ìŒ")){c(!0),j(null);try{await Promise.all([x(),z(),S()])}catch(p){console.error("í†µê³„ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:",p),j("í†µê³„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{c(!1)}}},T=async()=>{w(!0),await E(),w(!1)};return n.useEffect(()=>{o&&o!=="ì•Œ ìˆ˜ ì—†ìŒ"&&E()},[o]),l?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Se,{size:48,className:"mx-auto animate-spin text-blue-600 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"í†µê³„ ë°ì´í„° ë¡œë”© ì¤‘..."}),e.jsx("p",{className:"text-gray-600",children:"ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”"})]})}):h?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-600 mb-4",children:"âš ï¸"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨"}),e.jsx("p",{className:"text-gray-600 mb-4",children:h}),e.jsx("button",{onClick:T,className:"btn btn-primary",children:"ë‹¤ì‹œ ì‹œë„"})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{size:24,className:"text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"í†µê³„ ë¶„ì„"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[o," ë¸Œëœë“œ"]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("button",{onClick:T,disabled:i,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(ps,{size:16,className:`mr-2 ${i?"animate-spin":""}`}),"ìƒˆë¡œê³ ì¹¨"]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:[e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ue,{className:"h-6 w-6 text-blue-600"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"ì´ ìƒí’ˆ ìˆ˜"}),e.jsxs("dd",{className:"text-lg font-medium text-gray-900",children:[g.totalProducts.toLocaleString(),"ê°œ"]})]})})]})}),e.jsx("div",{className:"bg-gray-50 px-5 py-3",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-green-600 font-medium",children:["íŒë§¤ì¤‘: ",g.approvedProducts]}),e.jsx("span",{className:"text-gray-400 mx-2",children:"|"}),e.jsxs("span",{className:"text-red-600 font-medium",children:["í’ˆì ˆ: ",g.soldoutProducts]})]})})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:[e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(We,{className:"h-6 w-6 text-green-600"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"ì´ ë§¤ì¶œ"}),e.jsxs("dd",{className:"text-lg font-medium text-gray-900",children:[g.totalSales.toLocaleString(),"ì›"]})]})})]})}),e.jsx("div",{className:"bg-gray-50 px-5 py-3",children:e.jsx("div",{className:"text-sm",children:e.jsxs("span",{className:"text-blue-600 font-medium",children:["ì´ë²ˆ ë‹¬: ",g.monthlySales.toLocaleString(),"ì›"]})})})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:[e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Je,{className:"h-6 w-6 text-purple-600"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"ì´ ì£¼ë¬¸ ìˆ˜"}),e.jsxs("dd",{className:"text-lg font-medium text-gray-900",children:[g.totalOrders.toLocaleString(),"ê±´"]})]})})]})}),e.jsx("div",{className:"bg-gray-50 px-5 py-3",children:e.jsx("div",{className:"text-sm",children:e.jsxs("span",{className:"text-purple-600 font-medium",children:["ì´ë²ˆ ë‹¬: ",g.monthlyOrders,"ê±´"]})})})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:[e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(as,{className:"h-6 w-6 text-indigo-600"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"êµ¬ë§¤ ê³ ê°"}),e.jsxs("dd",{className:"text-lg font-medium text-gray-900",children:[g.totalCustomers.toLocaleString(),"ëª…"]})]})})]})}),e.jsx("div",{className:"bg-gray-50 px-5 py-3",children:e.jsx("div",{className:"text-sm",children:e.jsx("span",{className:"text-indigo-600 font-medium",children:"ë¸Œëœë“œ ìƒí’ˆ êµ¬ë§¤ì"})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"ì¹´í…Œê³ ë¦¬ë³„ ìƒí’ˆ í˜„í™©"}),e.jsx("div",{className:"space-y-4",children:D.productsByCategory.length>0?D.productsByCategory.map((p,V)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:p.category}),e.jsxs("div",{className:"text-xs text-gray-500",children:["íŒë§¤ì¤‘: ",p.forsale||0," | í’ˆì ˆ: ",p.soldout||0]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[p.total,"ê°œ"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[g.totalProducts>0?(p.total/g.totalProducts*100).toFixed(1):0,"%"]})]})]},V)):e.jsxs("div",{className:"text-center text-gray-500 py-4",children:[e.jsx(ue,{size:32,className:"mx-auto text-gray-300 mb-2"}),e.jsx("p",{children:"ì¹´í…Œê³ ë¦¬ë³„ ìƒí’ˆ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."})]})})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"ì¸ê¸° ìƒí’ˆ TOP 5"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>v("revenue"),className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${N==="revenue"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"ë§¤ì¶œì•¡ìˆœ"}),e.jsx("button",{onClick:()=>v("quantity"),className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${N==="quantity"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"íŒë§¤ëŸ‰ìˆœ"})]})})]}),e.jsx("div",{className:"space-y-4",children:a().length>0?a().map((p,V)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-blue-600",children:V+1})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:p.name}),N==="revenue"?e.jsxs("p",{className:"text-sm text-gray-500",children:["íŒë§¤ëŸ‰: ",p.totalQuantity,"ê°œ"]}):e.jsxs("p",{className:"text-sm text-gray-500",children:[p.totalRevenue.toLocaleString(),"ì›"]})]}),e.jsx("div",{className:"text-right",children:N==="revenue"?e.jsxs("p",{className:"text-sm font-bold text-blue-600",children:[p.totalRevenue.toLocaleString(),"ì›"]}):e.jsxs("p",{className:"text-sm font-bold text-blue-600",children:["íŒë§¤ëŸ‰: ",p.totalQuantity,"ê°œ"]})})]},V)):e.jsxs("div",{className:"text-center text-gray-500 py-4",children:[e.jsx(Ae,{size:32,className:"mx-auto text-gray-300 mb-2"}),e.jsx("p",{children:"ì¸ê¸° ìƒí’ˆ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"ì„±ê³¼ ì§€í‘œ"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"ë§¤ì¶œ ì¦ê°€ìœ¨"}),e.jsxs("div",{className:"flex items-center",children:[M.performanceMetrics.revenueGrowth>=0?e.jsx(Ae,{size:16,className:"text-green-500 mr-1"}):e.jsx(Is,{size:16,className:"text-red-500 mr-1"}),e.jsxs("span",{className:`text-sm font-medium ${M.performanceMetrics.revenueGrowth>=0?"text-green-600":"text-red-600"}`,children:[M.performanceMetrics.revenueGrowth,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"ì£¼ë¬¸ ì¦ê°€ìœ¨"}),e.jsxs("div",{className:"flex items-center",children:[M.performanceMetrics.orderGrowth>=0?e.jsx(Ae,{size:16,className:"text-green-500 mr-1"}):e.jsx(Is,{size:16,className:"text-red-500 mr-1"}),e.jsxs("span",{className:`text-sm font-medium ${M.performanceMetrics.orderGrowth>=0?"text-green-600":"text-red-600"}`,children:[M.performanceMetrics.orderGrowth,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"í‰ê·  ì£¼ë¬¸ ê¸ˆì•¡"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Number(M.performanceMetrics.averageOrderValue).toLocaleString(),"ì›"]})]})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"ì›”ê°„ ëª©í‘œ ë‹¬ì„±ë¥ "}),e.jsxs("button",{onClick:()=>u(!0),className:"inline-flex items-center px-3 py-1 text-xs font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 hover:border-blue-300 transition-colors",children:[e.jsx(ns,{size:14,className:"mr-1"}),"ëª©í‘œ ì„¤ì •"]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"ë§¤ì¶œ ëª©í‘œ"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[M.kpiAchievement.achievementRate,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(M.kpiAchievement.achievementRate,100)}%`}})}),e.jsxs("div",{className:"flex items-center justify-between mt-1 text-xs text-gray-500",children:[e.jsxs("span",{children:[M.kpiAchievement.salesActual.toLocaleString(),"ì›"]}),e.jsxs("span",{children:[M.kpiAchievement.salesTarget.toLocaleString(),"ì›"]})]})]})})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"ìµœê·¼ ë§¤ì¶œ ì¶”ì´ (6ê°œì›”)"}),e.jsx("div",{className:"space-y-3",children:D.salesByMonth.length>0?D.salesByMonth.map((p,V)=>{const[C,A]=p.month.split("-"),J=`${C}ë…„ ${parseInt(A)}ì›”`;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:J}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[p.sales.toLocaleString(),"ì›"]})]},V)}):e.jsxs("div",{className:"text-center text-gray-500 py-4",children:[e.jsx(_e,{size:32,className:"mx-auto text-gray-300 mb-2"}),e.jsx("p",{children:"ìµœê·¼ 6ê°œì›” ë§¤ì¶œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."})]})})]})]})]}),e.jsx(fe,{isOpen:I,onClose:()=>u(!1),title:`${o} ë¸Œëœë“œ ë§¤ì¶œ ëª©í‘œ ì„¤ì •`,size:"md",children:e.jsx(pa,{brandName:o,currentTarget:((U=M.kpiAchievement)==null?void 0:U.salesTarget)||d,onSave:async p=>{await W(p)?(await E(),u(!1),alert("ë§¤ì¶œ ëª©í‘œê°€ ì„±ê³µì ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.")):alert("ëª©í‘œ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")},onCancel:()=>u(!1)})})]})},pa=({brandName:t,currentTarget:l,onSave:c,onCancel:i})=>{const[w,h]=n.useState(l),[j,o]=n.useState(!1),y=async()=>{if(w<=0){alert("ëª©í‘œ ê¸ˆì•¡ì€ 0ë³´ë‹¤ ì»¤ì•¼ í•©ë‹ˆë‹¤.");return}o(!0),await c(w),o(!1)},N=I=>I.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),v=I=>{const u=I.target.value.replace(/[^0-9]/g,"");h(parseInt(u)||0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ns,{className:"h-5 w-5 text-blue-600 mr-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"ì›”ê°„ ë§¤ì¶œ ëª©í‘œ ì„¤ì •"}),e.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:[new Date().getFullYear(),"ë…„ ",new Date().getMonth()+1,"ì›” ë§¤ì¶œ ëª©í‘œë¥¼ ì„¤ì •í•˜ì„¸ìš”."]})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ëª©í‘œ ë§¤ì¶œì•¡ (ì›)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:N(w),onChange:v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-right text-lg font-medium",placeholder:"10,000,000"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 text-sm",children:"â‚©"})})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["í˜„ì¬ ëª©í‘œ: ",N(l),"ì›"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:"ëª©í‘œ ì„¤ì • ì•ˆë‚´"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ ì›”ê°„ ë§¤ì¶œ ëª©í‘œëŠ” ë§¤ì›” ê°œë³„ì ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤."}),e.jsx("li",{children:"â€¢ ì„¤ì •ëœ ëª©í‘œëŠ” í†µê³„ í˜ì´ì§€ì˜ ë‹¬ì„±ë¥  ê³„ì‚°ì— ì‚¬ìš©ë©ë‹ˆë‹¤."}),e.jsx("li",{children:"â€¢ ëª©í‘œëŠ” ì–¸ì œë“ ì§€ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:i,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"ì·¨ì†Œ"}),e.jsx("button",{onClick:y,disabled:j,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:j?e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"animate-spin h-4 w-4 mr-2"}),"ì €ì¥ ì¤‘..."]}):"ëª©í‘œ ì„¤ì •"})]})]})},Us=({productId:t,currentImageUrls:l=[],onImagesUpload:c,onImagesDelete:i,disabled:w=!1,maxImages:h=10,mode:j="append"})=>{const[o,y]=n.useState(!1),[N,v]=n.useState(!1),[I,u]=n.useState(0),[d,r]=n.useState(l),[g,_]=n.useState(""),D=n.useRef(null),k=n.useRef(!1),M=T=>{const p=["image/jpeg","image/jpg","image/png","image/webp"];return T.size>5242880?"íŒŒì¼ í¬ê¸°ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.":p.includes(T.type)?null:"ì§€ì›ë˜ëŠ” ì´ë¯¸ì§€ í˜•ì‹: JPG, PNG, WebP"},f=n.useCallback(async T=>{if(console.log("ğŸ”„ MultipleImageUpload - handleFilesUpload ì‹œì‘:",{filesCount:T==null?void 0:T.length,currentImageUrls:d.length,mode:j,productId:t,isAlreadyUploading:k.current}),!T||T.length===0)return;if(k.current){console.warn("âš ï¸ ì´ë¯¸ ì—…ë¡œë“œ ì¤‘ì…ë‹ˆë‹¤. ì¤‘ë³µ í˜¸ì¶œ ë¬´ì‹œ.");return}if((j==="replace"?0:d.length)+T.length>h){_(`ìµœëŒ€ ${h}ê°œì˜ ì´ë¯¸ì§€ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`);return}for(const p of T){const V=M(p);if(V){_(V);return}}_(""),v(!0),u(0),k.current=!0;try{const p=setInterval(()=>{u(A=>A>=90?(clearInterval(p),90):A+10)},200),V=Array.from(T).map(A=>URL.createObjectURL(A));clearInterval(p),u(100);const C=j==="replace"?V:[...d,...V];console.log("ğŸ“¸ ì´ë¯¸ì§€ URL ì—…ë°ì´íŠ¸:",{mode:j,ê¸°ì¡´ì´ë¯¸ì§€ìˆ˜:d.length,ìƒˆì´ë¯¸ì§€ìˆ˜:V.length,ìµœì¢…ì´ë¯¸ì§€ìˆ˜:C.length,ê¸°ì¡´URLs:d,ìƒˆURLs:V,ìµœì¢…URLs:C}),r(C),c&&c(C,[],T),setTimeout(()=>{v(!1),u(0),k.current=!1},500)}catch(p){console.error("ì—…ë¡œë“œ ì˜¤ë¥˜:",p),_(p.message||"ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."),v(!1),u(0),k.current=!1}},[t,d,h,c,j]),B=async T=>{if(!(T<0||T>=d.length)&&window.confirm("ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{const U=d[T];if(console.log("ğŸ—‘ï¸ ì‚­ì œí•  ì´ë¯¸ì§€:",{index:T,imageUrl:U}),U&&!U.startsWith("blob:")){const C=U.split("/").slice(-3).join("/");console.log("ğŸ“ íŒŒì¼ ê²½ë¡œ:",C);const A=await Ys(C);A.success||console.warn("âš ï¸ Storage ì‚­ì œ ì‹¤íŒ¨:",A.error)}const p=d.filter((V,C)=>C!==T);r(p),i&&i(p),console.log("âœ… ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ:",{newImageUrls:p})}catch(U){console.error("ì‚­ì œ ì˜¤ë¥˜:",U),_("ì´ë¯¸ì§€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},W=(T,U)=>{if(T<0||T>=d.length||U<0||U>=d.length)return;const p=[...d],[V]=p.splice(T,1);p.splice(U,0,V),r(p),c&&c(p,[],[])},a=n.useCallback(T=>{T.preventDefault(),!w&&!N&&y(!0)},[w,N]),x=n.useCallback(T=>{T.preventDefault(),y(!1)},[]),z=n.useCallback(T=>{if(T.preventDefault(),y(!1),w||N)return;const U=Array.from(T.dataTransfer.files);U.length>0&&f(U)},[w,N,f]),S=T=>{const U=Array.from(T.target.files);console.log("ğŸ“ íŒŒì¼ ì„ íƒ ì´ë²¤íŠ¸:",{files:U.length,target:T.target}),U.length>0&&(f(U),T.target.value="")},E=()=>{var T;!w&&!N&&((T=D.current)==null||T.click())};return e.jsxs("div",{style:{width:"100%"},children:[g&&e.jsx("div",{style:{background:"#fee",color:"#c33",padding:"0.75rem",borderRadius:"6px",marginBottom:"1rem",fontSize:"0.875rem"},children:g}),d.length>0&&e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:d.map((T,U)=>e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("div",{style:{position:"relative",width:"100%",paddingBottom:"100%",borderRadius:"8px",overflow:"hidden",border:"2px solid #ddd"},children:[e.jsx("img",{src:T,alt:`ìƒí’ˆ ì´ë¯¸ì§€ ${U+1}`,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}}),U===0&&e.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",background:"#007bff",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600"},children:"ì¸ë„¤ì¼"}),e.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600"},children:U+1}),e.jsx("button",{onClick:()=>B(U),style:{position:"absolute",bottom:"4px",right:"4px",background:"rgba(220, 53, 69, 0.9)",color:"white",border:"none",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},title:"ì´ë¯¸ì§€ ì‚­ì œ",children:e.jsx(Ye,{size:12})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"4px",marginTop:"4px"},children:[U>0&&e.jsx("button",{onClick:()=>W(U,U-1),style:{background:"#6c757d",color:"white",border:"none",borderRadius:"4px",padding:"2px 6px",fontSize:"0.75rem",cursor:"pointer"},title:"ìœ„ë¡œ ì´ë™",children:"â†‘"}),U<d.length-1&&e.jsx("button",{onClick:()=>W(U,U+1),style:{background:"#6c757d",color:"white",border:"none",borderRadius:"4px",padding:"2px 6px",fontSize:"0.75rem",cursor:"pointer"},title:"ì•„ë˜ë¡œ ì´ë™",children:"â†“"})]})]},U))})}),d.length<h&&e.jsxs("div",{onDragOver:a,onDragLeave:x,onDrop:z,onClick:E,style:{border:`2px dashed ${o?"#007bff":"#ddd"}`,borderRadius:"8px",padding:"2rem",textAlign:"center",cursor:w||N?"not-allowed":"pointer",background:o?"#f8f9ff":"#fafafa",transition:"all 0.2s ease",position:"relative",minHeight:"120px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[N&&e.jsxs("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(255, 255, 255, 0.9)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"8px"},children:[e.jsx(Se,{size:32,style:{animation:"spin 1s linear infinite",marginBottom:"1rem"}}),e.jsx("div",{style:{marginBottom:"0.5rem"},children:"ì—…ë¡œë“œ ì¤‘..."}),e.jsx("div",{style:{width:"200px",height:"4px",background:"#eee",borderRadius:"2px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${I}%`,height:"100%",background:"#007bff",transition:"width 0.3s ease"}})}),e.jsxs("div",{style:{fontSize:"0.875rem",marginTop:"0.5rem"},children:[I,"%"]})]}),e.jsx("div",{style:{width:"48px",height:"48px",background:"#f0f0f0",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"},children:o?e.jsx(Br,{size:20,color:"#007bff"}):e.jsx(et,{size:20,color:"#666"})}),e.jsx("div",{style:{marginBottom:"0.5rem",fontWeight:"600"},children:o?"íŒŒì¼ì„ ë†“ì•„ì£¼ì„¸ìš”":"ì´ë¯¸ì§€ë¥¼ ì¶”ê°€í•˜ì„¸ìš”"}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"0.5rem"},children:"í´ë¦­í•˜ê±°ë‚˜ íŒŒì¼ì„ ë“œë˜ê·¸í•´ì„œ ì—…ë¡œë“œ"}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#999"},children:["JPG, PNG, WebP í˜•ì‹ â€¢ ìµœëŒ€ 5MB â€¢ ",d.length,"/",h,"ê°œ"]})]}),e.jsx("input",{ref:D,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",multiple:!0,onChange:S,style:{display:"none"},disabled:w||N})]})},ga=()=>{const[t,l]=n.useState(""),[c,i]=n.useState("all"),[w,h]=n.useState("all"),[j,o]=n.useState([]),[y,N]=n.useState([]),[v,I]=n.useState(!0),[u,d]=n.useState(""),[r,g]=n.useState(!1),[_,D]=n.useState(!1),[k,M]=n.useState(!1),[f,B]=n.useState(null),[W,a]=n.useState(null),[x,z]=n.useState({name:"",category_id:null,brand:"",price:"",stock:"",description:"",image_url:"",image_path:"",tempImageFile:null});n.useEffect(()=>{V(),U(),S()},[]);const S=async()=>{try{const{data:s,error:R}=await O.from("categories").select("*").order("level",{ascending:!0}).order("name",{ascending:!0});if(R)throw R;N(s||[])}catch(s){console.error("ì¹´í…Œê³ ë¦¬ ë¡œë“œ ì˜¤ë¥˜:",s)}},E=s=>{const R={},L=[];return s.forEach(F=>{R[F.id]={...F,children:[]}}),s.forEach(F=>{F.parent_id===null?L.push(R[F.id]):R[F.parent_id]&&R[F.parent_id].children.push(R[F.id])}),L},T=s=>{const R=y.find(L=>L.id===s);return R?R.name:"ë¯¸ë¶„ë¥˜"},U=async()=>{var s,R;try{const{data:{user:L}}=await O.auth.getUser();if(((s=L==null?void 0:L.user_metadata)==null?void 0:s.role)==="merchant"){const F=((R=L==null?void 0:L.user_metadata)==null?void 0:R.name)||"";d(F),console.log("ğŸ·ï¸ í˜„ì¬ ì‚¬ìš©ì ë¸Œëœë“œ:",F)}}catch(L){console.error("ì‚¬ìš©ì ë¸Œëœë“œ ë¡œë“œ ì˜¤ë¥˜:",L)}},p=({value:s,onChange:R,placeholder:L="ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”"})=>{const[F,X]=n.useState(!1),[ne,ke]=n.useState(new Set),Ie=E(y),Xe=T(s),ws=ve=>{const Ee=new Set(ne);Ee.has(ve)?Ee.delete(ve):Ee.add(ve),ke(Ee)},gs=(ve,Ee=0)=>{const ls=ve.children&&ve.children.length>0,us=ne.has(ve.id);return e.jsxs("div",{children:[e.jsxs("div",{style:{padding:"0.5rem",paddingLeft:`${.5+Ee*1.5}rem`,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",":hover":{backgroundColor:"#f8f9fa"}},onMouseEnter:Oe=>Oe.target.style.backgroundColor="#f8f9fa",onMouseLeave:Oe=>Oe.target.style.backgroundColor="transparent",children:[ls&&e.jsx("span",{onClick:Oe=>{Oe.stopPropagation(),ws(ve.id)},style:{cursor:"pointer",width:"16px",textAlign:"center"},children:us?"â–¼":"â–¶"}),!ls&&e.jsx("span",{style:{width:"16px"}}),e.jsx("span",{onClick:()=>{R(ve.id),X(!1)},style:{flex:1},children:ve.name})]}),ls&&us&&ve.children.map(Oe=>gs(Oe,Ee+1))]},ve.id)};return e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("div",{onClick:()=>X(!F),style:{padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",cursor:"pointer",backgroundColor:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:s?"#000":"#999"},children:s?Xe:L}),e.jsx("span",{style:{transform:F?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:"â–¼"})]}),F&&e.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #ddd",borderRadius:"6px",maxHeight:"300px",overflowY:"auto",zIndex:1e3,boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:Ie.map(ve=>gs(ve))})]})},V=async()=>{var s,R;I(!0);try{const L=await Gs();if(L.success){console.log("ğŸ“Š ë¡œë“œëœ ìƒí’ˆ ë°ì´í„°:",L.data);const{data:{user:F}}=await O.auth.getUser();console.log("ğŸ‘¤ í˜„ì¬ ì‚¬ìš©ì:",F==null?void 0:F.email,F==null?void 0:F.user_metadata);let X=L.data;if(((s=F==null?void 0:F.user_metadata)==null?void 0:s.role)==="merchant"){const ke=(R=F==null?void 0:F.user_metadata)==null?void 0:R.name;console.log("ğŸ·ï¸ ì‚¬ìš©ì ë¸Œëœë“œ:",ke),X=L.data.filter(Ie=>Ie.brand&&Ie.brand.toLowerCase()===ke.toLowerCase()),console.log(`ğŸ” ë¸Œëœë“œ í•„í„°ë§ ê²°ê³¼: ${X.length}ê°œ ìƒí’ˆ`)}o(X);const ne=X.filter(ke=>ke.image_url);console.log("ğŸ–¼ï¸ ì´ë¯¸ì§€ê°€ ìˆëŠ” ìƒí’ˆ:",ne.length,"ê°œ")}else console.error("ìƒí’ˆ ë¡œë“œ ì‹¤íŒ¨:",L.error),alert("ìƒí’ˆ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}catch(L){console.error("ìƒí’ˆ ë¡œë“œ ì˜¤ë¥˜:",L),alert("ìƒí’ˆ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{I(!1)}},C=async()=>{if(x.name&&x.price&&x.stock&&x.category_id){I(!0);try{console.log("ğŸ” ë‹¤ìŒ ìƒí’ˆ IDë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘...");const{data:s,error:R}=await O.rpc("get_next_product_id");if(R)throw new Error(`ë‹¤ìŒ ìƒí’ˆ IDë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ${R.message}`);console.log(`âœ… ì‚¬ìš© ê°€ëŠ¥í•œ ë‹¤ìŒ ID: ${s}`);const L={id:s,name:x.name,category_id:x.category_id||1,price:parseInt(x.price),stock:parseInt(x.stock),status:"forsale",description:x.description,image_urls:[],brand:x.brand||u};console.log("ğŸ“¦ ìƒí’ˆ ë“±ë¡ ë°ì´í„°:",L);const F=await ct(L);if(F.success){const X=F.data.id;if(console.log("âœ… ìƒí’ˆ ë“±ë¡ ì„±ê³µ, ID:",X),x.tempImageFiles&&x.tempImageFiles.length>0){console.log("ğŸ”„ ë‹¤ì¤‘ ì´ë¯¸ì§€ë¥¼ ì‹¤ì œ ìƒí’ˆ IDë¡œ ì—…ë¡œë“œ ì¤‘...");try{const ne=await Bs(x.tempImageFiles,X);ne.success&&(await bs(X,{image_urls:ne.urls}),console.log("âœ… ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì™„ë£Œ:",ne.urls))}catch(ne){console.error("ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨:",ne)}}await V(),z({name:"",category_id:null,brand:u,price:"",stock:"",description:"",image_url:"",image_path:"",tempImageFile:null}),g(!1),alert("ìƒí’ˆì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.")}else throw new Error(F.error)}catch(s){console.error("ìƒí’ˆ ë“±ë¡ ì˜¤ë¥˜:",s),alert("ìƒí’ˆ ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: "+s.message)}finally{I(!1)}}else alert("í•„ìˆ˜ ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.")},A=()=>{z({name:"",category:"ì „ìì œí’ˆ",brand:u,price:"",stock:"",description:"",image_url:"",image_path:"",tempImageFile:null}),g(!0)},J=(s,R,L)=>{var F;console.log("ğŸ–¼ï¸ Products.js - handleNewProductImagesUpload í˜¸ì¶œ:",{imageUrls:s,imagePaths:R,fileCount:L==null?void 0:L.length,totalImageUrls:s.length,isTempUrls:s.some(X=>X.startsWith("blob:")),í˜„ì¬newProductìƒíƒœ:((F=x.image_urls)==null?void 0:F.length)||0}),z(X=>{var ne;return console.log("ğŸ“ newProduct ìƒíƒœ ì—…ë°ì´íŠ¸:",{ì´ì „ìƒíƒœ:((ne=X.image_urls)==null?void 0:ne.length)||0,ìƒˆìƒíƒœ:s.length}),{...X,tempImageFiles:L,image_urls:s}})},H=s=>{console.log("ğŸ—‘ï¸ ì‹ ê·œ ìƒí’ˆ ë‹¤ì¤‘ ì´ë¯¸ì§€ ì‚­ì œ"),z(R=>({...R,tempImageFiles:null,image_urls:s||[]}))},ee=(s,R,L)=>{console.log("ğŸ–¼ï¸ ê¸°ì¡´ ìƒí’ˆ ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ (ì„ì‹œ ì €ì¥):",{imageUrls:s,imagePaths:R,fileCount:L==null?void 0:L.length,totalImageUrls:s.length});const F=s.filter(X=>!X.startsWith("blob:"));B(X=>({...X,tempImageFiles:L,image_urls:F})),console.log("ğŸ“ ì´ë¯¸ì§€ë“¤ì´ ì„ì‹œë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤ (blob URL ì œì™¸). ìˆ˜ì • ë²„íŠ¼ì„ ëˆŒëŸ¬ ì €ì¥í•˜ì„¸ìš”.")},re=async s=>{if(console.log("ğŸ—‘ï¸ ê¸°ì¡´ ìƒí’ˆ ë‹¤ì¤‘ ì´ë¯¸ì§€ ì‚­ì œ:",{imageUrls:s}),f&&f.id)try{(await bs(f.id,{image_urls:s||[]})).success&&(B(L=>({...L,tempImageFiles:null,image_urls:s||[]})),o(L=>L.map(F=>F.id===f.id?{...F,image_urls:s||[]}:F)),console.log("âœ… ì´ë¯¸ì§€ ì‚­ì œ í›„ ë°ì´í„°ë² ì´ìŠ¤ ì—…ë°ì´íŠ¸ ì™„ë£Œ"))}catch(R){console.error("âŒ ì´ë¯¸ì§€ ì‚­ì œ í›„ ë°ì´í„°ë² ì´ìŠ¤ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:",R)}},$=s=>{B({...s}),a({...s}),D(!0)},G=async()=>{if(f){I(!0);try{if(console.log("ìˆ˜ì •í•  ìƒí’ˆ ë°ì´í„°:",f),!f.name||!f.price||f.stock===void 0)throw new Error("í•„ìˆ˜ ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");const s={name:f.name.trim(),category_id:f.category_id||1,price:parseInt(f.price)||0,stock:parseInt(f.stock)||0,status:f.status||"forsale",description:f.description||"",image_urls:f.image_urls||[],brand:f.brand||u};console.log("ì „ì†¡í•  ë°ì´í„°:",s),console.log("ğŸ“¤ updateProduct í˜¸ì¶œ:",{productId:f.id,productData:s});const R=await bs(f.id,s);if(console.log("ğŸ“¥ updateProduct ê²°ê³¼:",R),R.success){if(f.tempImageFiles&&f.tempImageFiles.length>0)try{const L=await Bs(f.tempImageFiles,f.id);if(L.success){const X=[...(f.image_urls||[]).filter(ne=>!ne.startsWith("blob:")),...L.urls];await bs(f.id,{image_urls:X}),console.log("âœ… ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì™„ë£Œ (blob URL ì œì™¸):",X)}}catch(L){console.error("ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨:",L)}await V(),D(!1),B(null),alert("ìƒí’ˆ ì •ë³´ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤."),console.log("âœ… ìƒí’ˆ ìˆ˜ì • ì™„ë£Œ - ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ìƒˆë¡œê³ ì¹¨ë¨")}else throw new Error(R.error)}catch(s){console.error("ìƒí’ˆ ìˆ˜ì • ì˜¤ë¥˜:",s),alert("ìƒí’ˆ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: "+s.message)}finally{I(!1)}}},oe=async s=>{if(window.confirm("ì •ë§ë¡œ ì´ ìƒí’ˆì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")){I(!0);try{const R=j.find(F=>F.id===s),L=await mt(s);if(L.success){if(R!=null&&R.image_path){console.log("ğŸ—‘ï¸ ì—°ê²°ëœ ì´ë¯¸ì§€ ì‚­ì œ ì¤‘:",R.image_path);try{await Ys(R.image_path),console.log("âœ… ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ")}catch(F){console.error("âš ï¸ ì´ë¯¸ì§€ ì‚­ì œ ì‹¤íŒ¨ (ìƒí’ˆì€ ì‚­ì œë¨):",F)}}await V(),alert("ìƒí’ˆì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.")}else throw new Error(L.error)}catch(R){console.error("ìƒí’ˆ ì‚­ì œ ì˜¤ë¥˜:",R),alert("ìƒí’ˆ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: "+R.message)}finally{I(!1)}}},de=s=>{B(s),M(!0)},ie=s=>({forsale:"íŒë§¤ì¤‘",soldout:"í’ˆì ˆ",hidden:"ìˆ¨ê¹€"})[s]||s,Y=s=>({forsale:"badge-success",soldout:"badge-danger",hidden:"badge-warning"})[s]||"badge-info",se=s=>{s==="all"?(h("all"),i("all"),l("")):s==="forsale"?h("forsale"):s==="soldout"?h("soldout"):s==="low-stock"&&h("low-stock"),setTimeout(()=>{const R=document.querySelector(".product-list-section");R&&R.scrollIntoView({behavior:"smooth"})},100)},b=j.filter(s=>{const R=s.name.toLowerCase().includes(t.toLowerCase()),L=c==="all"||s.category_id===parseInt(c);let F;return w==="all"?F=!0:w==="low-stock"?F=s.stock===0||s.stock&&s.stock<50:w==="soldout"?F=s.stock===0:F=s.status===w,R&&L&&F});return v&&j.length===0?e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",flexDirection:"column",gap:"1rem"},children:[e.jsx(Se,{size:48,style:{animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{color:"#666"},children:"ìƒí’ˆ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h2",{className:"card-title",children:"ìƒí’ˆ ê´€ë¦¬"}),e.jsxs("button",{className:"btn btn-primary",onClick:A,children:[e.jsx(qe,{size:16}),"ìƒˆ ìƒí’ˆ ë“±ë¡"]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{position:"relative",flex:"1",minWidth:"200px"},children:[e.jsx(Ue,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#666"}}),e.jsx("input",{type:"text",placeholder:"ìƒí’ˆëª…ìœ¼ë¡œ ê²€ìƒ‰...",value:t,onChange:s=>l(s.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"0.875rem"}})]}),e.jsxs("select",{value:c,onChange:s=>i(s.target.value),style:{padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"0.875rem",minWidth:"120px"},children:[e.jsx("option",{value:"all",children:"ì „ì²´ ì¹´í…Œê³ ë¦¬"}),y.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsxs("select",{value:w,onChange:s=>h(s.target.value),style:{padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"0.875rem",minWidth:"120px"},children:[e.jsx("option",{value:"all",children:"ì „ì²´ ìƒíƒœ"}),e.jsx("option",{value:"forsale",children:"íŒë§¤ì¤‘"}),e.jsx("option",{value:"soldout",children:"í’ˆì ˆ"}),e.jsx("option",{value:"low-stock",children:"ì¬ê³  ë¶€ì¡±"})]}),e.jsxs("button",{className:"btn",style:{background:"#6c757d",color:"white"},children:[e.jsx(Fe,{size:16}),"í•„í„°"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem",marginTop:"1.5rem"},children:[e.jsxs("div",{className:"card",style:{cursor:"pointer",transition:"all 0.2s ease",border:"1px solid #e9ecef",":hover":{borderColor:"#007bff",transform:"translateY(-2px)"}},onClick:()=>se("all"),onMouseEnter:s=>{s.currentTarget.style.borderColor="#007bff",s.currentTarget.style.transform="translateY(-2px)",s.currentTarget.style.boxShadow="0 4px 12px rgba(0,123,255,0.15)"},onMouseLeave:s=>{s.currentTarget.style.borderColor="#e9ecef",s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"#007bff",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ue,{size:24,color:"white"})}),e.jsx(es,{size:20,style:{color:"#6c757d"}})]}),e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.5rem",color:"#212529"},children:"ì „ì²´ ìƒí’ˆ"}),e.jsx("p",{style:{color:"#6c757d",marginBottom:"1rem",fontSize:"0.875rem"},children:"ëª¨ë“  ìƒí’ˆ ë³´ê¸° ë° ê´€ë¦¬"}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem"},children:e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#007bff"},children:[e.jsx(ue,{size:14}),"ì´ ",j.length,"ê°œ"]})})]}),e.jsxs("div",{className:"card",style:{cursor:"pointer",transition:"all 0.2s ease",border:"1px solid #e9ecef"},onClick:()=>se("forsale"),onMouseEnter:s=>{s.currentTarget.style.borderColor="#28a745",s.currentTarget.style.transform="translateY(-2px)",s.currentTarget.style.boxShadow="0 4px 12px rgba(40,167,69,0.15)"},onMouseLeave:s=>{s.currentTarget.style.borderColor="#e9ecef",s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"#28a745",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(je,{size:24,color:"white"})}),e.jsx(es,{size:20,style:{color:"#6c757d"}})]}),e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.5rem",color:"#212529"},children:"íŒë§¤ì¤‘ ìƒí’ˆ"}),e.jsx("p",{style:{color:"#6c757d",marginBottom:"1rem",fontSize:"0.875rem"},children:"í˜„ì¬ íŒë§¤ì¤‘ì¸ ìƒí’ˆ ê´€ë¦¬"}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem"},children:e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#28a745"},children:[e.jsx(je,{size:14}),j.filter(s=>s.status==="forsale").length,"ê°œ íŒë§¤ì¤‘"]})})]}),e.jsxs("div",{className:"card",style:{cursor:"pointer",transition:"all 0.2s ease",border:"1px solid #e9ecef"},onClick:()=>se("soldout"),onMouseEnter:s=>{s.currentTarget.style.borderColor="#dc3545",s.currentTarget.style.transform="translateY(-2px)",s.currentTarget.style.boxShadow="0 4px 12px rgba(220,53,69,0.15)"},onMouseLeave:s=>{s.currentTarget.style.borderColor="#e9ecef",s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"#dc3545",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Be,{size:24,color:"white"})}),e.jsx(es,{size:20,style:{color:"#6c757d"}})]}),e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.5rem",color:"#212529"},children:"í’ˆì ˆ ìƒí’ˆ"}),e.jsx("p",{style:{color:"#6c757d",marginBottom:"1rem",fontSize:"0.875rem"},children:"ì¬ê³ ê°€ ì—†ëŠ” ìƒí’ˆ ê´€ë¦¬"}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem"},children:e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#dc3545"},children:[e.jsx(Be,{size:14}),j.filter(s=>s.stock===0).length,"ê°œ í’ˆì ˆ"]})})]}),e.jsxs("div",{className:"card",style:{cursor:"pointer",transition:"all 0.2s ease",border:"1px solid #e9ecef"},onClick:()=>se("low-stock"),onMouseEnter:s=>{s.currentTarget.style.borderColor="#ffc107",s.currentTarget.style.transform="translateY(-2px)",s.currentTarget.style.boxShadow="0 4px 12px rgba(255,193,7,0.15)"},onMouseLeave:s=>{s.currentTarget.style.borderColor="#e9ecef",s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"#ffc107",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ue,{size:24,color:"white"})}),e.jsx(es,{size:20,style:{color:"#6c757d"}})]}),e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.5rem",color:"#212529"},children:"ì¬ê³  ë¶€ì¡±"}),e.jsx("p",{style:{color:"#6c757d",marginBottom:"1rem",fontSize:"0.875rem"},children:"ì¬ê³ ê°€ ë¶€ì¡±í•œ ìƒí’ˆ ê´€ë¦¬"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#ffc107"},children:[e.jsx(Be,{size:14}),j.filter(s=>s.stock<50&&s.stock>0).length,"ê°œ ë¶€ì¡±"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#dc3545"},children:[e.jsx(ue,{size:14}),j.filter(s=>s.stock===0).length,"ê°œ í’ˆì ˆ"]})]})]})]}),e.jsxs("div",{className:"card product-list-section",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title",children:["ìƒí’ˆ ëª©ë¡ (",b.length,"ê°œ)"]})}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ìƒí’ˆ ì •ë³´"}),e.jsx("th",{children:"ë¸Œëœë“œ"}),e.jsx("th",{children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("th",{children:"ê°€ê²©"}),e.jsx("th",{children:"ì¬ê³ "}),e.jsx("th",{children:"íŒë§¤ëŸ‰"}),e.jsx("th",{children:"ìƒíƒœ"}),e.jsx("th",{children:"ì‘ì—…"})]})}),e.jsx("tbody",{children:b.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsxs("div",{style:{width:"60px",height:"60px",background:"#f8f9fa",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"1px solid #e9ecef"},children:[s.image_urls&&s.image_urls.length>0?e.jsxs("div",{style:{position:"relative",width:"100%",height:"100%"},children:[e.jsx("img",{src:s.image_urls[0],alt:s.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:R=>{R.target.style.display="none",R.target.nextSibling&&(R.target.nextSibling.style.display="flex")}}),s.image_urls.length>1&&e.jsxs("div",{style:{position:"absolute",top:"4px",right:"4px",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600"},children:["+",s.image_urls.length-1]})]}):null,e.jsx("div",{style:{display:s.image_urls&&s.image_urls.length>0?"none":"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:e.jsx(ue,{size:24,color:"#666"})})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:s.name}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["ID: ",s.id]})]})]})}),e.jsx("td",{children:e.jsx("span",{style:{fontSize:"0.875rem",color:"#666",fontWeight:"500"},children:s.brand||"-"})}),e.jsx("td",{children:T(s.category_id)}),e.jsxs("td",{style:{fontWeight:"600"},children:["â‚©",s.price.toLocaleString()]}),e.jsx("td",{children:e.jsxs("span",{style:{color:s.stock===0?"#dc3545":s.stock<50?"#ffc107":"#28a745",fontWeight:"600"},children:[s.stock,"ê°œ"]})}),e.jsxs("td",{children:[s.sales,"ê°œ"]}),e.jsx("td",{children:e.jsx("span",{className:`badge ${Y(s.status)}`,children:ie(s.status)})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn",style:{background:"transparent",border:"1px solid #ddd",padding:"0.25rem 0.5rem"},title:"ìƒì„¸ë³´ê¸°",onClick:()=>de(s),children:e.jsx(we,{size:14})}),e.jsx("button",{className:"btn btn-primary",style:{padding:"0.25rem 0.5rem"},title:"ìˆ˜ì •",onClick:()=>$(s),children:e.jsx(rs,{size:14})}),e.jsx("button",{className:"btn btn-danger",style:{padding:"0.25rem 0.5rem"},title:"ì‚­ì œ",onClick:()=>oe(s.id),children:e.jsx(Ye,{size:14})})]})})]},s.id))})]})}),b.length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[e.jsx(ue,{size:48,style:{marginBottom:"1rem",opacity:.5}}),e.jsx("p",{children:"ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤."})]})]}),e.jsx(fe,{isOpen:r,onClose:()=>g(!1),title:"ìƒˆ ìƒí’ˆ ë“±ë¡",size:"medium",children:e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ìƒí’ˆ ì´ë¯¸ì§€"}),e.jsx(Us,{productId:`new-${Date.now()}`,currentImageUrls:x.image_urls||[],onImagesUpload:J,onImagesDelete:H,maxImages:10,mode:"replace"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ìƒí’ˆëª… *"}),e.jsx("input",{type:"text",value:x.name,onChange:s=>z({...x,name:s.target.value}),placeholder:"ìƒí’ˆëª…ì„ ì…ë ¥í•˜ì„¸ìš”",style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ë¸Œëœë“œ"}),e.jsx("input",{type:"text",value:x.brand,onChange:s=>z({...x,brand:s.target.value}),placeholder:"ë¸Œëœë“œëª…ì„ ì…ë ¥í•˜ì„¸ìš”",readOnly:u!=="",style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",backgroundColor:u!==""?"#f8f9fa":"white",cursor:u!==""?"not-allowed":"text"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ì¹´í…Œê³ ë¦¬ *"}),e.jsx(p,{value:x.category_id,onChange:s=>z({...x,category_id:s}),placeholder:"ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ê°€ê²© *"}),e.jsx("input",{type:"number",value:x.price,onChange:s=>z({...x,price:s.target.value}),placeholder:"ê°€ê²©ì„ ì…ë ¥í•˜ì„¸ìš”",style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ì¬ê³  ìˆ˜ëŸ‰ *"}),e.jsx("input",{type:"number",value:x.stock,onChange:s=>z({...x,stock:s.target.value}),placeholder:"ì¬ê³  ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”",style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ìƒí’ˆ ì„¤ëª…"}),e.jsx("textarea",{value:x.description,onChange:s=>z({...x,description:s.target.value}),placeholder:"ìƒí’ˆ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”",rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[e.jsxs("button",{className:"btn btn-primary",onClick:C,children:[e.jsx(ms,{size:16}),"ë“±ë¡"]}),e.jsxs("button",{className:"btn",style:{background:"#6c757d",color:"white"},onClick:()=>g(!1),children:[e.jsx(ze,{size:16}),"ì·¨ì†Œ"]})]})]})}),e.jsx(fe,{isOpen:_,onClose:()=>{W&&f&&(W.name!==f.name||W.category_id!==f.category_id||W.brand!==f.brand||W.price!==f.price||W.stock!==f.stock||W.status!==f.status||W.description!==f.description||W.image_urls&&f.image_urls&&JSON.stringify(W.image_urls)!==JSON.stringify(f.image_urls))?window.confirm("ë³€ê²½ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. ì €ì¥í•˜ì§€ ì•Šê³  ë‹«ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ?")&&(D(!1),B(null),a(null)):(D(!1),B(null),a(null))},title:"ìƒí’ˆ ì •ë³´ ìˆ˜ì •",size:"medium",children:f&&e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ìƒí’ˆ ì´ë¯¸ì§€"}),e.jsx(Us,{productId:f.id,currentImageUrls:f.image_urls||[],onImagesUpload:ee,onImagesDelete:re,maxImages:10,mode:"append"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ìƒí’ˆëª… *"}),e.jsx("input",{type:"text",value:f.name,onChange:s=>B({...f,name:s.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ë¸Œëœë“œ"}),e.jsx("input",{type:"text",value:f.brand||"",onChange:s=>B({...f,brand:s.target.value}),placeholder:"ë¸Œëœë“œëª…ì„ ì…ë ¥í•˜ì„¸ìš”",readOnly:u!=="",style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",backgroundColor:u!==""?"#f8f9fa":"white",cursor:u!==""?"not-allowed":"text"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ì¹´í…Œê³ ë¦¬ *"}),e.jsx(p,{value:f.category_id,onChange:s=>B({...f,category_id:s}),placeholder:"ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ê°€ê²© *"}),e.jsx("input",{type:"number",value:f.price,onChange:s=>B({...f,price:s.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ì¬ê³  ìˆ˜ëŸ‰ *"}),e.jsx("input",{type:"number",value:f.stock,onChange:s=>B({...f,stock:s.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ìƒíƒœ"}),e.jsxs("select",{value:f.status,onChange:s=>B({...f,status:s.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px"},children:[e.jsx("option",{value:"forsale",children:"íŒë§¤ì¤‘"}),e.jsx("option",{value:"soldout",children:"í’ˆì ˆ"}),e.jsx("option",{value:"hidden",children:"ìˆ¨ê¹€"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ìƒí’ˆ ì„¤ëª…"}),e.jsx("textarea",{value:f.description||"",onChange:s=>B({...f,description:s.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[e.jsxs("button",{className:"btn btn-primary",onClick:G,children:[e.jsx(ms,{size:16}),"ìˆ˜ì •"]}),e.jsxs("button",{className:"btn",style:{background:"#6c757d",color:"white"},onClick:()=>{W&&f&&(W.name!==f.name||W.category_id!==f.category_id||W.price!==f.price||W.stock!==f.stock||W.status!==f.status||W.description!==f.description||W.image_urls&&f.image_urls&&JSON.stringify(W.image_urls)!==JSON.stringify(f.image_urls))?window.confirm("ë³€ê²½ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. ì €ì¥í•˜ì§€ ì•Šê³  ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(D(!1),B(null),a(null)):(D(!1),B(null),a(null))},children:[e.jsx(ze,{size:16}),"ì·¨ì†Œ"]})]})]})}),e.jsx(fe,{isOpen:k,onClose:()=>M(!1),title:"ìƒí’ˆ ìƒì„¸ ì •ë³´",size:"medium",children:f&&e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("div",{style:{width:"120px",height:"120px",background:"#f8f9fa",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"1px solid #e9ecef"},children:[f.image_urls&&f.image_urls.length>0?e.jsxs("div",{style:{position:"relative",width:"100%",height:"100%"},children:[e.jsx("img",{src:f.image_urls[0],alt:f.name,style:{width:"100%",height:"100%",objectFit:"cover",cursor:"pointer"},onClick:()=>window.open(f.image_urls[0],"_blank"),onError:s=>{s.target.style.display="none",s.target.nextSibling&&(s.target.nextSibling.style.display="flex")}}),f.image_urls.length>1&&e.jsxs("div",{style:{position:"absolute",top:"4px",right:"4px",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600"},children:["+",f.image_urls.length-1]})]}):null,e.jsx("div",{style:{display:f.image_urls&&f.image_urls.length>0?"none":"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:e.jsx(ue,{size:32,color:"#666"})})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,marginBottom:"0.5rem"},children:f.name}),e.jsx("span",{className:`badge ${Y(f.status)}`,children:ie(f.status)})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ìƒí’ˆ ID"}),e.jsx("p",{style:{margin:0},children:f.id})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ë¸Œëœë“œ"}),e.jsx("p",{style:{margin:0},children:f.brand||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("p",{style:{margin:0},children:T(f.category_id)})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ê°€ê²©"}),e.jsxs("p",{style:{margin:0,fontWeight:"600",fontSize:"1.125rem",color:"#007bff"},children:["â‚©",f.price.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ì¬ê³ "}),e.jsxs("p",{style:{margin:0,fontWeight:"600",color:f.stock===0?"#dc3545":f.stock<50?"#ffc107":"#28a745"},children:[f.stock,"ê°œ"]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"íŒë§¤ëŸ‰"}),e.jsxs("p",{style:{margin:0,fontWeight:"600"},children:[f.sales,"ê°œ"]})]})]}),f.description&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ìƒí’ˆ ì„¤ëª…"}),e.jsx("p",{style:{margin:0,lineHeight:"1.5"},children:f.description})]}),f.image_urls&&f.image_urls.length>1&&e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:["ì¶”ê°€ ì´ë¯¸ì§€ë“¤ (",f.image_urls.length-1,"ê°œ)"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(80px, 1fr))",gap:"8px"},children:f.image_urls.slice(1).map((s,R)=>e.jsx("img",{src:s,alt:`${f.name} ${R+2}`,style:{width:"100%",height:"80px",objectFit:"cover",borderRadius:"6px",cursor:"pointer",border:"1px solid #e9ecef"},onClick:()=>window.open(s,"_blank")},R))})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[e.jsxs("button",{className:"btn btn-primary",onClick:()=>{M(!1),$(f)},children:[e.jsx(rs,{size:16}),"ìˆ˜ì •"]}),e.jsx("button",{className:"btn",style:{background:"#6c757d",color:"white"},onClick:()=>M(!1),children:"ë‹«ê¸°"})]})]})})]})},ua=async t=>{try{console.log("ğŸ” ë¸Œëœë“œë³„ ê³ ê° ì¡°íšŒ ì‹œì‘:",t);const{data:l,error:c}=await be.from("orders").select(`
        id,
        user_id,
        items,
        total_amount,
        order_date
      `);if(c)return console.error("ì£¼ë¬¸ ë°ì´í„° ì¡°íšŒ ì˜¤ë¥˜:",c),[];console.log("ğŸ“Š ì „ì²´ ì£¼ë¬¸ ë°ì´í„°:",(l==null?void 0:l.length)||0,"ê±´"),console.log("ğŸ” í•„í„°ë§ ëŒ€ìƒ ë¸Œëœë“œ:",t);const i=(l==null?void 0:l.filter(v=>{if(!v.items||!Array.isArray(v.items))return console.log("âŒ items ì—†ìŒ:",v.id),!1;const I=v.items.map(d=>d.brand).filter(Boolean);return console.log(`ğŸ“¦ ì£¼ë¬¸ ${v.id.slice(0,8)} ë¸Œëœë“œë“¤:`,I),v.items.some(d=>{const r=d.brand,g=r&&r.toLowerCase()===t.toLowerCase();return g&&console.log(`âœ… ë§¤ì¹­: ${r} === ${t}`),g})}))||[];console.log("ğŸ·ï¸ ë¸Œëœë“œ ê´€ë ¨ ì£¼ë¬¸:",i.length,"ê±´"),i.length>0&&console.log("ğŸ“‹ ë¸Œëœë“œ ì£¼ë¬¸ ëª©ë¡:",i.map(v=>({id:v.id.slice(0,8),brands:v.items.map(I=>I.brand).filter(Boolean)})));const w=new Map,h=[...new Set(i.map(v=>v.user_id))];console.log("ğŸ‘¥ ê³ ìœ  ì‚¬ìš©ì ID:",h.length,"ëª…");const{data:j,error:o}=await be.from("users").select("id, name, email, phone, created_at").in("id",h);if(o)return console.error("ì‚¬ìš©ì ë°ì´í„° ì¡°íšŒ ì˜¤ë¥˜:",o),[];console.log("ğŸ‘¤ ì¡°íšŒëœ ì‚¬ìš©ì ìˆ˜:",(j==null?void 0:j.length)||0);const y=new Map;j==null||j.forEach(v=>{y.set(v.id,v)}),i.forEach(v=>{const I=v.user_id,u=y.get(I);if(!u){console.log("âŒ ì‚¬ìš©ì ì •ë³´ ì—†ìŒ:",I);return}const d=v.items.filter(g=>{var _;return((_=g.brand)==null?void 0:_.toLowerCase())===t.toLowerCase()}).reduce((g,_)=>g+_.price*_.quantity,0);w.has(I)||w.set(I,{user:u,orders:[],brandSpent:0});const r=w.get(I);r.orders.push(v),r.brandSpent+=d});const N=Array.from(w.values()).map(({user:v,orders:I,brandSpent:u})=>{const d=I.map(_=>new Date(_.order_date)).sort((_,D)=>D.getTime()-_.getTime())[0],r=v.created_at?new Date(v.created_at):I.map(_=>new Date(_.order_date)).sort((_,D)=>_.getTime()-D.getTime())[0],g=d?Math.floor((Date.now()-d.getTime())/(1e3*60*60*24)):999;return{id:v.id,name:v.name||"ì´ë¦„ ì—†ìŒ",email:v.email||"",phone:v.phone||"",joinDate:r.toISOString().split("T")[0],totalOrders:I.length,totalSpent:u,lastOrder:d?d.toISOString().split("T")[0]:"",status:g<=90?"í™œì„±":"ë¹„í™œì„±"}});return N.sort((v,I)=>I.totalSpent-v.totalSpent),console.log("âœ… ë¸Œëœë“œ ê³ ê° ëª©ë¡ ìƒì„± ì™„ë£Œ:",N.length,"ëª…"),N}catch(l){return console.error("ë¸Œëœë“œ ê³ ê° ì¡°íšŒ ì¤‘ ì˜¤ë¥˜:",l),[]}},ja=async()=>{var t,l,c;try{const{data:{user:i}}=await be.auth.getUser();if(!i)return console.log("âŒ ì‚¬ìš©ì ì •ë³´ ì—†ìŒ"),null;console.log("ğŸ‘¤ í˜„ì¬ ì‚¬ìš©ì ì •ë³´:",{email:i.email,role:(t=i.user_metadata)==null?void 0:t.role,name:(l=i.user_metadata)==null?void 0:l.name,metadata:i.user_metadata});const w=(c=i.user_metadata)==null?void 0:c.name;if(w)return console.log("ğŸ·ï¸ user_metadataì—ì„œ ë¸Œëœë“œëª…:",w),w;console.log("ğŸ“‹ brand_admins í…Œì´ë¸”ì—ì„œ ì¡°íšŒ ì¤‘...",i.email);const{data:h,error:j}=await be.from("brand_admins").select("name").eq("email",i.email).single();return j?(console.error("ë¸Œëœë“œ ì •ë³´ ì¡°íšŒ ì˜¤ë¥˜:",j),null):(console.log("ğŸ·ï¸ brand_adminsì—ì„œ ë¸Œëœë“œëª…:",h==null?void 0:h.name),(h==null?void 0:h.name)||null)}catch(i){return console.error("ë¸Œëœë“œëª… ì¡°íšŒ ì¤‘ ì˜¤ë¥˜:",i),null}},fa=()=>{const[t,l]=n.useState(""),[c,i]=n.useState(!1),[w,h]=n.useState(!1),[j,o]=n.useState(null),[y,N]=n.useState({subject:"",message:""}),[v,I]=n.useState([]),[u,d]=n.useState(!0),[r,g]=n.useState("");n.useEffect(()=>{(async()=>{try{d(!0);const x=await ja();if(!x){console.error("ë¸Œëœë“œ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}g(x),console.log("ğŸ·ï¸ í˜„ì¬ ë¸Œëœë“œ:",x);const z=await ua(x);I(z),console.log("ğŸ‘¥ ë¡œë“œëœ ê³ ê° ìˆ˜:",z.length)}catch(x){console.error("ê³ ê° ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:",x)}finally{d(!1)}})()},[]);const _=v.filter(a=>a.name.toLowerCase().includes(t.toLowerCase())||a.email.toLowerCase().includes(t.toLowerCase())),D=a=>a>=12e7?{grade:"PRESTIGE VIP",color:"#8B5CF6",bgColor:"#F3E8FF"}:a>=8e7?{grade:"DIAMOND",color:"#3B82F6",bgColor:"#EBF8FF"}:a>=3e7?{grade:"GOLD",color:"#F59E0B",bgColor:"#FFFBEB"}:a>=5e6?{grade:"SILVER",color:"#6B7280",bgColor:"#F9FAFB"}:{grade:"FAMILY",color:"#10B981",bgColor:"#ECFDF5"},k=a=>{o(a),i(!0)},M=a=>{o(a),N({subject:`${a.name}ë‹˜ê»˜ ë“œë¦¬ëŠ” ì•ˆë‚´`,message:`ì•ˆë…•í•˜ì„¸ìš” ${a.name}ë‹˜,

í•­ìƒ ì €í¬ ì‡¼í•‘ëª°ì„ ì´ìš©í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.

ê°ì‚¬í•©ë‹ˆë‹¤.`}),h(!0)},f=()=>{if(!y.subject||!y.message){alert("ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}alert(`${j.name}ë‹˜ê»˜ ì´ë©”ì¼ì´ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.`),h(!1),N({subject:"",message:""})},B=a=>{window.confirm(`${a.name}ë‹˜(${a.phone})ì—ê²Œ ì „í™”ë¥¼ ê±¸ê¹Œìš”?`)&&window.open(`tel:${a.phone}`)},W=[{title:"ì´ ê³ ê° ìˆ˜",value:v.length,icon:Re,color:"#007bff"},{title:"í™œì„± ê³ ê°",value:v.filter(a=>a.status==="í™œì„±").length,icon:Re,color:"#28a745"},{title:"ì´ë²ˆ ë‹¬ ì‹ ê·œ",value:v.filter(a=>a.joinDate.startsWith("2024-01")).length,icon:Ns,color:"#ffc107"},{title:"í‰ê·  ì£¼ë¬¸ì•¡",value:`â‚©${Math.round(v.reduce((a,x)=>a+x.totalSpent,0)/v.length).toLocaleString()}`,icon:br,color:"#6f42c1"}];return u?e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",flexDirection:"column",gap:"1rem"},children:[e.jsx(Se,{size:48,style:{animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{color:"#666"},children:"ë¸Œëœë“œ ê³ ê° ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]}):e.jsxs("div",{children:[r&&e.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",background:"#f8f9fa"},children:[e.jsxs("h2",{style:{margin:0,color:"#007bff"},children:["ğŸ·ï¸ ",r," ë¸Œëœë“œ ê³ ê° ê´€ë¦¬"]}),e.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#666"},children:[r," ìƒí’ˆì„ êµ¬ë§¤í•œ ê³ ê°ë“¤ì˜ ì •ë³´ì…ë‹ˆë‹¤."]})]}),e.jsx("div",{className:"stats-grid",children:W.map((a,x)=>{const z=a.icon;return e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{backgroundColor:a.color},children:e.jsx(z,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:a.value}),e.jsx("p",{children:a.title})]})]},x)})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:e.jsx("h2",{className:"card-title",children:"ê³ ê° ê´€ë¦¬"})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{position:"relative",flex:"1",minWidth:"200px"},children:[e.jsx(Ue,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#666"}}),e.jsx("input",{type:"text",placeholder:"ê³ ê°ëª… ë˜ëŠ” ì´ë©”ì¼ë¡œ ê²€ìƒ‰...",value:t,onChange:a=>l(a.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"0.875rem"}})]}),e.jsxs("button",{className:"btn",style:{background:"#6c757d",color:"white"},children:[e.jsx(Fe,{size:16}),"í•„í„°"]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title",children:["ê³ ê° ëª©ë¡ (",_.length,"ëª…)"]})}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ê³ ê° ì •ë³´"}),e.jsx("th",{children:"ì—°ë½ì²˜"}),e.jsx("th",{children:"ê°€ì…ì¼"}),e.jsx("th",{children:"ì£¼ë¬¸ íšŸìˆ˜"}),e.jsx("th",{children:"ì—°ê°„ êµ¬ë§¤ì•¡"}),e.jsx("th",{children:"ë“±ê¸‰"}),e.jsx("th",{children:"ìµœê·¼ ì£¼ë¬¸"}),e.jsx("th",{children:"ìƒíƒœ"}),e.jsx("th",{children:"ì‘ì—…"})]})}),e.jsx("tbody",{children:_.map(a=>{const x=D(a.totalSpent);return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",background:"#007bff",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold"},children:a.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:a.name}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#666"},children:a.email})]})]})}),e.jsx("td",{children:a.phone}),e.jsx("td",{children:a.joinDate}),e.jsxs("td",{style:{fontWeight:"600"},children:[a.totalOrders,"íšŒ"]}),e.jsxs("td",{style:{fontWeight:"600"},children:["â‚©",a.totalSpent.toLocaleString()]}),e.jsx("td",{children:e.jsx("span",{className:"badge",style:{backgroundColor:x.bgColor,color:x.color,border:`1px solid ${x.color}`},children:x.grade})}),e.jsx("td",{children:a.lastOrder}),e.jsx("td",{children:e.jsx("span",{className:`badge ${a.status==="í™œì„±"?"badge-success":"badge-warning"}`,children:a.status})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn",style:{background:"transparent",border:"1px solid #ddd",padding:"0.25rem 0.5rem"},title:"ìƒì„¸ë³´ê¸°",onClick:()=>k(a),children:e.jsx(we,{size:14})}),e.jsx("button",{className:"btn btn-primary",style:{padding:"0.25rem 0.5rem"},title:"ì´ë©”ì¼ ë°œì†¡",onClick:()=>M(a),children:e.jsx(Pe,{size:14})}),e.jsx("button",{className:"btn btn-success",style:{padding:"0.25rem 0.5rem"},title:"ì „í™”ê±¸ê¸°",onClick:()=>B(a),children:e.jsx(Ke,{size:14})})]})})]},a.id)})})]})}),_.length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[e.jsx(Re,{size:48,style:{marginBottom:"1rem",opacity:.5}}),e.jsx("p",{children:"ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ê³ ê°ì´ ì—†ìŠµë‹ˆë‹¤."})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginTop:"1.5rem"},children:["PRESTIGE VIP","DIAMOND","GOLD","SILVER","FAMILY"].map(a=>{const x=v.filter(S=>D(S.totalSpent).grade===a).length,z=D(a==="PRESTIGE VIP"?12e7:a==="DIAMOND"?8e7:a==="GOLD"?3e7:a==="SILVER"?5e6:0);return e.jsxs("div",{className:"card",style:{textAlign:"center",backgroundColor:z.bgColor,border:`2px solid ${z.color}`,borderRadius:"12px"},children:[e.jsx("h3",{style:{color:z.color,fontSize:"2rem",marginBottom:"0.5rem"},children:x}),e.jsxs("p",{style:{color:z.color,fontWeight:"600",fontSize:"0.9rem"},children:[a," ê³ ê°"]})]},a)})}),e.jsx(fe,{isOpen:c,onClose:()=>i(!1),title:"ê³ ê° ìƒì„¸ ì •ë³´",size:"large",children:j&&e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{className:"card",style:{margin:0},children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{style:{margin:0},children:"ê¸°ë³¸ ì •ë³´"})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"60px",height:"60px",background:"#007bff",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"1.5rem"},children:j.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,marginBottom:"0.5rem"},children:j.name}),e.jsxs("span",{className:"badge",style:{backgroundColor:D(j.totalSpent).bgColor,color:D(j.totalSpent).color,border:`2px solid ${D(j.totalSpent).color}`,fontWeight:"700",fontSize:"0.85rem"},children:[D(j.totalSpent).grade," ê³ ê°"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ê³ ê° ID"}),e.jsx("p",{style:{margin:0},children:j.id})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ê°€ì…ì¼"}),e.jsx("p",{style:{margin:0},children:j.joinDate})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ì´ë©”ì¼"}),e.jsx("p",{style:{margin:0},children:j.email})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ì—°ë½ì²˜"}),e.jsx("p",{style:{margin:0},children:j.phone})]})]})]}),e.jsxs("div",{className:"card",style:{margin:0},children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{style:{margin:0},children:"êµ¬ë§¤ í†µê³„"})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx("h3",{style:{margin:0,color:"#007bff",fontSize:"2rem"},children:j.totalOrders}),e.jsx("p",{style:{margin:0,color:"#666"},children:"ì´ ì£¼ë¬¸ íšŸìˆ˜"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsxs("h3",{style:{margin:0,color:"#28a745",fontSize:"2rem"},children:["â‚©",j.totalSpent.toLocaleString()]}),e.jsx("p",{style:{margin:0,color:"#666"},children:"ì—°ê°„ êµ¬ë§¤ ê¸ˆì•¡"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsxs("h3",{style:{margin:0,color:"#ffc107",fontSize:"2rem"},children:["â‚©",Math.round(j.totalSpent/j.totalOrders).toLocaleString()]}),e.jsx("p",{style:{margin:0,color:"#666"},children:"í‰ê·  ì£¼ë¬¸ ê¸ˆì•¡"})]})]}),e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#666"},children:"ìµœê·¼ ì£¼ë¬¸ì¼"}),e.jsx("p",{style:{margin:0,fontWeight:"600"},children:j.lastOrder})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[e.jsxs("button",{className:"btn btn-primary",onClick:()=>{i(!1),M(j)},children:[e.jsx(Pe,{size:16}),"ì´ë©”ì¼ ë°œì†¡"]}),e.jsxs("button",{className:"btn btn-success",onClick:()=>B(j),children:[e.jsx(Ke,{size:16}),"ì „í™” ê±¸ê¸°"]}),e.jsxs("button",{className:"btn",style:{background:"#6c757d",color:"white"},onClick:()=>i(!1),children:[e.jsx(ze,{size:16}),"ë‹«ê¸°"]})]})]})}),e.jsx(fe,{isOpen:w,onClose:()=>h(!1),title:"ì´ë©”ì¼ ë°œì†¡",size:"medium",children:j&&e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ë°›ëŠ” ì‚¬ëŒ"}),e.jsxs("div",{style:{padding:"0.75rem",background:"#f8f9fa",borderRadius:"6px",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Re,{size:16}),e.jsxs("span",{children:[j.name," (",j.email,")"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ì œëª© *"}),e.jsx("input",{type:"text",value:y.subject,onChange:a=>N({...y,subject:a.target.value}),placeholder:"ì´ë©”ì¼ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”",style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"ë‚´ìš© *"}),e.jsx("textarea",{value:y.message,onChange:a=>N({...y,message:a.target.value}),placeholder:"ì´ë©”ì¼ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”",rows:8,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[e.jsxs("button",{className:"btn btn-primary",onClick:f,children:[e.jsx(Pe,{size:16}),"ë°œì†¡"]}),e.jsxs("button",{className:"btn",style:{background:"#6c757d",color:"white"},onClick:()=>h(!1),children:[e.jsx(ze,{size:16}),"ì·¨ì†Œ"]})]})]})})]})},ya=()=>{var E,T,U;const{user:t}=Le(),[l,c]=n.useState(""),[i,w]=n.useState("all"),[h,j]=n.useState("all"),[o,y]=n.useState(!1),[N,v]=n.useState(null),[I,u]=n.useState(""),[d,r]=n.useState([]),[g,_]=n.useState(!0),[D,k]=n.useState("");n.useEffect(()=>{var V,C,A;const p=((V=t==null?void 0:t.user_metadata)==null?void 0:V.brand)||((C=t==null?void 0:t.user_metadata)==null?void 0:C.company)||((A=t==null?void 0:t.user_metadata)==null?void 0:A.name)||"ì•Œ ìˆ˜ ì—†ëŠ” ë¸Œëœë“œ";k(p),console.log("ğŸ·ï¸ ì…ì ì‚¬ ë¸Œëœë“œ(ì¸ì¦):",p)},[(E=t==null?void 0:t.user_metadata)==null?void 0:E.brand,(T=t==null?void 0:t.user_metadata)==null?void 0:T.company,(U=t==null?void 0:t.user_metadata)==null?void 0:U.name]),n.useEffect(()=>{D&&M()},[D]);const M=async()=>{try{_(!0),console.log("ğŸ”„ ì…ì ì‚¬ ê³ ê°ì„œë¹„ìŠ¤: ë¬¸ì˜ ëª©ë¡ ë¡œë“œ ì‹œì‘");const V=(await it(D)).map(C=>{var A,J;return{id:C.id,customerName:((A=C.users)==null?void 0:A.name)||"ì•Œ ìˆ˜ ì—†ìŒ",customerEmail:C.email,customerPhone:C.phone||((J=C.users)==null?void 0:J.phone)||"ë¯¸ë“±ë¡",category:C.category,subject:C.title,content:C.content,status:C.status,priority:C.priority,submittedDate:new Date(C.created_at).toLocaleString("ko-KR"),assignedTo:C.assigned_to||"ë¯¸ë°°ì •",tenant:C.product_brand||C.tenant||D,reply:C.reply_content,replyDate:C.reply_date?new Date(C.reply_date).toLocaleString("ko-KR"):null,orderId:C.order_id,productName:C.product_name||"ì¼ë°˜ ë¬¸ì˜"}});r(V),console.log(`âœ… ì…ì ì‚¬ ê³ ê°ì„œë¹„ìŠ¤: ${V.length}ê±´ ë¬¸ì˜ ë¡œë“œ ì™„ë£Œ`)}catch(p){console.error("ë¬¸ì˜ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:",p)}finally{_(!1)}},f=[{value:"all",label:"ì „ì²´"},{value:"ë‹µë³€ëŒ€ê¸°",label:"ë‹µë³€ëŒ€ê¸°"},{value:"ì²˜ë¦¬ì¤‘",label:"ì²˜ë¦¬ì¤‘"},{value:"ë‹µë³€ì™„ë£Œ",label:"ë‹µë³€ì™„ë£Œ"}],B=[{value:"all",label:"ì „ì²´"},{value:"íšŒì›",label:"íšŒì›"},{value:"ìƒí’ˆ",label:"ìƒí’ˆ"},{value:"ì£¼ë¬¸/ê²°ì œ",label:"ì£¼ë¬¸/ê²°ì œ"},{value:"ë°°ì†¡",label:"ë°°ì†¡"}],W=d.filter(p=>{const V=p.subject.toLowerCase().includes(l.toLowerCase())||p.customerName.toLowerCase().includes(l.toLowerCase())||p.customerEmail.toLowerCase().includes(l.toLowerCase()),C=i==="all"||p.status===i,A=h==="all"||p.category===h;return V&&C&&A}),a=async p=>{if(!I.trim()){alert("ë‹µë³€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}try{console.log("ğŸ’¬ ë‹µë³€ ë“±ë¡ ì‹œì‘:",p),await Hs(p,I,D)?(r(d.map(C=>C.id===p?{...C,reply:I,status:"ë‹µë³€ì™„ë£Œ",assignedTo:D,replyDate:new Date().toLocaleString("ko-KR")}:C)),u(""),y(!1),alert("ë‹µë³€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤."),console.log("âœ… ë‹µë³€ ë“±ë¡ ì™„ë£Œ")):alert("ë‹µë³€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}catch(V){console.error("ë‹µë³€ ë“±ë¡ ì‹¤íŒ¨:",V),alert("ë‹µë³€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}},x=p=>{v(p),u(p.reply||""),y(!0)},z=p=>{window.open(`/admin/orders?orderId=${p}`,"_blank")},S=d.filter(p=>p.status==="ë‹µë³€ëŒ€ê¸°").length;return g?e.jsxs("div",{className:"page",children:[e.jsx("div",{className:"page-header",children:e.jsxs("h1",{children:["ê³ ê° ì„œë¹„ìŠ¤ ê´€ë¦¬ - ",D]})}),e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx("div",{children:"ë¬¸ì˜ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ê³ ê° ì„œë¹„ìŠ¤ ê´€ë¦¬"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[D," ë¸Œëœë“œ ê´€ë ¨ ë¬¸ì˜ë¥¼ ê´€ë¦¬í•˜ê³  ë¹ ë¥´ê²Œ ì‘ë‹µí•˜ì„¸ìš”"]})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex gap-4",children:[e.jsxs("div",{className:`rounded-lg px-4 py-3 min-w-[100px] cursor-pointer transition-all hover:shadow-md ${i==="all"?"bg-blue-100 border-2 border-blue-300":"bg-blue-50 hover:bg-blue-100"}`,onClick:()=>w("all"),children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.length}),e.jsx("div",{className:"text-sm text-blue-600",children:"ì „ì²´ ë¬¸ì˜"})]}),e.jsxs("div",{className:`rounded-lg px-4 py-3 min-w-[100px] cursor-pointer transition-all hover:shadow-md ${i==="ë‹µë³€ëŒ€ê¸°"?"bg-orange-100 border-2 border-orange-300":"bg-orange-50 hover:bg-orange-100"}`,onClick:()=>w("ë‹µë³€ëŒ€ê¸°"),children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:S}),e.jsx("div",{className:"text-sm text-orange-600",children:"ë‹µë³€ ëŒ€ê¸°"})]}),e.jsxs("div",{className:`rounded-lg px-4 py-3 min-w-[100px] cursor-pointer transition-all hover:shadow-md ${i==="ë‹µë³€ì™„ë£Œ"?"bg-green-100 border-2 border-green-300":"bg-green-50 hover:bg-green-100"}`,onClick:()=>w("ë‹µë³€ì™„ë£Œ"),children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.filter(p=>p.status==="ë‹µë³€ì™„ë£Œ").length}),e.jsx("div",{className:"text-sm text-green-600",children:"ë‹µë³€ ì™„ë£Œ"})]})]})]}),S>0&&e.jsx("div",{className:"mt-4 bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{size:20,className:"text-orange-600 mr-2"}),e.jsxs("span",{className:"text-orange-800 font-medium",children:["ë‹µë³€ ëŒ€ê¸° ì¤‘ì¸ ë¬¸ì˜ê°€ ",S,"ê°œ ìˆìŠµë‹ˆë‹¤."]})]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:e.jsx("h2",{className:"card-title",children:"ê³ ê° ì„œë¹„ìŠ¤ ê´€ë¦¬"})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{position:"relative",flex:"1",minWidth:"200px"},children:[e.jsx(Ue,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#666"}}),e.jsx("input",{type:"text",placeholder:"ì œëª©, ê³ ê°ëª…, ì´ë©”ì¼ë¡œ ê²€ìƒ‰...",value:l,onChange:p=>c(p.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"0.875rem"}})]}),e.jsx("select",{value:i,onChange:p=>w(p.target.value),style:{padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"0.875rem",minWidth:"140px"},children:f.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))}),e.jsx("select",{value:h,onChange:p=>j(p.target.value),style:{padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"0.875rem",minWidth:"140px"},children:B.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))}),e.jsxs("button",{className:"btn",style:{background:"#6c757d",color:"white"},children:[e.jsx(Fe,{size:16}),"í•„í„°"]})]})]}),e.jsx("div",{className:"card",children:W.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(He,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ë¬¸ì˜ê°€ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("p",{className:"text-gray-500",children:d.length===0?`${D} ë¸Œëœë“œ ê´€ë ¨ ë¬¸ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.`:"ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ë¬¸ì˜ê°€ ì—†ìŠµë‹ˆë‹¤."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ê³ ê° ì •ë³´"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ë¬¸ì˜ ë‚´ìš©"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ìƒí’ˆëª…"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ìš°ì„ ìˆœìœ„"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ìƒíƒœ"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ë“±ë¡ì¼"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ì‘ì—…"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map(p=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(Re,{size:20,className:"text-gray-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:p.customerName}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(Pe,{size:12,className:"mr-1"}),p.customerEmail]}),p.customerPhone!=="ë¯¸ë“±ë¡"&&e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(Ke,{size:12,className:"mr-1"}),p.customerPhone]})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:p.subject}),e.jsx("div",{className:"text-sm text-gray-500 max-w-xs",children:p.content.length>50?`${p.content.substring(0,50)}...`:p.content})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:p.category})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.productName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p.priority==="ë†’ìŒ"?"bg-red-100 text-red-800":p.priority==="ë³´í†µ"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:p.priority})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p.status==="ë‹µë³€ì™„ë£Œ"?"bg-green-100 text-green-800":p.status==="ì²˜ë¦¬ì¤‘"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:p.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Te,{size:14,className:"mr-1"}),p.submittedDate]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{onClick:()=>x(p),className:"text-blue-600 hover:text-blue-900 transition-colors p-2 rounded-lg hover:bg-blue-50",title:"ìƒì„¸ë³´ê¸° ë° ë‹µë³€",children:e.jsx(we,{size:16})})})]},p.id))})]})})})]})]}),o&&N&&e.jsxs(fe,{isOpen:o,onClose:()=>y(!1),title:"ë¬¸ì˜ ìƒì„¸ ì •ë³´",size:"large",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ê³ ê° ì •ë³´"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ê³ ê°ëª…"}),e.jsx("div",{className:"text-sm text-gray-900",children:N.customerName})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ì´ë©”ì¼"}),e.jsx("div",{className:"text-sm text-gray-900",children:N.customerEmail})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ì—°ë½ì²˜"}),e.jsx("div",{className:"text-sm text-gray-900",children:N.customerPhone})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("div",{className:"text-sm text-gray-900",children:N.category})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ìƒí’ˆëª…"}),e.jsx("div",{className:"text-sm text-gray-900",children:N.productName})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ìš°ì„ ìˆœìœ„"}),e.jsx("div",{children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N.priority==="ë†’ìŒ"?"bg-red-100 text-red-800":N.priority==="ë³´í†µ"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:N.priority})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ìƒíƒœ"}),e.jsx("div",{children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N.status==="ë‹µë³€ì™„ë£Œ"?"bg-green-100 text-green-800":N.status==="ì²˜ë¦¬ì¤‘"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:N.status})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ë“±ë¡ì¼"}),e.jsx("div",{className:"text-sm text-gray-900",children:N.submittedDate})]})]}),N.orderId&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"ê´€ë ¨ ì£¼ë¬¸"}),e.jsxs("div",{className:"text-sm text-gray-900",children:["ì£¼ë¬¸ ID: ",N.orderId]})]}),e.jsxs("button",{onClick:()=>z(N.orderId),className:"inline-flex items-center px-3 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"ì£¼ë¬¸ë‚´ì—­ ë³´ê¸°"]})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ë¬¸ì˜ ë‚´ìš©"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900",children:N.subject}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:N.content})]})]}),N.reply&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"ë‹µë³€"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:N.reply}),N.replyDate&&e.jsxs("div",{className:"text-xs text-gray-500",children:["ë‹µë³€ì¼: ",N.replyDate]})]})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:N.reply?"ë‹µë³€ ìˆ˜ì •":"ë‹µë³€ ì‘ì„±"}),e.jsx("textarea",{value:I,onChange:p=>u(p.target.value),placeholder:"ë‹µë³€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...",rows:"4",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200",children:[N&&e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",onClick:()=>a(N.id),children:[e.jsx(He,{size:16,className:"mr-2"}),N.reply?"ë‹µë³€ ìˆ˜ì •":"ë‹µë³€ ë“±ë¡"]}),e.jsx("button",{className:"inline-flex items-center px-4 py-2 bg-gray-300 text-gray-700 text-sm font-medium rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",onClick:()=>y(!1),children:"ë‹«ê¸°"})]})]})]})},ba=()=>{var w;const{user:t}=Le(),l=((w=t==null?void 0:t.user_metadata)==null?void 0:w.role)||"merchant",c=()=>e.jsxs(zs,{children:[e.jsx(pe,{path:"/",element:e.jsx(Os,{})}),e.jsx(pe,{path:"/dashboard",element:e.jsx(Os,{})}),e.jsx(pe,{path:"/statistics",element:e.jsx(Qr,{})}),e.jsx(pe,{path:"/product-management",element:e.jsx(Xr,{})}),e.jsx(pe,{path:"/product-approval",element:e.jsx(Zr,{})}),e.jsx(pe,{path:"/product-settings",element:e.jsx(ea,{})}),e.jsx(pe,{path:"/tenants",element:e.jsx(sa,{})}),e.jsx(pe,{path:"/tenant-statistics",element:e.jsx(ta,{})}),e.jsx(pe,{path:"/operations-statistics",element:e.jsx(ra,{})}),e.jsx(pe,{path:"/customer-service",element:e.jsx(aa,{})}),e.jsx(pe,{path:"/product-statistics",element:e.jsx(na,{})}),e.jsx(pe,{path:"/sales-statistics",element:e.jsx(la,{})}),e.jsx(pe,{path:"/profile",element:e.jsx(Gr,{})}),e.jsx(pe,{path:"/notice",element:e.jsx(Kr,{})}),e.jsx(pe,{path:"/orders",element:e.jsx(Ws,{})}),e.jsx(pe,{path:"/settlements",element:e.jsx(Ls,{})}),e.jsx(pe,{path:"/settings",element:e.jsx(Es,{})}),e.jsx(pe,{path:"*",element:e.jsx(ks,{to:"/admin",replace:!0})})]}),i=()=>e.jsxs(zs,{children:[e.jsx(pe,{path:"/",element:e.jsx(Fs,{})}),e.jsx(pe,{path:"/dashboard",element:e.jsx(Fs,{})}),e.jsx(pe,{path:"/statistics",element:e.jsx(xa,{})}),e.jsx(pe,{path:"/products",element:e.jsx(ga,{})}),e.jsx(pe,{path:"/customers",element:e.jsx(fa,{})}),e.jsx(pe,{path:"/customer-service",element:e.jsx(ya,{})}),e.jsx(pe,{path:"/profile",element:e.jsx(ia,{})}),e.jsx(pe,{path:"/notice",element:e.jsx(oa,{})}),e.jsx(pe,{path:"/orders",element:e.jsx(Ws,{})}),e.jsx(pe,{path:"/settlements",element:e.jsx(Ls,{})}),e.jsx(pe,{path:"/settings",element:e.jsx(Es,{})}),e.jsx(pe,{path:"*",element:e.jsx(ks,{to:"/admin",replace:!0})})]});return e.jsx(Vr,{userRole:l,children:l==="admin"||l==="hq"?c():i()})};function Na(){return e.jsx(ht,{children:e.jsxs(zs,{children:[e.jsx(pe,{path:"/login",element:e.jsx(Or,{})}),e.jsx(pe,{path:"/hq-register",element:e.jsx(Fr,{})}),e.jsx(pe,{path:"/merchant-register",element:e.jsx(Ur,{})}),e.jsx(pe,{path:"/*",element:e.jsx(Er,{requireAdmin:!0,children:e.jsx(ba,{})})})]})})}export{Na as default};
